{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@fullcalendar/core/main.esm.js","../node_modules/@fullcalendar/react/main.esm.js","../node_modules/fast-deep-equal/index.js","../node_modules/@fullcalendar/daygrid/main.esm.js","../../node_modules/fbjs/lib/emptyFunction.js","../../node_modules/fbjs/lib/invariant.js","../../node_modules/object-assign/index.js","../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../node_modules/prop-types/checkPropTypes.js","../../node_modules/prop-types/index.js","../../node_modules/prop-types/factoryWithThrowingShims.js","../../src/constant.js","../../src/decorators/staticMethods.js","../../src/decorators/customEvent.js","../../src/decorators/bodyMode.js","../../src/utils/getPosition.js","../../src/utils/getTipContent.js","../../src/utils/aria.js","../../src/utils/nodeListToArray.js","../../src/decorators/trackRemoval.js","../../src/index.js","../../src/decorators/windowListener.js","../../src/decorators/isCapture.js","../../src/decorators/getEffect.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_typeof2","obj","Symbol","iterator","constructor","_typeof","_possibleConstructorReturn","self","call","ReferenceError","_setPrototypeOf","p","_inherits","subClass","superClass","create","value","elementPropHash","className","colSpan","rowSpan","containerTagHash","createElement","tagName","attrs","content","el","document","attrName","applyStyle","setAttribute","innerHTML","appendToElement","htmlToElement","html","trim","container","computeContainerTag","firstChild","htmlToElements","Array","slice","childNodes","htmlToNodeList","substr","normalizeContent","appendChild","prependToElement","parent","newEls","afterEl","insertBefore","insertAfterElement","refEl","nextSibling","parentNode","Node","removeElement","removeChild","matchesMethod","Element","matches","matchesSelector","msMatchesSelector","closestMethod","closest","selector","this","documentElement","contains","elementMatches","parentElement","nodeType","elementClosest","findElements","containers","HTMLElement","allMatches","querySelectorAll","j","push","findChildren","parents","children","childNode","PIXEL_PROP_RE","propName","applyStyleProp","name","val","style","test","isRtlScrollbarOnLeft","getIsRtlScrollbarOnLeft","outerEl","position","top","left","border","padding","overflow","direction","body","res","getBoundingClientRect","computeIsRtlScrollbarOnLeft","sanitizeScrollbarWidth","width","Math","max","round","computeEdges","getPadding","computedStyle","window","getComputedStyle","borderLeft","parseInt","borderLeftWidth","borderRight","borderRightWidth","borderTop","borderTopWidth","borderBottom","borderBottomWidth","scrollbarLeftRight","offsetWidth","clientWidth","scrollbarBottom","offsetHeight","clientHeight","scrollbarLeft","scrollbarRight","paddingLeft","paddingRight","paddingTop","paddingBottom","computeRect","rect","pageXOffset","pageYOffset","right","bottom","computeHeightAndMargins","height","computeVMargins","computed","marginTop","marginBottom","computeClippingRect","overflowY","overflowX","getClippingParents","map","goWithinPadding","outerRect","edges","computeInnerRect","concat","reduce","rect0","rect1","rect2","min","intersectRects","listenBySelector","eventType","handler","realHandler","ev","matchedChild","addEventListener","removeEventListener","DAY_IDS","addWeeks","m","n","a","dateToUtcArray","arrayToUtcDate","addDays","addMs","diffWeeks","m0","m1","diffDays","valueOf","diffWholeDays","timeAsMs","startOfDay","getUTCFullYear","getUTCMonth","getUTCDate","weekOfGivenYear","marker","year","dow","doy","firstWeekStart","firstWeekOffset","dayStart","days","floor","fwd","getUTCDay","dateToLocalArray","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","arrayToLocalDate","Date","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","UTC","apply","isValidDate","isNaN","PARSE_RE","createDuration","input","unit","_a","s","exec","sign","years","months","milliseconds","parseString","normalizeObject","month","day","getWeeksFromInput","hours","hour","minutes","minute","seconds","second","millisecond","ms","weeks","week","durationsEqual","d0","d1","asRoughDays","dur","asRoughMs","greatestDurationDenominator","dontReturnWeeks","compensateScroll","rowEl","scrollbarWidths","marginLeft","marginRight","uncompensateScroll","distributeHeight","els","availableHeight","shouldRedistribute","minOffset1","minOffset2","flexEls","flexOffsets","flexHeights","usedHeight","undistributeHeight","forEach","minOffset","naturalHeight","naturalOffset","newHeight","matchCellWidths","maxInnerWidth","innerEl","innerWidth_1","subtractInnerElHeight","reflowStyleProps","diff","resetStyleProps","compareByFieldSpec","obj0","obj1","fieldSpec","func","b","String","localeCompare","flexibleCompare","field","order","capitaliseFirstLetter","str","charAt","toUpperCase","padStart","len","isInt","applyAll","functions","thisObj","args","ret","firstDefined","_i","arguments","undefined","debounce","wait","timeout","context","timestamp","result","later","last","setTimeout","refineProps","rawProps","processors","defaults","leftoverProps","refined","processor","Function","Number","Boolean","computeAlignedDayRange","timedRange","dayCnt","start","end","computeVisibleDayRange","nextDayThreshold","startDay","endDay","endTimeMS","diffDates","date0","date1","dateEnv","largeUnit","diffWholeYears","diffWholeMonths","m0day","m1day","diffDayAndTime","extendStatics","d","hasOwnProperty","__extends","__","__assign","assign","t","expandRecurringRanges","eventDef","duration","framingRange","recurringTypes","markers","recurringDef","typeId","expand","typeData","subtract","allDay","mergeProps","propObjs","complexProps","complexObjs","dest","unshift","filterHash","hash","filtered","mapHash","newHash","arrayToHash","a_1","hashValuesToArray","isPropsEqual","parseEvents","rawEvents","sourceId","calendar","allowOpenRange","eventStore","defs","instances","rawEvents_1","tuple","parseEvent","eventTupleToStore","def","defId","instanceId","expandRecurring","defaultAllDayEventDuration","defaultTimedEventDuration","starts_1","pluginSystem","hooks","createEventInstance","add","getRelevantEvents","def_1","newStore","filterEventStoreDefs","lookDef","def0","def1","groupId","transformEachRawEvent","refinedEvents","rawEvents_2","rawEvent","refinedEvent","mergeEventStores","store0","store1","filterFunc","parseRange","createMarker","invertRanges","ranges","constraintRange","dateRange","invertedRanges","sort","compareRanges","range0","range1","intersectRanges","newRange","rangesEqual","rangesIntersect","rangeContainsRange","outerRange","innerRange","rangeContainsMarker","range","isArraysEqual","a0","a1","memoize","workerFunc","EXTENDED_SETTINGS_AND_SEVERITIES","separator","omitZeroMinute","meridiem","omitCommas","STANDARD_DATE_PROP_SEVERITIES","timeZoneName","era","weekday","MERIDIEM_RE","COMMA_RE","MULTI_SPACE_RE","LTR_RE","UTC_RE","NativeFormatter","formatSettings","standardDateProps","extendedSettings","severity","name_1","buildFormattingFunc","format","formatRange","diffSeverity","ca","getMarkerYear","getMarkerMonth","getMarkerDay","computeMarkerDiffSeverity","calendarSystem","biggestUnitForPartial","full0","full1","partialFormattingFunc","options","biggestUnit","partialOptions","name_2","computePartialFormattingOptions","partial0","partial1","insertion","i0","found0","indexOf","before0","after0","i1","found1","before1","after1","before","after","findCommonInsertion","getLargestUnit","standardDatePropCnt","keys","formatTimeZoneOffset","timeZoneOffset","num","weekLabel","locale","display","parts","simpleNumberFormat","isRtl","reverse","join","formatWeekNumber","computeWeekNumber","sanitizeSettings","timeZone","zeroFormat","normalFormat","Intl","DateTimeFormat","codes","zeroProps","replace","tzoStr","replaced","injectTzoStr","toLocaleLowerCase","postProcess","buildNativeFormattingFunc","CmdFormatter","cmdStr","cmdFormatter","createVerboseFormattingArg","FuncFormatter","createFormatter","defaultSeparator","doIso","abs","mins","startInfo","expandZonedMarker","localeCodes","dateInfo","markerToArray","array","EventSourceApi","internalEventSource","remove","dispatch","type","refetch","sourceIds","get","publicId","meta","url","EventApi","_calendar","_def","_instance","setProp","_b","DATE_PROPS","NON_DATE_PROPS","mutate","standardProps","UNSCOPED_EVENT_UI_PROPS","ui","backgroundColor","borderColor","startEditable","durationEditable","setExtendedProp","extendedProps","setStart","startInput","startDelta","granularity","maintainDuration","datesDelta","setEnd","endInput","endDelta","hasEnd","setDates","instanceRange","moveStart","deltaInput","delta","moveEnd","moveDates","setAllDay","opt","formatInput","formatter","forcedStartTzo","forcedEndTzo","forcedTzo","mutation","fromApi","state","eventSources","toDate","title","rendering","constraints","overlap","allows","textColor","classNames","sliceEventStore","eventUiBases","inverseBgByGroupId","inverseBgByDefId","defByGroupId","bgRanges","fgRanges","eventUis","compileEventUis","origRange","normalRange","slicedRange","isStart","isEnd","invertedRanges_1","invertedRange","invertedRanges_2","bg","fg","filterSegsViaEls","segs","isMirror","view","hasPublicHandlers","filter","seg","custom","publiclyTrigger","event","eventRange","segs_1","setElSeg","fcSeg","getElSeg","eventDefs","compileEventUi","uis","combineEventUis","triggerRenderedSegs","isMirrors","segs_2","publiclyTriggerAfterSizing","loadingLevel","afterSizingTriggers","_eventsPositioned","triggerWillRemoveSegs","segs_3","trigger","segs_4","computeEventDraggable","eventUi","transformers","isDraggableTransformers","transformers_1","transformer","computeEventStartResizable","eventResizableFromStart","computeEventEndResizable","applyMutationToEventDef","eventConfig","appliers","copy","appliers_1","applier","applyMutationToEventInstance","eventInstance","forceAllDay","clearEnd","getDefaultEventEnd","reduceEventStore","action","dateProfile","eventSource","fetchId","fetchRange","latestFetchId","subset","calEachTransform","sourceEachTransform","eventDataTransform","transformRawEvents","excludeEventsBySourceId","receiveRawEvents","expandRange","addEvent","activeRange","oldDateEnv","newDateEnv","canComputeOffset","rezoneDates","relevant","eventConfigBase","eventConfigs","eventDefMutationAppliers","applyMutationToEventStore","applyMutationToRelated","excludeInstances","removals","isNewPropsValid","newProps","businessHours","dateSelection","eventSelection","eventDrag","eventResize","isPropsValid","dateSpanMeta","filterConfig","interaction","subjectEventStore","mutatedEvents","subjectDefs","subjectInstances","subjectConfigs","isEvent","selectionConfig","otherEventStore","affectedEvents","otherDefs","otherInstances","otherConfigs","subjectInstanceId","subjectInstance","subjectRange","subjectConfig","subjectDef","allConstraintsPass","overlapFunc","otherInstanceId","otherInstance","calendarEventStore","subjectAllow","subjectDateSpan","origDef","origInstance","eventApi","buildDateSpanApi","isInteractionPropsValid","relevantEventStore","relevantDefs","relevantInstances","selection","selectionRange","relevantInstanceId","relevantInstance","selectionAllow","fullDateSpan","isDateSelectionPropsValid","businessHoursUnexpanded","constraints_1","anyRangesContainRange","constraintToRanges","constraint","eventStoreToRanges","outerRanges","outerRanges_1","htmlEscape","cssToStr","cssProps","statements","parseClassName","raw","isArray","split","editable","allow","color","processUnscopedUiProps","leftovers","normalizeConstraint","processScopedUiProps","prefix","rawScoped","rawUnscoped","wasFound","scopedKey","EMPTY_EVENT_UI","combineTwoEventUis","item0","item1","id","uid","allDayDefault","source","computeIsAllDayDefault","leftovers0","recurringRes","eventInput","localLeftovers","parsed","parse","allDayGuess","parseRecurring","parseEventDef","leftovers1","singleRes","startMeta","endMeta","pluckDateProps","startMarker","endMarker","createMarkerMeta","isTimeUnspecified","parseSingle","preLeftovers","pluckNonDateProps","eventDefParsers","newLeftovers","eventDefParser","freeze","DEF_DEFAULTS","startTime","endTime","daysOfWeek","parseBusinessHours","rawDefs","rawDef","refineInputs","memoizeRendering","renderFunc","unrenderFunc","dependencies","thisContext","prevArgs","dependents","unrender","dependents_1","dependencies_1","EMPTY_EVENT_STORE","Splitter","getKeysForEventDefs","_getKeysForEventDefs","splitDateSelection","_splitDateSpan","splitEventStore","_splitEventStore","splitIndividualUi","_splitIndividualUi","splitEventDrag","_splitInteraction","splitEventResize","eventUiBuilders","splitProps","_this","keyInfos","getKeyInfo","defKeys","dateSelections","individualUi","eventStores","eventDrags","eventResizes","info","buildEventUiForKey","keyInfo","buildEventUi","dateSpan","dateSpans","keys_1","getKeysForDateSpan","getKeysForEventDef","splitStores","_c","splitHashes","splitStates","affectedStores_1","mutatedKeysByDefId","mutatedStores_1","populate","origSeg","allUi","eventUiForKey","baseParts","stuff","buildGotoAnchorHtml","allOptions","gotoOptions","innerHtml","forceOff","finalOptions","formatIso","omitTime","attrsToStr","navLinks","JSON","stringify","getDayClasses","noThemeHighlight","todayStart","todayEnd","theme","classes","monthMode","currentRange","getNow","getClass","EmitterMixin","_super","on","addToHash","_handlers","one","_oneHandlers","off","removeFromHash","triggerWith","hasHandlers","Mixin","mixInto","destClass","mixIntoObj","destObj","getOwnPropertyNames","mixOver","PositionCache","originEl","isHorizontal","isVertical","build","originClientRect","buildElHorizontals","buildElVerticals","originClientLeft","lefts","rights","originClientTop","tops","bottoms","leftToIndex","leftPosition","topToIndex","topPosition","getWidth","leftIndex","getHeight","topIndex","ScrollController","getMaxScrollTop","getScrollHeight","getClientHeight","getMaxScrollLeft","getScrollWidth","getClientWidth","canScrollVertically","canScrollHorizontally","canScrollUp","getScrollTop","canScrollDown","canScrollLeft","getScrollLeft","canScrollRight","ElementScrollController","scrollTop","scrollLeft","setScrollTop","setScrollLeft","scrollWidth","scrollHeight","ScrollComponent","WindowScrollController","scroll","applyOverflow","clear","setHeight","destroy","lockOverflow","getScrollbarWidths","Theme","calendarOptions","processIconOverride","iconOverrideOption","setIconOverride","iconOverrideHash","iconClassesCopy","buttonName","iconClasses","applyIconOverridePrefix","iconOverridePrefix","getIconClass","baseIconClass","getCustomButtonIconClass","customButtonProps","iconOverrideCustomButtonOption","guid","ComponentContext","dir","eventOrderSpecs","token","specs","tokens","substring","parseFieldSpecs","eventOrder","extend","Component","addEqualityFuncs","newFuncs","equalityFuncs","receiveProps","oldContext","firstContext","oldProps","comboProps","anyChanges","recycleProps","beforeUpdate","render","afterUpdate","DateComponent","buildPositionCaches","queryHit","positionLeft","positionTop","elWidth","elHeight","isInteractionValid","validRange","isDateSelectionValid","isValidSegDownEl","isPopover","isInPopover","isValidDateDownEl","segEl","fgSegSelector","classList","bgSegSelector","uid$1","createPlugin","deps","reducers","eventDragMutationMassagers","dateSelectionTransformers","datePointTransforms","dateSpanTransforms","views","viewPropsTransformers","externalDefTransforms","eventResizeJoinTransforms","viewContainerModifiers","eventDropTransformers","componentInteractions","calendarInteractions","themeClasses","eventSourceDefs","namedTimeZonedImpl","defaultView","elementDraggingImpl","optionChangeHandlers","PluginSystem","addedHash","plugin","dep","hooks0","hooks1","ArrayEventSourcePlugin","ignoreRange","parseMeta","events","fetch","arg","success","FuncEventSourcePlugin","failure","isResolved","wrappedSuccess","wrappedFailure","then","unpromisify","bind","startStr","endStr","requestJson","method","params","successCallback","failureCallback","encodeParams","injectQueryStringParams","xhr","XMLHttpRequest","open","setRequestHeader","onload","status","responseText","err","onerror","send","encodeURIComponent","JsonFeedEventSourcePlugin","extraParams","startParam","endParam","timeZoneParam","requestParams","customRequestParams","buildRequestParams","errorMessage","message","SimpleRecurrencePlugin","startRecur","endRecur","anyValid","clippedFramingRange","dowHash","dayMarker","instanceStarts","instanceStart","expandRanges","DefaultOptionChangeHandlers","deepEqual","handleEventSources","plugins","inputs","addPluginInputs","unfoundSources","newInputs","inputs_1","inputFound","_raw","splice","unfoundSources_1","unfoundSource","newInputs_1","newInput","addEventSource","globalDefaults","defaultRangeSeparator","titleRangeSeparator","forceEventDuration","columnHeader","aspectRatio","header","center","weekends","weekNumbers","weekNumberCalculation","scrollTime","minTime","maxTime","showNonCurrentDates","lazyFetching","locales","timeGridEventMinHeight","themeSystem","dragRevertDuration","dragScroll","allDayMaintainDuration","unselectAuto","dropAccept","eventLimit","eventLimitClick","dayPopoverFormat","handleWindowResize","windowResizeDelay","longPressDelay","eventDragMinDistance","rtlDefaults","buttonIcons","prev","next","prevYear","nextYear","complexOptions","INTERNAL_PLUGINS","RAW_EN_LOCALE","code","buttonText","today","list","allDayText","eventLimitText","noEventsMessage","parseRawLocales","explicitRawLocales","defaultCode","globalArray","globalObject","allRawLocales","rawLocaleMap","en","allRawLocales_1","rawLocale","buildLocale","inputSingular","available","codeArg","simpleId","queryRawLocale","parseLocale","queryLocale","merged","NumberFormat","OptionsManager","overrides","dynamicOverrides","compute","updates","isDynamic","overrideHash","removals_1","localeDefaults","dirDefaults","calendarSystemClassMap","theClass","GregorianCalendarSystem","arrayToMarker","arr","ISO_RE","DateEnv","settings","isNamedTimeZone","namedTimeZoneImpl","createCalendarSystem","weekDow","weekDoy","firstDay","weekNumberFunc","createNowMarker","timestampToMarker","getYear","addYears","addMonths","greatestWholeUnit","diffWholeWeeks","diffHours","diffMinutes","diffSeconds","countDurationsBetween","asRoughMonths","startOf","startOfYear","startOfMonth","startOfWeek","startOfHour","startOfMinute","startOfSecond","y","w","nextW","weekOfYear","dateOptions","offsetForMarker","isEndExclusive","extraOptions","omitTimeZoneOffset","stripZeroTime","toISOString","buildIsoString","timestampToArray","getTimezoneOffset","offsetForArray","SIMPLE_SOURCE_PROPS","uid$2","doesSourceNeedRange","sourceDefId","parseEventSource","parseEventSourceProps","isFetching","reduceEventSources","eventSourceHash","sources","sources_1","fetchDirtySources","addSources","fetchSourcesByIds","excludeStaticSources","sourceHash","receiveResponse","uid$3","isSourceDirty","prevSources","sourceIdHash","nextSources","fetchSource","sourceDef","calSuccessRes","sourceSuccessRes","calSuccess","error","callFailure","console","warn","DateProfileGenerator","viewSpec","initHiddenDays","buildPrev","currentDateProfile","currentDate","prevDate","currentRangeUnit","dateIncrement","buildNext","nextDate","forceToValid","currentInfo","isRangeAllDay","renderRange","isValid","buildValidRange","trimHiddenDays","buildCurrentRangeInfo","buildRenderRange","adjustActiveRange","buildDateIncrement","getRangeOption","dayCount","durationUnit","buildRangeFromDuration","buildRangeFromDayCount","buildCustomVisibleRange","getFallbackDuration","class","usesMinMaxTime","dateIncrementInput","dateIncrementDuration","alignment","dateAlignment","computeRes","isHiddenDay","skipHiddenDays","customAlignment","runningCount","visibleRange","fallback","otherArgs","hiddenDays","isHiddenDayHash","Error","inc","isExclusive","viewType","currentViewType","reduceViewType","newDateProfile","dateProfileGenerators","dateMarker","generator","p0","p1","reduceDateProfile","nextState","reduceCurrentDate","reduceDateSelection","reduceSelectedEvent","reduceEventDrag","reduceEventResize","eventSourceLoadingLevel","computeLoadingLevel","reducerFunc","newDate","currentSelection","currentInstanceId","eventInstanceId","currentDrag","newDrag","currentResize","newResize","cnt","STANDARD_PROPS","parseDateSpan","defaultDuration","span","parseOpenDateSpan","fabricateEventRange","ensureViewDef","defaultConfigs","overrideConfigs","viewDef","defaultConfig","overrideConfig","queryProp","superType","findViewNameBySubclass","superDef","buildViewDef","viewSubclass","configs","superProto","parseViewConfigs","parseViewConfig","VIEW_DEF_PROPS","buildViewSpecs","defaultInputs","optionsManager","compileViewDefs","durationInput","singleUnit","singleUnitOverrides","denom","queryButtonText","buttonTextMap","buttonTextKey","buttonTextOverride","buttonTextDefault","buildViewSpec","Toolbar","extraClassName","_renderLayout","renderLayout","unrenderLayout","_updateTitle","updateTitle","_updateActiveButton","updateActiveButton","_updateToday","updateToday","_updatePrev","updatePrev","_updateNext","updateNext","layout","activeButton","isTodayEnabled","isPrevEnabled","isNextEnabled","viewsWithButtons","renderSection","buttonStr","viewSpecs","sectionEl","calendarCustomButtons","customButtons","calendarButtonTextOverrides","calendarButtonText","buttonGroupStr","groupEl","groupChildren","isOnlyButtons","buttonClick","buttonIcon","buttonInnerHtml","buttonClasses","buttonEl","buttonAriaAttr","click","text","changeView","buttonGroupClassName","toggleButtonEnabled","titleEl","innerText","bool","disabled","CalendarComponent","elClassNames","renderSkeleton","_renderSkeleton","_unrenderSkeleton","renderToolbars","_renderToolbars","_unrenderToolbars","buildComponentContext","buildViewPropTransformers","computeTitle","freezeHeight","renderView","updateSize","thawHeight","footer","updateElClassNames","contentEl","modifyViewContainer","savedScroll","queryScroll","removeElClassNames","headerLayout","footerLayout","dateProfileGenerator","now","todayInfo","prevInfo","nextInfo","toolbarProps","addScroll","viewProps","transform","isResize","isHeightAuto","computeHeightVars","viewHeight","updateNowIndicator","popScroll","heightInput","contentHeightInput","queryToolbarsHeight","parentEl","viewOptions","titleFormat","computeTitleFormat","theClasses","Interaction","component","interactionSettingsStore","EventClicking","handleSegClick","hasUrlContainer","querySelector","href","jsEvent","defaultPrevented","location","EventHovering","handleEventElRemove","currentSegEl","handleSegLeave","handleSegEnter","triggerEvent","removeHoverListeners","onMouseEnter","onMouseLeave","currentMatchedChild","realOnMouseLeave_1","listenToHoverBySelector","publicEvName","StandardTheme","widget","widgetHeader","widgetContent","buttonGroup","button","buttonActive","popoverHeader","popoverContent","headerRow","dayRow","listView","close","Calendar","buildComponentContext$1","buildDateEnv","buildTheme","buildEventUiSingleBase","_buildEventUiSingleBase","buildSelectionConfig","_buildSelectionConfig","buildEventUiBySource","equalityFunc","cachedRes","newRes","memoizeOutput","buildEventUiBases","interactionsStore","actionQueue","isReducing","needsRerender","isRendering","renderingPauseDepth","buildDelayedRerender","isViewUpdated","isDatesUpdated","isEventsUpdated","handleOptions","hydrate","calendarInteractionClass","pluginInputs","pluginDefs","pluginInputs_1","pluginInput","globalName","default","refinePluginDefs","pluginDefs_1","pluginDef","requestRerender","renderableEventStore","bindHandlers","executeRender","unbindHandlers","removeNavLinkListener","anchorEl","getAttribute","customAction","viewOpt","zoomTo","windowResizeProxy","windowResize","buildInitialState","rawSources","singleRawSource","rawSources_1","batchRendering","getInitialDate","oldState","shift","newState","delayedRerender","tryRerender","renderComponent","eventUiSingleBase","eventUiBySource","releaseAfterSizingTriggers","setOption","mutateOptions","getOption","viewOpts","changeHandlers","normalUpdates","specialUpdates","isTimeZoneDirty","isSizeDirty","anyDifficultOptions","name_3","pluginHooks","rerenderDelay","availableRawLocales","dateProfileGeneratorClass","getAvailableLocaleCodes","rawOpts","eventEditable","optHandler","name_4","isValidViewType","dateOrRange","unselect","spec","getUnitViewSpec","viewTypes","defaultDateInput","gotoDate","zonedDateInput","incrementDate","formatDate","isHandlingWindowResize","registerInteractiveComponent","settingsInput","useEventCenter","parseInteractionSettings","interactions","interactionClass","unregisterInteractiveComponent","select","dateOrObj","endDate","triggerDateSelect","pev","triggerDateUnselect","origEvent","triggerDateClick","dayEl","buildDatePointApi","dateStr","sourceInput","sourceApi","getEventSourceById","getEventById","getEvents","eventApis","removeAllEvents","rerenderEvents","getEventSources","sourceApis","internalId","removeAllEventSources","refetchEvents","scrollToTime","timeInput","scrollToDuration","View","renderDatesMem","renderDatesWrap","unrenderDatesWrap","renderBusinessHoursMem","renderBusinessHours","unrenderBusinessHours","renderDateSelectionMem","renderDateSelectionWrap","unrenderDateSelectionWrap","renderEventsMem","renderEvents","unrenderEvents","renderEventSelectionMem","renderEventSelectionWrap","unrenderEventSelectionWrap","renderEventDragMem","renderEventDragWrap","unrenderEventDragWrap","renderEventResizeMem","renderEventResizeWrap","unrenderEventResizeWrap","initialize","isAuto","updateBaseSize","renderDates","stopNowIndicator","unrenderDates","renderDateSelection","unrenderDateSelection","sliceEvents","renderEventSelection","unrenderEventSelection","renderEventDrag","unrenderEventDrag","renderEventResize","unrenderEventResize","startNowIndicator","update","delay","nowIndicator","initialNowDate","getNowIndicatorUnit","initialNowQueriedMs","nowIndicatorTimeoutID","nowIndicatorIntervalID","setInterval","unrenderNowIndicator","renderNowIndicator","isNowIndicatorRendered","clearTimeout","clearInterval","isForced","queuedScroll","applyQueuedScroll","applyScroll","queryDateScroll","computeDateScroll","applyDateScroll","FgEventRenderer","renderSegs","mirrorInfo","rangeUpdated","renderSegEls","attachSegs","_segs","detachSegs","displayEventTime","displayEventEnd","eventTimeFormat","computeEventTimeFormat","computeDisplayEventTime","computeDisplayEventEnd","renderSegHtml","getSegClasses","isDraggable","isResizable","isDragging","isResizing","getTimeText","displayEnd","_getTimeText","getSkinCss","sortEventSegs","objs","buildSegCompareObj","fieldSpecs","cmp","compareByFieldSpecs","c","_seg","computeSizes","force","computeSegSizes","assignSizes","assignSegSizes","hideByHash","visibility","showByHash","selectByInstanceId","unselectByInstanceId","FillRenderer","fillSegTag","dirtySizeFlags","containerElsByType","segsByType","getSegsByType","renderedSegs","containerEls","css","toLowerCase","ElementDragging","emitter","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","renderDateCell","datesRepDistinctDays","colCnt","colHeadFormat","colspan","otherAttrs","isDateValid","columnHeaderHtml","columnHeaderText","DayHeader","dates","renderIntroHtml","columnHeaderFormat","computeFallbackHeaderFormat","dates_1","thead","DaySeries","indices","dayIndex","sliceRange","firstIndex","getDateDayIndex","lastIndex","clippedFirstIndex","clippedLastIndex","ceil","dayOffset","DayTable","daySeries","breakOnWeeks","daysPerRow","rowCnt","cells","buildCells","headerDates","buildHeaderDates","rows","row","col","buildCell","seriesSeg","index","nextIndex","firstCol","lastCol","Slicer","sliceBusinessHours","_sliceBusinessHours","sliceDateSelection","_sliceDateSpan","_sliceEventStore","sliceEventDrag","_sliceInteraction","sliceEventResize","sliceProps","extraArgs","eventSegs","dateSelectionSegs","businessHourSegs","fgEventSegs","bgEventSegs","sliceNowDate","computeActiveRange","rangeRes","sliceEventRanges","affectedInstances","sourceSeg","eventRanges","eventRanges_1","sliceEventRange","isComponentAllDay","FullCalendar","elRef","createRef","ref","componentDidMount","current","componentDidUpdate","componentWillUnmount","getApi","keyList","hasProp","module","exports","equal","arrA","arrB","dateA","dateB","getTime","regexpA","RegExp","regexpB","toString","DayGridDateProfileGenerator","endOfWeek","fixedWeekCount","Popover","isHidden","margin","documentMousedown","hide","show","autoHide","elDims","origin","offsetParent","clippingRect","SimpleDayGridEventRenderer","timeText","titleHtml","isResizableFromStart","isResizableFromEnd","skinCss","timeHtml","DayGridEventRenderer","dayGrid","rowStructs","renderSegRows","rowEls","rowNode","tbodyEl","removeSegPopover","rowStruct","pop","segRows","groupSegRows","renderSegRow","rowSegs","levelSegs","tr","td","segLevels","buildSegLevels","levelCnt","tbody","segMatrix","cellMatrix","loneCellMatrix","emptyCellsUntil","endCol","leftCol","rightCol","introHtml","renderProps","levels","isDaySegCollision","level","compareDaySegCols","otherSegs","otherSeg","DayGridMirrorRenderer","skeletonTopEl","skeletonTop","skeletonEl","DayGridFillRenderer","renderFillRow","trEl","startCol","getElementsByTagName","DayTile","eventRenderer","DayTileEventRenderer","renderFrame","_renderFrame","renderFgEvents","fgSegs","eventDragInstances","eventResizeInstances","segContainerEl","layer","dayTile","DayBgRow","renderHtml","cell","renderCellHtml","htmlAttrs","DAY_NUM_FORMAT","WEEK_NUM_FORMAT","DayGrid","bottomCoordPadding","isCellSizesDirty","fillRenderer","mirrorRenderer","renderCells","_renderCells","_unrenderCells","renderBgEvents","_renderEventDrag","_unrenderEventDrag","_renderEventResize","_unrenderEventResize","isRigid","segPopoverTile","updateSegPopoverTile","getCellRange","ownProps","renderDayRowHtml","cellEls","rowPositions","colPositions","getCellEl","bgRow","renderBgIntroHtml","getIsNumbersVisible","renderNumberTrHtml","getIsDayNumbersVisible","cellWeekNumbersVisible","colWeekNumbersVisible","intro","renderNumberIntroHtml","renderNumberCellsHtml","htmls","renderNumberCellHtml","weekCalcFirstDow","isDayNumberVisible","buildColPositions","buildRowPositions","positionToHit","relativeRect","segPopover","limitRows","levelLimit","rowLevelLimit","unlimitRow","computeRowLevelLimit","limitRow","rowBottom","trEls","limitedNodes","segsBelow","totalSegsBelow","colSegsBelow","segMoreNodes","moreTd","moreWrap","moreLink","moreNodes","getCellSegs","renderMoreLink","node","moreEls","limitedEls","limitedEl","hiddenSegs","getMoreLinkText","clickOption","_col","moreEl","currentTarget","allSegs","reslicedAllSegs","resliceDaySegs","reslicedHiddenSegs","showSegPopover","topEl","dayDate","dayRange","newSegs","startLevel","WEEK_NUM_FORMAT$1","AbstractDayGridView","processOptions","_processOptions","renderHeadIntroHtml","weekNumberStyleAttr","renderDayGridNumberIntroHtml","weekStart","renderDayGridBgIntroHtml","renderDayGridIntroHtml","weekNumbersWithinDays","renderSkeletonHtml","scroller","dayGridContainerEl","dayGridEl","weekNumberWidth","hasRigidRows","scrollerHeight","headRowEl","computeScrollerHeight","setGridHeight","SimpleDayGrid","slicer","DayGridSlicer","dayTable","rawHit","DayGridView","buildDayTable","simpleDayGrid","main","dayGridDay","dayGridWeek","dayGridMonth","makeEmptyFunction","emptyFunction","thatReturns","thatReturnsFalse","thatReturnsTrue","thatReturnsNull","thatReturnsThis","thatReturnsArgument","condition","e","f","argIndex","framesToPop","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","test1","test2","fromCharCode","test3","letter","shouldUseNative","shim","componentName","propFullName","secret","ReactPropTypesSecret","invariant","getShim","isRequired","ReactPropTypes","number","object","string","symbol","any","arrayOf","element","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","require$$1","HIDE","REBUILD","SHOW","dispatchGlobalEvent","eventName","opts","detail","checkStatus","isCapture","currentItem","hideTooltip","setUntargetItems","getTargetArray","targetArray","customListeners","set","bodyListener","respectEffect","customEvent","tip","forId","isCustomEvent","isTargetBelongsToTooltip","getEffect","proxy","makeProxy","callback","findCustomEvents","dataAttribute","getBody","getDimensions","tipWidth","tipHeight","targetWidth","targetHeight","getCurrentOffset","mouseX","mouseY","defaultOffset","getDefaultPosition","calculateOffset","extraOffset_X","extraOffset_Y","windowWidth","windowHeight","getParent","parentTop","parentLeft","getTipOffsetLeft","place","offset_X","getTipOffsetTop","offset_Y","outsideRight","getTipOffsetRight","outsideBottom","getTipOffsetBottom","outside","outsideLeft","outsideTop","inside","placesList","insideList","isNewState","shouldUpdatePlace","desiredPlace","newPlace","effect","boundingClientRect","targetTop","targetLeft","clientY","l","r","disToMouse","offset","currentParent","getContent","regexp","multiline","parseAria","ariaObj","prop","nodeList","fill","ReactTooltip","CONSTANT","hasTarget","staticMethods","windowListener","ele","eventOff","dataEvent","dataEventOff","customListener","dataEffect","possibleCustomEvents","possibleCustomEventsOff","customEvents","customEventsOff","listeners","bodyModeListeners","targetEventOff","bodyMode","trackRemoval","extraClass","delayHide","delayShow","currentEvent","ariaProps","isEmptyTip","disable","originTooltip","isMultiline","nextProps","prevState","newAriaProps","methodArray","resizeHide","tooltipRef","escaped","nodeListToArray","globalEventOff","isCaptureMode","getTipContent","placeholder","isGlobalCall","switchToSolid","scrollHide","getPosition","overridePosition","reshowDelay","updateState","delayUpdate","afterShow","delayTime","eventTarget","isInvisible","isScroll","afterHide","isMyElement","resetState","isVisible","setState","tooltipClass","clickable","Wrapper","wrapperClassName","data-id","dangerouslySetInnerHTML","__html","React","insecure","watchWindow","wrapper","MutationObserver","observer","mutations","m2","childList","subtree"],"mappings":"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","file":"static/js/5.0a30662d.chunk.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","/*!\nFullCalendar Core Package v4.4.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\n// Creating\n// ----------------------------------------------------------------------------------------------------------------\nvar elementPropHash = {\n    className: true,\n    colSpan: true,\n    rowSpan: true\n};\nvar containerTagHash = {\n    '<tr': 'tbody',\n    '<td': 'tr'\n};\nfunction createElement(tagName, attrs, content) {\n    var el = document.createElement(tagName);\n    if (attrs) {\n        for (var attrName in attrs) {\n            if (attrName === 'style') {\n                applyStyle(el, attrs[attrName]);\n            }\n            else if (elementPropHash[attrName]) {\n                el[attrName] = attrs[attrName];\n            }\n            else {\n                el.setAttribute(attrName, attrs[attrName]);\n            }\n        }\n    }\n    if (typeof content === 'string') {\n        el.innerHTML = content; // shortcut. no need to process HTML in any way\n    }\n    else if (content != null) {\n        appendToElement(el, content);\n    }\n    return el;\n}\nfunction htmlToElement(html) {\n    html = html.trim();\n    var container = document.createElement(computeContainerTag(html));\n    container.innerHTML = html;\n    return container.firstChild;\n}\nfunction htmlToElements(html) {\n    return Array.prototype.slice.call(htmlToNodeList(html));\n}\nfunction htmlToNodeList(html) {\n    html = html.trim();\n    var container = document.createElement(computeContainerTag(html));\n    container.innerHTML = html;\n    return container.childNodes;\n}\n// assumes html already trimmed and tag names are lowercase\nfunction computeContainerTag(html) {\n    return containerTagHash[html.substr(0, 3) // faster than using regex\n    ] || 'div';\n}\nfunction appendToElement(el, content) {\n    var childNodes = normalizeContent(content);\n    for (var i = 0; i < childNodes.length; i++) {\n        el.appendChild(childNodes[i]);\n    }\n}\nfunction prependToElement(parent, content) {\n    var newEls = normalizeContent(content);\n    var afterEl = parent.firstChild || null; // if no firstChild, will append to end, but that's okay, b/c there were no children\n    for (var i = 0; i < newEls.length; i++) {\n        parent.insertBefore(newEls[i], afterEl);\n    }\n}\nfunction insertAfterElement(refEl, content) {\n    var newEls = normalizeContent(content);\n    var afterEl = refEl.nextSibling || null;\n    for (var i = 0; i < newEls.length; i++) {\n        refEl.parentNode.insertBefore(newEls[i], afterEl);\n    }\n}\nfunction normalizeContent(content) {\n    var els;\n    if (typeof content === 'string') {\n        els = htmlToElements(content);\n    }\n    else if (content instanceof Node) {\n        els = [content];\n    }\n    else { // Node[] or NodeList\n        els = Array.prototype.slice.call(content);\n    }\n    return els;\n}\nfunction removeElement(el) {\n    if (el.parentNode) {\n        el.parentNode.removeChild(el);\n    }\n}\n// Querying\n// ----------------------------------------------------------------------------------------------------------------\n// from https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\nvar matchesMethod = Element.prototype.matches ||\n    Element.prototype.matchesSelector ||\n    Element.prototype.msMatchesSelector;\nvar closestMethod = Element.prototype.closest || function (selector) {\n    // polyfill\n    var el = this;\n    if (!document.documentElement.contains(el)) {\n        return null;\n    }\n    do {\n        if (elementMatches(el, selector)) {\n            return el;\n        }\n        el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n    return null;\n};\nfunction elementClosest(el, selector) {\n    return closestMethod.call(el, selector);\n}\nfunction elementMatches(el, selector) {\n    return matchesMethod.call(el, selector);\n}\n// accepts multiple subject els\n// returns a real array. good for methods like forEach\nfunction findElements(container, selector) {\n    var containers = container instanceof HTMLElement ? [container] : container;\n    var allMatches = [];\n    for (var i = 0; i < containers.length; i++) {\n        var matches = containers[i].querySelectorAll(selector);\n        for (var j = 0; j < matches.length; j++) {\n            allMatches.push(matches[j]);\n        }\n    }\n    return allMatches;\n}\n// accepts multiple subject els\n// only queries direct child elements\nfunction findChildren(parent, selector) {\n    var parents = parent instanceof HTMLElement ? [parent] : parent;\n    var allMatches = [];\n    for (var i = 0; i < parents.length; i++) {\n        var childNodes = parents[i].children; // only ever elements\n        for (var j = 0; j < childNodes.length; j++) {\n            var childNode = childNodes[j];\n            if (!selector || elementMatches(childNode, selector)) {\n                allMatches.push(childNode);\n            }\n        }\n    }\n    return allMatches;\n}\n// Attributes\n// ----------------------------------------------------------------------------------------------------------------\nfunction forceClassName(el, className, bool) {\n    if (bool) {\n        el.classList.add(className);\n    }\n    else {\n        el.classList.remove(className);\n    }\n}\n// Style\n// ----------------------------------------------------------------------------------------------------------------\nvar PIXEL_PROP_RE = /(top|left|right|bottom|width|height)$/i;\nfunction applyStyle(el, props) {\n    for (var propName in props) {\n        applyStyleProp(el, propName, props[propName]);\n    }\n}\nfunction applyStyleProp(el, name, val) {\n    if (val == null) {\n        el.style[name] = '';\n    }\n    else if (typeof val === 'number' && PIXEL_PROP_RE.test(name)) {\n        el.style[name] = val + 'px';\n    }\n    else {\n        el.style[name] = val;\n    }\n}\n\nfunction pointInsideRect(point, rect) {\n    return point.left >= rect.left &&\n        point.left < rect.right &&\n        point.top >= rect.top &&\n        point.top < rect.bottom;\n}\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\nfunction intersectRects(rect1, rect2) {\n    var res = {\n        left: Math.max(rect1.left, rect2.left),\n        right: Math.min(rect1.right, rect2.right),\n        top: Math.max(rect1.top, rect2.top),\n        bottom: Math.min(rect1.bottom, rect2.bottom)\n    };\n    if (res.left < res.right && res.top < res.bottom) {\n        return res;\n    }\n    return false;\n}\nfunction translateRect(rect, deltaX, deltaY) {\n    return {\n        left: rect.left + deltaX,\n        right: rect.right + deltaX,\n        top: rect.top + deltaY,\n        bottom: rect.bottom + deltaY\n    };\n}\n// Returns a new point that will have been moved to reside within the given rectangle\nfunction constrainPoint(point, rect) {\n    return {\n        left: Math.min(Math.max(point.left, rect.left), rect.right),\n        top: Math.min(Math.max(point.top, rect.top), rect.bottom)\n    };\n}\n// Returns a point that is the center of the given rectangle\nfunction getRectCenter(rect) {\n    return {\n        left: (rect.left + rect.right) / 2,\n        top: (rect.top + rect.bottom) / 2\n    };\n}\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\nfunction diffPoints(point1, point2) {\n    return {\n        left: point1.left - point2.left,\n        top: point1.top - point2.top\n    };\n}\n\n// Logic for determining if, when the element is right-to-left, the scrollbar appears on the left side\nvar isRtlScrollbarOnLeft = null;\nfunction getIsRtlScrollbarOnLeft() {\n    if (isRtlScrollbarOnLeft === null) {\n        isRtlScrollbarOnLeft = computeIsRtlScrollbarOnLeft();\n    }\n    return isRtlScrollbarOnLeft;\n}\nfunction computeIsRtlScrollbarOnLeft() {\n    var outerEl = createElement('div', {\n        style: {\n            position: 'absolute',\n            top: -1000,\n            left: 0,\n            border: 0,\n            padding: 0,\n            overflow: 'scroll',\n            direction: 'rtl'\n        }\n    }, '<div></div>');\n    document.body.appendChild(outerEl);\n    var innerEl = outerEl.firstChild;\n    var res = innerEl.getBoundingClientRect().left > outerEl.getBoundingClientRect().left;\n    removeElement(outerEl);\n    return res;\n}\n// The scrollbar width computations in computeEdges are sometimes flawed when it comes to\n// retina displays, rounding, and IE11. Massage them into a usable value.\nfunction sanitizeScrollbarWidth(width) {\n    width = Math.max(0, width); // no negatives\n    width = Math.round(width);\n    return width;\n}\n\nfunction computeEdges(el, getPadding) {\n    if (getPadding === void 0) { getPadding = false; }\n    var computedStyle = window.getComputedStyle(el);\n    var borderLeft = parseInt(computedStyle.borderLeftWidth, 10) || 0;\n    var borderRight = parseInt(computedStyle.borderRightWidth, 10) || 0;\n    var borderTop = parseInt(computedStyle.borderTopWidth, 10) || 0;\n    var borderBottom = parseInt(computedStyle.borderBottomWidth, 10) || 0;\n    // must use offset(Width|Height) because compatible with client(Width|Height)\n    var scrollbarLeftRight = sanitizeScrollbarWidth(el.offsetWidth - el.clientWidth - borderLeft - borderRight);\n    var scrollbarBottom = sanitizeScrollbarWidth(el.offsetHeight - el.clientHeight - borderTop - borderBottom);\n    var res = {\n        borderLeft: borderLeft,\n        borderRight: borderRight,\n        borderTop: borderTop,\n        borderBottom: borderBottom,\n        scrollbarBottom: scrollbarBottom,\n        scrollbarLeft: 0,\n        scrollbarRight: 0\n    };\n    if (getIsRtlScrollbarOnLeft() && computedStyle.direction === 'rtl') { // is the scrollbar on the left side?\n        res.scrollbarLeft = scrollbarLeftRight;\n    }\n    else {\n        res.scrollbarRight = scrollbarLeftRight;\n    }\n    if (getPadding) {\n        res.paddingLeft = parseInt(computedStyle.paddingLeft, 10) || 0;\n        res.paddingRight = parseInt(computedStyle.paddingRight, 10) || 0;\n        res.paddingTop = parseInt(computedStyle.paddingTop, 10) || 0;\n        res.paddingBottom = parseInt(computedStyle.paddingBottom, 10) || 0;\n    }\n    return res;\n}\nfunction computeInnerRect(el, goWithinPadding) {\n    if (goWithinPadding === void 0) { goWithinPadding = false; }\n    var outerRect = computeRect(el);\n    var edges = computeEdges(el, goWithinPadding);\n    var res = {\n        left: outerRect.left + edges.borderLeft + edges.scrollbarLeft,\n        right: outerRect.right - edges.borderRight - edges.scrollbarRight,\n        top: outerRect.top + edges.borderTop,\n        bottom: outerRect.bottom - edges.borderBottom - edges.scrollbarBottom\n    };\n    if (goWithinPadding) {\n        res.left += edges.paddingLeft;\n        res.right -= edges.paddingRight;\n        res.top += edges.paddingTop;\n        res.bottom -= edges.paddingBottom;\n    }\n    return res;\n}\nfunction computeRect(el) {\n    var rect = el.getBoundingClientRect();\n    return {\n        left: rect.left + window.pageXOffset,\n        top: rect.top + window.pageYOffset,\n        right: rect.right + window.pageXOffset,\n        bottom: rect.bottom + window.pageYOffset\n    };\n}\nfunction computeViewportRect() {\n    return {\n        left: window.pageXOffset,\n        right: window.pageXOffset + document.documentElement.clientWidth,\n        top: window.pageYOffset,\n        bottom: window.pageYOffset + document.documentElement.clientHeight\n    };\n}\nfunction computeHeightAndMargins(el) {\n    return el.getBoundingClientRect().height + computeVMargins(el);\n}\nfunction computeVMargins(el) {\n    var computed = window.getComputedStyle(el);\n    return parseInt(computed.marginTop, 10) +\n        parseInt(computed.marginBottom, 10);\n}\n// does not return window\nfunction getClippingParents(el) {\n    var parents = [];\n    while (el instanceof HTMLElement) { // will stop when gets to document or null\n        var computedStyle = window.getComputedStyle(el);\n        if (computedStyle.position === 'fixed') {\n            break;\n        }\n        if ((/(auto|scroll)/).test(computedStyle.overflow + computedStyle.overflowY + computedStyle.overflowX)) {\n            parents.push(el);\n        }\n        el = el.parentNode;\n    }\n    return parents;\n}\nfunction computeClippingRect(el) {\n    return getClippingParents(el)\n        .map(function (el) {\n        return computeInnerRect(el);\n    })\n        .concat(computeViewportRect())\n        .reduce(function (rect0, rect1) {\n        return intersectRects(rect0, rect1) || rect1; // should always intersect\n    });\n}\n\n// Stops a mouse/touch event from doing it's native browser action\nfunction preventDefault(ev) {\n    ev.preventDefault();\n}\n// Event Delegation\n// ----------------------------------------------------------------------------------------------------------------\nfunction listenBySelector(container, eventType, selector, handler) {\n    function realHandler(ev) {\n        var matchedChild = elementClosest(ev.target, selector);\n        if (matchedChild) {\n            handler.call(matchedChild, ev, matchedChild);\n        }\n    }\n    container.addEventListener(eventType, realHandler);\n    return function () {\n        container.removeEventListener(eventType, realHandler);\n    };\n}\nfunction listenToHoverBySelector(container, selector, onMouseEnter, onMouseLeave) {\n    var currentMatchedChild;\n    return listenBySelector(container, 'mouseover', selector, function (ev, matchedChild) {\n        if (matchedChild !== currentMatchedChild) {\n            currentMatchedChild = matchedChild;\n            onMouseEnter(ev, matchedChild);\n            var realOnMouseLeave_1 = function (ev) {\n                currentMatchedChild = null;\n                onMouseLeave(ev, matchedChild);\n                matchedChild.removeEventListener('mouseleave', realOnMouseLeave_1);\n            };\n            // listen to the next mouseleave, and then unattach\n            matchedChild.addEventListener('mouseleave', realOnMouseLeave_1);\n        }\n    });\n}\n// Animation\n// ----------------------------------------------------------------------------------------------------------------\nvar transitionEventNames = [\n    'webkitTransitionEnd',\n    'otransitionend',\n    'oTransitionEnd',\n    'msTransitionEnd',\n    'transitionend'\n];\n// triggered only when the next single subsequent transition finishes\nfunction whenTransitionDone(el, callback) {\n    var realCallback = function (ev) {\n        callback(ev);\n        transitionEventNames.forEach(function (eventName) {\n            el.removeEventListener(eventName, realCallback);\n        });\n    };\n    transitionEventNames.forEach(function (eventName) {\n        el.addEventListener(eventName, realCallback); // cross-browser way to determine when the transition finishes\n    });\n}\n\nvar DAY_IDS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n// Adding\nfunction addWeeks(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n * 7;\n    return arrayToUtcDate(a);\n}\nfunction addDays(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n;\n    return arrayToUtcDate(a);\n}\nfunction addMs(m, n) {\n    var a = dateToUtcArray(m);\n    a[6] += n;\n    return arrayToUtcDate(a);\n}\n// Diffing (all return floats)\nfunction diffWeeks(m0, m1) {\n    return diffDays(m0, m1) / 7;\n}\nfunction diffDays(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60 * 24);\n}\nfunction diffHours(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60);\n}\nfunction diffMinutes(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60);\n}\nfunction diffSeconds(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / 1000;\n}\nfunction diffDayAndTime(m0, m1) {\n    var m0day = startOfDay(m0);\n    var m1day = startOfDay(m1);\n    return {\n        years: 0,\n        months: 0,\n        days: Math.round(diffDays(m0day, m1day)),\n        milliseconds: (m1.valueOf() - m1day.valueOf()) - (m0.valueOf() - m0day.valueOf())\n    };\n}\n// Diffing Whole Units\nfunction diffWholeWeeks(m0, m1) {\n    var d = diffWholeDays(m0, m1);\n    if (d !== null && d % 7 === 0) {\n        return d / 7;\n    }\n    return null;\n}\nfunction diffWholeDays(m0, m1) {\n    if (timeAsMs(m0) === timeAsMs(m1)) {\n        return Math.round(diffDays(m0, m1));\n    }\n    return null;\n}\n// Start-Of\nfunction startOfDay(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate()\n    ]);\n}\nfunction startOfHour(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours()\n    ]);\n}\nfunction startOfMinute(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes()\n    ]);\n}\nfunction startOfSecond(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes(),\n        m.getUTCSeconds()\n    ]);\n}\n// Week Computation\nfunction weekOfYear(marker, dow, doy) {\n    var y = marker.getUTCFullYear();\n    var w = weekOfGivenYear(marker, y, dow, doy);\n    if (w < 1) {\n        return weekOfGivenYear(marker, y - 1, dow, doy);\n    }\n    var nextW = weekOfGivenYear(marker, y + 1, dow, doy);\n    if (nextW >= 1) {\n        return Math.min(w, nextW);\n    }\n    return w;\n}\nfunction weekOfGivenYear(marker, year, dow, doy) {\n    var firstWeekStart = arrayToUtcDate([year, 0, 1 + firstWeekOffset(year, dow, doy)]);\n    var dayStart = startOfDay(marker);\n    var days = Math.round(diffDays(firstWeekStart, dayStart));\n    return Math.floor(days / 7) + 1; // zero-indexed\n}\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n    var fwd = 7 + dow - doy;\n    // first-week day local weekday -- which local weekday is fwd\n    var fwdlw = (7 + arrayToUtcDate([year, 0, fwd]).getUTCDay() - dow) % 7;\n    return -fwdlw + fwd - 1;\n}\n// Array Conversion\nfunction dateToLocalArray(date) {\n    return [\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate(),\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds()\n    ];\n}\nfunction arrayToLocalDate(a) {\n    return new Date(a[0], a[1] || 0, a[2] == null ? 1 : a[2], // day of month\n    a[3] || 0, a[4] || 0, a[5] || 0);\n}\nfunction dateToUtcArray(date) {\n    return [\n        date.getUTCFullYear(),\n        date.getUTCMonth(),\n        date.getUTCDate(),\n        date.getUTCHours(),\n        date.getUTCMinutes(),\n        date.getUTCSeconds(),\n        date.getUTCMilliseconds()\n    ];\n}\nfunction arrayToUtcDate(a) {\n    // according to web standards (and Safari), a month index is required.\n    // massage if only given a year.\n    if (a.length === 1) {\n        a = a.concat([0]);\n    }\n    return new Date(Date.UTC.apply(Date, a));\n}\n// Other Utils\nfunction isValidDate(m) {\n    return !isNaN(m.valueOf());\n}\nfunction timeAsMs(m) {\n    return m.getUTCHours() * 1000 * 60 * 60 +\n        m.getUTCMinutes() * 1000 * 60 +\n        m.getUTCSeconds() * 1000 +\n        m.getUTCMilliseconds();\n}\n\nvar INTERNAL_UNITS = ['years', 'months', 'days', 'milliseconds'];\nvar PARSE_RE = /^(-?)(?:(\\d+)\\.)?(\\d+):(\\d\\d)(?::(\\d\\d)(?:\\.(\\d\\d\\d))?)?/;\n// Parsing and Creation\nfunction createDuration(input, unit) {\n    var _a;\n    if (typeof input === 'string') {\n        return parseString(input);\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        return normalizeObject(input);\n    }\n    else if (typeof input === 'number') {\n        return normalizeObject((_a = {}, _a[unit || 'milliseconds'] = input, _a));\n    }\n    else {\n        return null;\n    }\n}\nfunction parseString(s) {\n    var m = PARSE_RE.exec(s);\n    if (m) {\n        var sign = m[1] ? -1 : 1;\n        return {\n            years: 0,\n            months: 0,\n            days: sign * (m[2] ? parseInt(m[2], 10) : 0),\n            milliseconds: sign * ((m[3] ? parseInt(m[3], 10) : 0) * 60 * 60 * 1000 + // hours\n                (m[4] ? parseInt(m[4], 10) : 0) * 60 * 1000 + // minutes\n                (m[5] ? parseInt(m[5], 10) : 0) * 1000 + // seconds\n                (m[6] ? parseInt(m[6], 10) : 0) // ms\n            )\n        };\n    }\n    return null;\n}\nfunction normalizeObject(obj) {\n    return {\n        years: obj.years || obj.year || 0,\n        months: obj.months || obj.month || 0,\n        days: (obj.days || obj.day || 0) +\n            getWeeksFromInput(obj) * 7,\n        milliseconds: (obj.hours || obj.hour || 0) * 60 * 60 * 1000 + // hours\n            (obj.minutes || obj.minute || 0) * 60 * 1000 + // minutes\n            (obj.seconds || obj.second || 0) * 1000 + // seconds\n            (obj.milliseconds || obj.millisecond || obj.ms || 0) // ms\n    };\n}\nfunction getWeeksFromInput(obj) {\n    return obj.weeks || obj.week || 0;\n}\n// Equality\nfunction durationsEqual(d0, d1) {\n    return d0.years === d1.years &&\n        d0.months === d1.months &&\n        d0.days === d1.days &&\n        d0.milliseconds === d1.milliseconds;\n}\nfunction isSingleDay(dur) {\n    return dur.years === 0 && dur.months === 0 && dur.days === 1 && dur.milliseconds === 0;\n}\n// Simple Math\nfunction addDurations(d0, d1) {\n    return {\n        years: d0.years + d1.years,\n        months: d0.months + d1.months,\n        days: d0.days + d1.days,\n        milliseconds: d0.milliseconds + d1.milliseconds\n    };\n}\nfunction subtractDurations(d1, d0) {\n    return {\n        years: d1.years - d0.years,\n        months: d1.months - d0.months,\n        days: d1.days - d0.days,\n        milliseconds: d1.milliseconds - d0.milliseconds\n    };\n}\nfunction multiplyDuration(d, n) {\n    return {\n        years: d.years * n,\n        months: d.months * n,\n        days: d.days * n,\n        milliseconds: d.milliseconds * n\n    };\n}\n// Conversions\n// \"Rough\" because they are based on average-case Gregorian months/years\nfunction asRoughYears(dur) {\n    return asRoughDays(dur) / 365;\n}\nfunction asRoughMonths(dur) {\n    return asRoughDays(dur) / 30;\n}\nfunction asRoughDays(dur) {\n    return asRoughMs(dur) / 864e5;\n}\nfunction asRoughMinutes(dur) {\n    return asRoughMs(dur) / (1000 * 60);\n}\nfunction asRoughSeconds(dur) {\n    return asRoughMs(dur) / 1000;\n}\nfunction asRoughMs(dur) {\n    return dur.years * (365 * 864e5) +\n        dur.months * (30 * 864e5) +\n        dur.days * 864e5 +\n        dur.milliseconds;\n}\n// Advanced Math\nfunction wholeDivideDurations(numerator, denominator) {\n    var res = null;\n    for (var i = 0; i < INTERNAL_UNITS.length; i++) {\n        var unit = INTERNAL_UNITS[i];\n        if (denominator[unit]) {\n            var localRes = numerator[unit] / denominator[unit];\n            if (!isInt(localRes) || (res !== null && res !== localRes)) {\n                return null;\n            }\n            res = localRes;\n        }\n        else if (numerator[unit]) {\n            // needs to divide by something but can't!\n            return null;\n        }\n    }\n    return res;\n}\nfunction greatestDurationDenominator(dur, dontReturnWeeks) {\n    var ms = dur.milliseconds;\n    if (ms) {\n        if (ms % 1000 !== 0) {\n            return { unit: 'millisecond', value: ms };\n        }\n        if (ms % (1000 * 60) !== 0) {\n            return { unit: 'second', value: ms / 1000 };\n        }\n        if (ms % (1000 * 60 * 60) !== 0) {\n            return { unit: 'minute', value: ms / (1000 * 60) };\n        }\n        if (ms) {\n            return { unit: 'hour', value: ms / (1000 * 60 * 60) };\n        }\n    }\n    if (dur.days) {\n        if (!dontReturnWeeks && dur.days % 7 === 0) {\n            return { unit: 'week', value: dur.days / 7 };\n        }\n        return { unit: 'day', value: dur.days };\n    }\n    if (dur.months) {\n        return { unit: 'month', value: dur.months };\n    }\n    if (dur.years) {\n        return { unit: 'year', value: dur.years };\n    }\n    return { unit: 'millisecond', value: 0 };\n}\n\n/* FullCalendar-specific DOM Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n// Given the scrollbar widths of some other container, create borders/margins on rowEls in order to match the left\n// and right space that was offset by the scrollbars. A 1-pixel border first, then margin beyond that.\nfunction compensateScroll(rowEl, scrollbarWidths) {\n    if (scrollbarWidths.left) {\n        applyStyle(rowEl, {\n            borderLeftWidth: 1,\n            marginLeft: scrollbarWidths.left - 1\n        });\n    }\n    if (scrollbarWidths.right) {\n        applyStyle(rowEl, {\n            borderRightWidth: 1,\n            marginRight: scrollbarWidths.right - 1\n        });\n    }\n}\n// Undoes compensateScroll and restores all borders/margins\nfunction uncompensateScroll(rowEl) {\n    applyStyle(rowEl, {\n        marginLeft: '',\n        marginRight: '',\n        borderLeftWidth: '',\n        borderRightWidth: ''\n    });\n}\n// Make the mouse cursor express that an event is not allowed in the current area\nfunction disableCursor() {\n    document.body.classList.add('fc-not-allowed');\n}\n// Returns the mouse cursor to its original look\nfunction enableCursor() {\n    document.body.classList.remove('fc-not-allowed');\n}\n// Given a total available height to fill, have `els` (essentially child rows) expand to accomodate.\n// By default, all elements that are shorter than the recommended height are expanded uniformly, not considering\n// any other els that are already too tall. if `shouldRedistribute` is on, it considers these tall rows and\n// reduces the available height.\nfunction distributeHeight(els, availableHeight, shouldRedistribute) {\n    // *FLOORING NOTE*: we floor in certain places because zoom can give inaccurate floating-point dimensions,\n    // and it is better to be shorter than taller, to avoid creating unnecessary scrollbars.\n    var minOffset1 = Math.floor(availableHeight / els.length); // for non-last element\n    var minOffset2 = Math.floor(availableHeight - minOffset1 * (els.length - 1)); // for last element *FLOORING NOTE*\n    var flexEls = []; // elements that are allowed to expand. array of DOM nodes\n    var flexOffsets = []; // amount of vertical space it takes up\n    var flexHeights = []; // actual css height\n    var usedHeight = 0;\n    undistributeHeight(els); // give all elements their natural height\n    // find elements that are below the recommended height (expandable).\n    // important to query for heights in a single first pass (to avoid reflow oscillation).\n    els.forEach(function (el, i) {\n        var minOffset = i === els.length - 1 ? minOffset2 : minOffset1;\n        var naturalHeight = el.getBoundingClientRect().height;\n        var naturalOffset = naturalHeight + computeVMargins(el);\n        if (naturalOffset < minOffset) {\n            flexEls.push(el);\n            flexOffsets.push(naturalOffset);\n            flexHeights.push(naturalHeight);\n        }\n        else {\n            // this element stretches past recommended height (non-expandable). mark the space as occupied.\n            usedHeight += naturalOffset;\n        }\n    });\n    // readjust the recommended height to only consider the height available to non-maxed-out rows.\n    if (shouldRedistribute) {\n        availableHeight -= usedHeight;\n        minOffset1 = Math.floor(availableHeight / flexEls.length);\n        minOffset2 = Math.floor(availableHeight - minOffset1 * (flexEls.length - 1)); // *FLOORING NOTE*\n    }\n    // assign heights to all expandable elements\n    flexEls.forEach(function (el, i) {\n        var minOffset = i === flexEls.length - 1 ? minOffset2 : minOffset1;\n        var naturalOffset = flexOffsets[i];\n        var naturalHeight = flexHeights[i];\n        var newHeight = minOffset - (naturalOffset - naturalHeight); // subtract the margin/padding\n        if (naturalOffset < minOffset) { // we check this again because redistribution might have changed things\n            el.style.height = newHeight + 'px';\n        }\n    });\n}\n// Undoes distrubuteHeight, restoring all els to their natural height\nfunction undistributeHeight(els) {\n    els.forEach(function (el) {\n        el.style.height = '';\n    });\n}\n// Given `els`, a set of <td> cells, find the cell with the largest natural width and set the widths of all the\n// cells to be that width.\n// PREREQUISITE: if you want a cell to take up width, it needs to have a single inner element w/ display:inline\nfunction matchCellWidths(els) {\n    var maxInnerWidth = 0;\n    els.forEach(function (el) {\n        var innerEl = el.firstChild; // hopefully an element\n        if (innerEl instanceof HTMLElement) {\n            var innerWidth_1 = innerEl.getBoundingClientRect().width;\n            if (innerWidth_1 > maxInnerWidth) {\n                maxInnerWidth = innerWidth_1;\n            }\n        }\n    });\n    maxInnerWidth++; // sometimes not accurate of width the text needs to stay on one line. insurance\n    els.forEach(function (el) {\n        el.style.width = maxInnerWidth + 'px';\n    });\n    return maxInnerWidth;\n}\n// Given one element that resides inside another,\n// Subtracts the height of the inner element from the outer element.\nfunction subtractInnerElHeight(outerEl, innerEl) {\n    // effin' IE8/9/10/11 sometimes returns 0 for dimensions. this weird hack was the only thing that worked\n    var reflowStyleProps = {\n        position: 'relative',\n        left: -1 // ensure reflow in case the el was already relative. negative is less likely to cause new scroll\n    };\n    applyStyle(outerEl, reflowStyleProps);\n    applyStyle(innerEl, reflowStyleProps);\n    var diff = // grab the dimensions\n     outerEl.getBoundingClientRect().height -\n        innerEl.getBoundingClientRect().height;\n    // undo hack\n    var resetStyleProps = { position: '', left: '' };\n    applyStyle(outerEl, resetStyleProps);\n    applyStyle(innerEl, resetStyleProps);\n    return diff;\n}\n/* Selection\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventSelection(el) {\n    el.classList.add('fc-unselectable');\n    el.addEventListener('selectstart', preventDefault);\n}\nfunction allowSelection(el) {\n    el.classList.remove('fc-unselectable');\n    el.removeEventListener('selectstart', preventDefault);\n}\n/* Context Menu\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventContextMenu(el) {\n    el.addEventListener('contextmenu', preventDefault);\n}\nfunction allowContextMenu(el) {\n    el.removeEventListener('contextmenu', preventDefault);\n}\n/* Object Ordering by Field\n----------------------------------------------------------------------------------------------------------------------*/\nfunction parseFieldSpecs(input) {\n    var specs = [];\n    var tokens = [];\n    var i;\n    var token;\n    if (typeof input === 'string') {\n        tokens = input.split(/\\s*,\\s*/);\n    }\n    else if (typeof input === 'function') {\n        tokens = [input];\n    }\n    else if (Array.isArray(input)) {\n        tokens = input;\n    }\n    for (i = 0; i < tokens.length; i++) {\n        token = tokens[i];\n        if (typeof token === 'string') {\n            specs.push(token.charAt(0) === '-' ?\n                { field: token.substring(1), order: -1 } :\n                { field: token, order: 1 });\n        }\n        else if (typeof token === 'function') {\n            specs.push({ func: token });\n        }\n    }\n    return specs;\n}\nfunction compareByFieldSpecs(obj0, obj1, fieldSpecs) {\n    var i;\n    var cmp;\n    for (i = 0; i < fieldSpecs.length; i++) {\n        cmp = compareByFieldSpec(obj0, obj1, fieldSpecs[i]);\n        if (cmp) {\n            return cmp;\n        }\n    }\n    return 0;\n}\nfunction compareByFieldSpec(obj0, obj1, fieldSpec) {\n    if (fieldSpec.func) {\n        return fieldSpec.func(obj0, obj1);\n    }\n    return flexibleCompare(obj0[fieldSpec.field], obj1[fieldSpec.field])\n        * (fieldSpec.order || 1);\n}\nfunction flexibleCompare(a, b) {\n    if (!a && !b) {\n        return 0;\n    }\n    if (b == null) {\n        return -1;\n    }\n    if (a == null) {\n        return 1;\n    }\n    if (typeof a === 'string' || typeof b === 'string') {\n        return String(a).localeCompare(String(b));\n    }\n    return a - b;\n}\n/* String Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction capitaliseFirstLetter(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\nfunction padStart(val, len) {\n    var s = String(val);\n    return '000'.substr(0, len - s.length) + s;\n}\n/* Number Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction compareNumbers(a, b) {\n    return a - b;\n}\nfunction isInt(n) {\n    return n % 1 === 0;\n}\n/* Weird Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction applyAll(functions, thisObj, args) {\n    if (typeof functions === 'function') { // supplied a single function\n        functions = [functions];\n    }\n    if (functions) {\n        var i = void 0;\n        var ret = void 0;\n        for (i = 0; i < functions.length; i++) {\n            ret = functions[i].apply(thisObj, args) || ret;\n        }\n        return ret;\n    }\n}\nfunction firstDefined() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i++) {\n        if (args[i] !== undefined) {\n            return args[i];\n        }\n    }\n}\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L714\nfunction debounce(func, wait) {\n    var timeout;\n    var args;\n    var context;\n    var timestamp;\n    var result;\n    var later = function () {\n        var last = new Date().valueOf() - timestamp;\n        if (last < wait) {\n            timeout = setTimeout(later, wait - last);\n        }\n        else {\n            timeout = null;\n            result = func.apply(context, args);\n            context = args = null;\n        }\n    };\n    return function () {\n        context = this;\n        args = arguments;\n        timestamp = new Date().valueOf();\n        if (!timeout) {\n            timeout = setTimeout(later, wait);\n        }\n        return result;\n    };\n}\n// Number and Boolean are only types that defaults or not computed for\n// TODO: write more comments\nfunction refineProps(rawProps, processors, defaults, leftoverProps) {\n    if (defaults === void 0) { defaults = {}; }\n    var refined = {};\n    for (var key in processors) {\n        var processor = processors[key];\n        if (rawProps[key] !== undefined) {\n            // found\n            if (processor === Function) {\n                refined[key] = typeof rawProps[key] === 'function' ? rawProps[key] : null;\n            }\n            else if (processor) { // a refining function?\n                refined[key] = processor(rawProps[key]);\n            }\n            else {\n                refined[key] = rawProps[key];\n            }\n        }\n        else if (defaults[key] !== undefined) {\n            // there's an explicit default\n            refined[key] = defaults[key];\n        }\n        else {\n            // must compute a default\n            if (processor === String) {\n                refined[key] = ''; // empty string is default for String\n            }\n            else if (!processor || processor === Number || processor === Boolean || processor === Function) {\n                refined[key] = null; // assign null for other non-custom processor funcs\n            }\n            else {\n                refined[key] = processor(null); // run the custom processor func\n            }\n        }\n    }\n    if (leftoverProps) {\n        for (var key in rawProps) {\n            if (processors[key] === undefined) {\n                leftoverProps[key] = rawProps[key];\n            }\n        }\n    }\n    return refined;\n}\n/* Date stuff that doesn't belong in datelib core\n----------------------------------------------------------------------------------------------------------------------*/\n// given a timed range, computes an all-day range that has the same exact duration,\n// but whose start time is aligned with the start of the day.\nfunction computeAlignedDayRange(timedRange) {\n    var dayCnt = Math.floor(diffDays(timedRange.start, timedRange.end)) || 1;\n    var start = startOfDay(timedRange.start);\n    var end = addDays(start, dayCnt);\n    return { start: start, end: end };\n}\n// given a timed range, computes an all-day range based on how for the end date bleeds into the next day\n// TODO: give nextDayThreshold a default arg\nfunction computeVisibleDayRange(timedRange, nextDayThreshold) {\n    if (nextDayThreshold === void 0) { nextDayThreshold = createDuration(0); }\n    var startDay = null;\n    var endDay = null;\n    if (timedRange.end) {\n        endDay = startOfDay(timedRange.end);\n        var endTimeMS = timedRange.end.valueOf() - endDay.valueOf(); // # of milliseconds into `endDay`\n        // If the end time is actually inclusively part of the next day and is equal to or\n        // beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n        // Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n        if (endTimeMS && endTimeMS >= asRoughMs(nextDayThreshold)) {\n            endDay = addDays(endDay, 1);\n        }\n    }\n    if (timedRange.start) {\n        startDay = startOfDay(timedRange.start); // the beginning of the day the range starts\n        // If end is within `startDay` but not past nextDayThreshold, assign the default duration of one day.\n        if (endDay && endDay <= startDay) {\n            endDay = addDays(startDay, 1);\n        }\n    }\n    return { start: startDay, end: endDay };\n}\n// spans from one day into another?\nfunction isMultiDayRange(range) {\n    var visibleRange = computeVisibleDayRange(range);\n    return diffDays(visibleRange.start, visibleRange.end) > 1;\n}\nfunction diffDates(date0, date1, dateEnv, largeUnit) {\n    if (largeUnit === 'year') {\n        return createDuration(dateEnv.diffWholeYears(date0, date1), 'year');\n    }\n    else if (largeUnit === 'month') {\n        return createDuration(dateEnv.diffWholeMonths(date0, date1), 'month');\n    }\n    else {\n        return diffDayAndTime(date0, date1); // returns a duration\n    }\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction parseRecurring(eventInput, allDayDefault, dateEnv, recurringTypes, leftovers) {\n    for (var i = 0; i < recurringTypes.length; i++) {\n        var localLeftovers = {};\n        var parsed = recurringTypes[i].parse(eventInput, localLeftovers, dateEnv);\n        if (parsed) {\n            var allDay = localLeftovers.allDay;\n            delete localLeftovers.allDay; // remove from leftovers\n            if (allDay == null) {\n                allDay = allDayDefault;\n                if (allDay == null) {\n                    allDay = parsed.allDayGuess;\n                    if (allDay == null) {\n                        allDay = false;\n                    }\n                }\n            }\n            __assign(leftovers, localLeftovers);\n            return {\n                allDay: allDay,\n                duration: parsed.duration,\n                typeData: parsed.typeData,\n                typeId: i\n            };\n        }\n    }\n    return null;\n}\n/*\nEvent MUST have a recurringDef\n*/\nfunction expandRecurringRanges(eventDef, duration, framingRange, dateEnv, recurringTypes) {\n    var typeDef = recurringTypes[eventDef.recurringDef.typeId];\n    var markers = typeDef.expand(eventDef.recurringDef.typeData, {\n        start: dateEnv.subtract(framingRange.start, duration),\n        end: framingRange.end\n    }, dateEnv);\n    // the recurrence plugins don't guarantee that all-day events are start-of-day, so we have to\n    if (eventDef.allDay) {\n        markers = markers.map(startOfDay);\n    }\n    return markers;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n// Merges an array of objects into a single object.\n// The second argument allows for an array of property names who's object values will be merged together.\nfunction mergeProps(propObjs, complexProps) {\n    var dest = {};\n    var i;\n    var name;\n    var complexObjs;\n    var j;\n    var val;\n    var props;\n    if (complexProps) {\n        for (i = 0; i < complexProps.length; i++) {\n            name = complexProps[i];\n            complexObjs = [];\n            // collect the trailing object values, stopping when a non-object is discovered\n            for (j = propObjs.length - 1; j >= 0; j--) {\n                val = propObjs[j][name];\n                if (typeof val === 'object' && val) { // non-null object\n                    complexObjs.unshift(val);\n                }\n                else if (val !== undefined) {\n                    dest[name] = val; // if there were no objects, this value will be used\n                    break;\n                }\n            }\n            // if the trailing values were objects, use the merged value\n            if (complexObjs.length) {\n                dest[name] = mergeProps(complexObjs);\n            }\n        }\n    }\n    // copy values into the destination, going from last to first\n    for (i = propObjs.length - 1; i >= 0; i--) {\n        props = propObjs[i];\n        for (name in props) {\n            if (!(name in dest)) { // if already assigned by previous props or complex props, don't reassign\n                dest[name] = props[name];\n            }\n        }\n    }\n    return dest;\n}\nfunction filterHash(hash, func) {\n    var filtered = {};\n    for (var key in hash) {\n        if (func(hash[key], key)) {\n            filtered[key] = hash[key];\n        }\n    }\n    return filtered;\n}\nfunction mapHash(hash, func) {\n    var newHash = {};\n    for (var key in hash) {\n        newHash[key] = func(hash[key], key);\n    }\n    return newHash;\n}\nfunction arrayToHash(a) {\n    var hash = {};\n    for (var _i = 0, a_1 = a; _i < a_1.length; _i++) {\n        var item = a_1[_i];\n        hash[item] = true;\n    }\n    return hash;\n}\nfunction hashValuesToArray(obj) {\n    var a = [];\n    for (var key in obj) {\n        a.push(obj[key]);\n    }\n    return a;\n}\nfunction isPropsEqual(obj0, obj1) {\n    for (var key in obj0) {\n        if (hasOwnProperty.call(obj0, key)) {\n            if (!(key in obj1)) {\n                return false;\n            }\n        }\n    }\n    for (var key in obj1) {\n        if (hasOwnProperty.call(obj1, key)) {\n            if (obj0[key] !== obj1[key]) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nfunction parseEvents(rawEvents, sourceId, calendar, allowOpenRange) {\n    var eventStore = createEmptyEventStore();\n    for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n        var rawEvent = rawEvents_1[_i];\n        var tuple = parseEvent(rawEvent, sourceId, calendar, allowOpenRange);\n        if (tuple) {\n            eventTupleToStore(tuple, eventStore);\n        }\n    }\n    return eventStore;\n}\nfunction eventTupleToStore(tuple, eventStore) {\n    if (eventStore === void 0) { eventStore = createEmptyEventStore(); }\n    eventStore.defs[tuple.def.defId] = tuple.def;\n    if (tuple.instance) {\n        eventStore.instances[tuple.instance.instanceId] = tuple.instance;\n    }\n    return eventStore;\n}\nfunction expandRecurring(eventStore, framingRange, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var defs = eventStore.defs, instances = eventStore.instances;\n    // remove existing recurring instances\n    instances = filterHash(instances, function (instance) {\n        return !defs[instance.defId].recurringDef;\n    });\n    for (var defId in defs) {\n        var def = defs[defId];\n        if (def.recurringDef) {\n            var duration = def.recurringDef.duration;\n            if (!duration) {\n                duration = def.allDay ?\n                    calendar.defaultAllDayEventDuration :\n                    calendar.defaultTimedEventDuration;\n            }\n            var starts = expandRecurringRanges(def, duration, framingRange, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes);\n            for (var _i = 0, starts_1 = starts; _i < starts_1.length; _i++) {\n                var start = starts_1[_i];\n                var instance = createEventInstance(defId, {\n                    start: start,\n                    end: dateEnv.add(start, duration)\n                });\n                instances[instance.instanceId] = instance;\n            }\n        }\n    }\n    return { defs: defs, instances: instances };\n}\n// retrieves events that have the same groupId as the instance specified by `instanceId`\n// or they are the same as the instance.\n// why might instanceId not be in the store? an event from another calendar?\nfunction getRelevantEvents(eventStore, instanceId) {\n    var instance = eventStore.instances[instanceId];\n    if (instance) {\n        var def_1 = eventStore.defs[instance.defId];\n        // get events/instances with same group\n        var newStore = filterEventStoreDefs(eventStore, function (lookDef) {\n            return isEventDefsGrouped(def_1, lookDef);\n        });\n        // add the original\n        // TODO: wish we could use eventTupleToStore or something like it\n        newStore.defs[def_1.defId] = def_1;\n        newStore.instances[instance.instanceId] = instance;\n        return newStore;\n    }\n    return createEmptyEventStore();\n}\nfunction isEventDefsGrouped(def0, def1) {\n    return Boolean(def0.groupId && def0.groupId === def1.groupId);\n}\nfunction transformRawEvents(rawEvents, eventSource, calendar) {\n    var calEachTransform = calendar.opt('eventDataTransform');\n    var sourceEachTransform = eventSource ? eventSource.eventDataTransform : null;\n    if (sourceEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, sourceEachTransform);\n    }\n    if (calEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, calEachTransform);\n    }\n    return rawEvents;\n}\nfunction transformEachRawEvent(rawEvents, func) {\n    var refinedEvents;\n    if (!func) {\n        refinedEvents = rawEvents;\n    }\n    else {\n        refinedEvents = [];\n        for (var _i = 0, rawEvents_2 = rawEvents; _i < rawEvents_2.length; _i++) {\n            var rawEvent = rawEvents_2[_i];\n            var refinedEvent = func(rawEvent);\n            if (refinedEvent) {\n                refinedEvents.push(refinedEvent);\n            }\n            else if (refinedEvent == null) {\n                refinedEvents.push(rawEvent);\n            } // if a different falsy value, do nothing\n        }\n    }\n    return refinedEvents;\n}\nfunction createEmptyEventStore() {\n    return { defs: {}, instances: {} };\n}\nfunction mergeEventStores(store0, store1) {\n    return {\n        defs: __assign({}, store0.defs, store1.defs),\n        instances: __assign({}, store0.instances, store1.instances)\n    };\n}\nfunction filterEventStoreDefs(eventStore, filterFunc) {\n    var defs = filterHash(eventStore.defs, filterFunc);\n    var instances = filterHash(eventStore.instances, function (instance) {\n        return defs[instance.defId]; // still exists?\n    });\n    return { defs: defs, instances: instances };\n}\n\nfunction parseRange(input, dateEnv) {\n    var start = null;\n    var end = null;\n    if (input.start) {\n        start = dateEnv.createMarker(input.start);\n    }\n    if (input.end) {\n        end = dateEnv.createMarker(input.end);\n    }\n    if (!start && !end) {\n        return null;\n    }\n    if (start && end && end < start) {\n        return null;\n    }\n    return { start: start, end: end };\n}\n// SIDE-EFFECT: will mutate ranges.\n// Will return a new array result.\nfunction invertRanges(ranges, constraintRange) {\n    var invertedRanges = [];\n    var start = constraintRange.start; // the end of the previous range. the start of the new range\n    var i;\n    var dateRange;\n    // ranges need to be in order. required for our date-walking algorithm\n    ranges.sort(compareRanges);\n    for (i = 0; i < ranges.length; i++) {\n        dateRange = ranges[i];\n        // add the span of time before the event (if there is any)\n        if (dateRange.start > start) { // compare millisecond time (skip any ambig logic)\n            invertedRanges.push({ start: start, end: dateRange.start });\n        }\n        if (dateRange.end > start) {\n            start = dateRange.end;\n        }\n    }\n    // add the span of time after the last event (if there is any)\n    if (start < constraintRange.end) { // compare millisecond time (skip any ambig logic)\n        invertedRanges.push({ start: start, end: constraintRange.end });\n    }\n    return invertedRanges;\n}\nfunction compareRanges(range0, range1) {\n    return range0.start.valueOf() - range1.start.valueOf(); // earlier ranges go first\n}\nfunction intersectRanges(range0, range1) {\n    var start = range0.start;\n    var end = range0.end;\n    var newRange = null;\n    if (range1.start !== null) {\n        if (start === null) {\n            start = range1.start;\n        }\n        else {\n            start = new Date(Math.max(start.valueOf(), range1.start.valueOf()));\n        }\n    }\n    if (range1.end != null) {\n        if (end === null) {\n            end = range1.end;\n        }\n        else {\n            end = new Date(Math.min(end.valueOf(), range1.end.valueOf()));\n        }\n    }\n    if (start === null || end === null || start < end) {\n        newRange = { start: start, end: end };\n    }\n    return newRange;\n}\nfunction rangesEqual(range0, range1) {\n    return (range0.start === null ? null : range0.start.valueOf()) === (range1.start === null ? null : range1.start.valueOf()) &&\n        (range0.end === null ? null : range0.end.valueOf()) === (range1.end === null ? null : range1.end.valueOf());\n}\nfunction rangesIntersect(range0, range1) {\n    return (range0.end === null || range1.start === null || range0.end > range1.start) &&\n        (range0.start === null || range1.end === null || range0.start < range1.end);\n}\nfunction rangeContainsRange(outerRange, innerRange) {\n    return (outerRange.start === null || (innerRange.start !== null && innerRange.start >= outerRange.start)) &&\n        (outerRange.end === null || (innerRange.end !== null && innerRange.end <= outerRange.end));\n}\nfunction rangeContainsMarker(range, date) {\n    return (range.start === null || date >= range.start) &&\n        (range.end === null || date < range.end);\n}\n// If the given date is not within the given range, move it inside.\n// (If it's past the end, make it one millisecond before the end).\nfunction constrainMarkerToRange(date, range) {\n    if (range.start != null && date < range.start) {\n        return range.start;\n    }\n    if (range.end != null && date >= range.end) {\n        return new Date(range.end.valueOf() - 1);\n    }\n    return date;\n}\n\nfunction removeExact(array, exactVal) {\n    var removeCnt = 0;\n    var i = 0;\n    while (i < array.length) {\n        if (array[i] === exactVal) {\n            array.splice(i, 1);\n            removeCnt++;\n        }\n        else {\n            i++;\n        }\n    }\n    return removeCnt;\n}\nfunction isArraysEqual(a0, a1) {\n    var len = a0.length;\n    var i;\n    if (len !== a1.length) { // not array? or not same length?\n        return false;\n    }\n    for (i = 0; i < len; i++) {\n        if (a0[i] !== a1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoize(workerFunc) {\n    var args;\n    var res;\n    return function () {\n        if (!args || !isArraysEqual(args, arguments)) {\n            args = arguments;\n            res = workerFunc.apply(this, arguments);\n        }\n        return res;\n    };\n}\n/*\nalways executes the workerFunc, but if the result is equal to the previous result,\nreturn the previous result instead.\n*/\nfunction memoizeOutput(workerFunc, equalityFunc) {\n    var cachedRes = null;\n    return function () {\n        var newRes = workerFunc.apply(this, arguments);\n        if (cachedRes === null || !(cachedRes === newRes || equalityFunc(cachedRes, newRes))) {\n            cachedRes = newRes;\n        }\n        return cachedRes;\n    };\n}\n\nvar EXTENDED_SETTINGS_AND_SEVERITIES = {\n    week: 3,\n    separator: 0,\n    omitZeroMinute: 0,\n    meridiem: 0,\n    omitCommas: 0\n};\nvar STANDARD_DATE_PROP_SEVERITIES = {\n    timeZoneName: 7,\n    era: 6,\n    year: 5,\n    month: 4,\n    day: 2,\n    weekday: 2,\n    hour: 1,\n    minute: 1,\n    second: 1\n};\nvar MERIDIEM_RE = /\\s*([ap])\\.?m\\.?/i; // eats up leading spaces too\nvar COMMA_RE = /,/g; // we need re for globalness\nvar MULTI_SPACE_RE = /\\s+/g;\nvar LTR_RE = /\\u200e/g; // control character\nvar UTC_RE = /UTC|GMT/;\nvar NativeFormatter = /** @class */ (function () {\n    function NativeFormatter(formatSettings) {\n        var standardDateProps = {};\n        var extendedSettings = {};\n        var severity = 0;\n        for (var name_1 in formatSettings) {\n            if (name_1 in EXTENDED_SETTINGS_AND_SEVERITIES) {\n                extendedSettings[name_1] = formatSettings[name_1];\n                severity = Math.max(EXTENDED_SETTINGS_AND_SEVERITIES[name_1], severity);\n            }\n            else {\n                standardDateProps[name_1] = formatSettings[name_1];\n                if (name_1 in STANDARD_DATE_PROP_SEVERITIES) {\n                    severity = Math.max(STANDARD_DATE_PROP_SEVERITIES[name_1], severity);\n                }\n            }\n        }\n        this.standardDateProps = standardDateProps;\n        this.extendedSettings = extendedSettings;\n        this.severity = severity;\n        this.buildFormattingFunc = memoize(buildFormattingFunc);\n    }\n    NativeFormatter.prototype.format = function (date, context) {\n        return this.buildFormattingFunc(this.standardDateProps, this.extendedSettings, context)(date);\n    };\n    NativeFormatter.prototype.formatRange = function (start, end, context) {\n        var _a = this, standardDateProps = _a.standardDateProps, extendedSettings = _a.extendedSettings;\n        var diffSeverity = computeMarkerDiffSeverity(start.marker, end.marker, context.calendarSystem);\n        if (!diffSeverity) {\n            return this.format(start, context);\n        }\n        var biggestUnitForPartial = diffSeverity;\n        if (biggestUnitForPartial > 1 && // the two dates are different in a way that's larger scale than time\n            (standardDateProps.year === 'numeric' || standardDateProps.year === '2-digit') &&\n            (standardDateProps.month === 'numeric' || standardDateProps.month === '2-digit') &&\n            (standardDateProps.day === 'numeric' || standardDateProps.day === '2-digit')) {\n            biggestUnitForPartial = 1; // make it look like the dates are only different in terms of time\n        }\n        var full0 = this.format(start, context);\n        var full1 = this.format(end, context);\n        if (full0 === full1) {\n            return full0;\n        }\n        var partialDateProps = computePartialFormattingOptions(standardDateProps, biggestUnitForPartial);\n        var partialFormattingFunc = buildFormattingFunc(partialDateProps, extendedSettings, context);\n        var partial0 = partialFormattingFunc(start);\n        var partial1 = partialFormattingFunc(end);\n        var insertion = findCommonInsertion(full0, partial0, full1, partial1);\n        var separator = extendedSettings.separator || '';\n        if (insertion) {\n            return insertion.before + partial0 + separator + partial1 + insertion.after;\n        }\n        return full0 + separator + full1;\n    };\n    NativeFormatter.prototype.getLargestUnit = function () {\n        switch (this.severity) {\n            case 7:\n            case 6:\n            case 5:\n                return 'year';\n            case 4:\n                return 'month';\n            case 3:\n                return 'week';\n            default:\n                return 'day';\n        }\n    };\n    return NativeFormatter;\n}());\nfunction buildFormattingFunc(standardDateProps, extendedSettings, context) {\n    var standardDatePropCnt = Object.keys(standardDateProps).length;\n    if (standardDatePropCnt === 1 && standardDateProps.timeZoneName === 'short') {\n        return function (date) {\n            return formatTimeZoneOffset(date.timeZoneOffset);\n        };\n    }\n    if (standardDatePropCnt === 0 && extendedSettings.week) {\n        return function (date) {\n            return formatWeekNumber(context.computeWeekNumber(date.marker), context.weekLabel, context.locale, extendedSettings.week);\n        };\n    }\n    return buildNativeFormattingFunc(standardDateProps, extendedSettings, context);\n}\nfunction buildNativeFormattingFunc(standardDateProps, extendedSettings, context) {\n    standardDateProps = __assign({}, standardDateProps); // copy\n    extendedSettings = __assign({}, extendedSettings); // copy\n    sanitizeSettings(standardDateProps, extendedSettings);\n    standardDateProps.timeZone = 'UTC'; // we leverage the only guaranteed timeZone for our UTC markers\n    var normalFormat = new Intl.DateTimeFormat(context.locale.codes, standardDateProps);\n    var zeroFormat; // needed?\n    if (extendedSettings.omitZeroMinute) {\n        var zeroProps = __assign({}, standardDateProps);\n        delete zeroProps.minute; // seconds and ms were already considered in sanitizeSettings\n        zeroFormat = new Intl.DateTimeFormat(context.locale.codes, zeroProps);\n    }\n    return function (date) {\n        var marker = date.marker;\n        var format;\n        if (zeroFormat && !marker.getUTCMinutes()) {\n            format = zeroFormat;\n        }\n        else {\n            format = normalFormat;\n        }\n        var s = format.format(marker);\n        return postProcess(s, date, standardDateProps, extendedSettings, context);\n    };\n}\nfunction sanitizeSettings(standardDateProps, extendedSettings) {\n    // deal with a browser inconsistency where formatting the timezone\n    // requires that the hour/minute be present.\n    if (standardDateProps.timeZoneName) {\n        if (!standardDateProps.hour) {\n            standardDateProps.hour = '2-digit';\n        }\n        if (!standardDateProps.minute) {\n            standardDateProps.minute = '2-digit';\n        }\n    }\n    // only support short timezone names\n    if (standardDateProps.timeZoneName === 'long') {\n        standardDateProps.timeZoneName = 'short';\n    }\n    // if requesting to display seconds, MUST display minutes\n    if (extendedSettings.omitZeroMinute && (standardDateProps.second || standardDateProps.millisecond)) {\n        delete extendedSettings.omitZeroMinute;\n    }\n}\nfunction postProcess(s, date, standardDateProps, extendedSettings, context) {\n    s = s.replace(LTR_RE, ''); // remove left-to-right control chars. do first. good for other regexes\n    if (standardDateProps.timeZoneName === 'short') {\n        s = injectTzoStr(s, (context.timeZone === 'UTC' || date.timeZoneOffset == null) ?\n            'UTC' : // important to normalize for IE, which does \"GMT\"\n            formatTimeZoneOffset(date.timeZoneOffset));\n    }\n    if (extendedSettings.omitCommas) {\n        s = s.replace(COMMA_RE, '').trim();\n    }\n    if (extendedSettings.omitZeroMinute) {\n        s = s.replace(':00', ''); // zeroFormat doesn't always achieve this\n    }\n    // ^ do anything that might create adjacent spaces before this point,\n    // because MERIDIEM_RE likes to eat up loading spaces\n    if (extendedSettings.meridiem === false) {\n        s = s.replace(MERIDIEM_RE, '').trim();\n    }\n    else if (extendedSettings.meridiem === 'narrow') { // a/p\n        s = s.replace(MERIDIEM_RE, function (m0, m1) {\n            return m1.toLocaleLowerCase();\n        });\n    }\n    else if (extendedSettings.meridiem === 'short') { // am/pm\n        s = s.replace(MERIDIEM_RE, function (m0, m1) {\n            return m1.toLocaleLowerCase() + 'm';\n        });\n    }\n    else if (extendedSettings.meridiem === 'lowercase') { // other meridiem transformers already converted to lowercase\n        s = s.replace(MERIDIEM_RE, function (m0) {\n            return m0.toLocaleLowerCase();\n        });\n    }\n    s = s.replace(MULTI_SPACE_RE, ' ');\n    s = s.trim();\n    return s;\n}\nfunction injectTzoStr(s, tzoStr) {\n    var replaced = false;\n    s = s.replace(UTC_RE, function () {\n        replaced = true;\n        return tzoStr;\n    });\n    // IE11 doesn't include UTC/GMT in the original string, so append to end\n    if (!replaced) {\n        s += ' ' + tzoStr;\n    }\n    return s;\n}\nfunction formatWeekNumber(num, weekLabel, locale, display) {\n    var parts = [];\n    if (display === 'narrow') {\n        parts.push(weekLabel);\n    }\n    else if (display === 'short') {\n        parts.push(weekLabel, ' ');\n    }\n    // otherwise, considered 'numeric'\n    parts.push(locale.simpleNumberFormat.format(num));\n    if (locale.options.isRtl) { // TODO: use control characters instead?\n        parts.reverse();\n    }\n    return parts.join('');\n}\n// Range Formatting Utils\n// 0 = exactly the same\n// 1 = different by time\n// and bigger\nfunction computeMarkerDiffSeverity(d0, d1, ca) {\n    if (ca.getMarkerYear(d0) !== ca.getMarkerYear(d1)) {\n        return 5;\n    }\n    if (ca.getMarkerMonth(d0) !== ca.getMarkerMonth(d1)) {\n        return 4;\n    }\n    if (ca.getMarkerDay(d0) !== ca.getMarkerDay(d1)) {\n        return 2;\n    }\n    if (timeAsMs(d0) !== timeAsMs(d1)) {\n        return 1;\n    }\n    return 0;\n}\nfunction computePartialFormattingOptions(options, biggestUnit) {\n    var partialOptions = {};\n    for (var name_2 in options) {\n        if (!(name_2 in STANDARD_DATE_PROP_SEVERITIES) || // not a date part prop (like timeZone)\n            STANDARD_DATE_PROP_SEVERITIES[name_2] <= biggestUnit) {\n            partialOptions[name_2] = options[name_2];\n        }\n    }\n    return partialOptions;\n}\nfunction findCommonInsertion(full0, partial0, full1, partial1) {\n    var i0 = 0;\n    while (i0 < full0.length) {\n        var found0 = full0.indexOf(partial0, i0);\n        if (found0 === -1) {\n            break;\n        }\n        var before0 = full0.substr(0, found0);\n        i0 = found0 + partial0.length;\n        var after0 = full0.substr(i0);\n        var i1 = 0;\n        while (i1 < full1.length) {\n            var found1 = full1.indexOf(partial1, i1);\n            if (found1 === -1) {\n                break;\n            }\n            var before1 = full1.substr(0, found1);\n            i1 = found1 + partial1.length;\n            var after1 = full1.substr(i1);\n            if (before0 === before1 && after0 === after1) {\n                return {\n                    before: before0,\n                    after: after0\n                };\n            }\n        }\n    }\n    return null;\n}\n\n/*\nTODO: fix the terminology of \"formatter\" vs \"formatting func\"\n*/\n/*\nAt the time of instantiation, this object does not know which cmd-formatting system it will use.\nIt receives this at the time of formatting, as a setting.\n*/\nvar CmdFormatter = /** @class */ (function () {\n    function CmdFormatter(cmdStr, separator) {\n        this.cmdStr = cmdStr;\n        this.separator = separator;\n    }\n    CmdFormatter.prototype.format = function (date, context) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(date, null, context, this.separator));\n    };\n    CmdFormatter.prototype.formatRange = function (start, end, context) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(start, end, context, this.separator));\n    };\n    return CmdFormatter;\n}());\n\nvar FuncFormatter = /** @class */ (function () {\n    function FuncFormatter(func) {\n        this.func = func;\n    }\n    FuncFormatter.prototype.format = function (date, context) {\n        return this.func(createVerboseFormattingArg(date, null, context));\n    };\n    FuncFormatter.prototype.formatRange = function (start, end, context) {\n        return this.func(createVerboseFormattingArg(start, end, context));\n    };\n    return FuncFormatter;\n}());\n\n// Formatter Object Creation\nfunction createFormatter(input, defaultSeparator) {\n    if (typeof input === 'object' && input) { // non-null object\n        if (typeof defaultSeparator === 'string') {\n            input = __assign({ separator: defaultSeparator }, input);\n        }\n        return new NativeFormatter(input);\n    }\n    else if (typeof input === 'string') {\n        return new CmdFormatter(input, defaultSeparator);\n    }\n    else if (typeof input === 'function') {\n        return new FuncFormatter(input);\n    }\n}\n// String Utils\n// timeZoneOffset is in minutes\nfunction buildIsoString(marker, timeZoneOffset, stripZeroTime) {\n    if (stripZeroTime === void 0) { stripZeroTime = false; }\n    var s = marker.toISOString();\n    s = s.replace('.000', '');\n    if (stripZeroTime) {\n        s = s.replace('T00:00:00Z', '');\n    }\n    if (s.length > 10) { // time part wasn't stripped, can add timezone info\n        if (timeZoneOffset == null) {\n            s = s.replace('Z', '');\n        }\n        else if (timeZoneOffset !== 0) {\n            s = s.replace('Z', formatTimeZoneOffset(timeZoneOffset, true));\n        }\n        // otherwise, its UTC-0 and we want to keep the Z\n    }\n    return s;\n}\nfunction formatIsoTimeString(marker) {\n    return padStart(marker.getUTCHours(), 2) + ':' +\n        padStart(marker.getUTCMinutes(), 2) + ':' +\n        padStart(marker.getUTCSeconds(), 2);\n}\nfunction formatTimeZoneOffset(minutes, doIso) {\n    if (doIso === void 0) { doIso = false; }\n    var sign = minutes < 0 ? '-' : '+';\n    var abs = Math.abs(minutes);\n    var hours = Math.floor(abs / 60);\n    var mins = Math.round(abs % 60);\n    if (doIso) {\n        return sign + padStart(hours, 2) + ':' + padStart(mins, 2);\n    }\n    else {\n        return 'GMT' + sign + hours + (mins ? ':' + padStart(mins, 2) : '');\n    }\n}\n// Arg Utils\nfunction createVerboseFormattingArg(start, end, context, separator) {\n    var startInfo = expandZonedMarker(start, context.calendarSystem);\n    var endInfo = end ? expandZonedMarker(end, context.calendarSystem) : null;\n    return {\n        date: startInfo,\n        start: startInfo,\n        end: endInfo,\n        timeZone: context.timeZone,\n        localeCodes: context.locale.codes,\n        separator: separator\n    };\n}\nfunction expandZonedMarker(dateInfo, calendarSystem) {\n    var a = calendarSystem.markerToArray(dateInfo.marker);\n    return {\n        marker: dateInfo.marker,\n        timeZoneOffset: dateInfo.timeZoneOffset,\n        array: a,\n        year: a[0],\n        month: a[1],\n        day: a[2],\n        hour: a[3],\n        minute: a[4],\n        second: a[5],\n        millisecond: a[6]\n    };\n}\n\nvar EventSourceApi = /** @class */ (function () {\n    function EventSourceApi(calendar, internalEventSource) {\n        this.calendar = calendar;\n        this.internalEventSource = internalEventSource;\n    }\n    EventSourceApi.prototype.remove = function () {\n        this.calendar.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: this.internalEventSource.sourceId\n        });\n    };\n    EventSourceApi.prototype.refetch = function () {\n        this.calendar.dispatch({\n            type: 'FETCH_EVENT_SOURCES',\n            sourceIds: [this.internalEventSource.sourceId]\n        });\n    };\n    Object.defineProperty(EventSourceApi.prototype, \"id\", {\n        get: function () {\n            return this.internalEventSource.publicId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventSourceApi.prototype, \"url\", {\n        // only relevant to json-feed event sources\n        get: function () {\n            return this.internalEventSource.meta.url;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EventSourceApi;\n}());\n\nvar EventApi = /** @class */ (function () {\n    function EventApi(calendar, def, instance) {\n        this._calendar = calendar;\n        this._def = def;\n        this._instance = instance || null;\n    }\n    /*\n    TODO: make event struct more responsible for this\n    */\n    EventApi.prototype.setProp = function (name, val) {\n        var _a, _b;\n        if (name in DATE_PROPS) ;\n        else if (name in NON_DATE_PROPS) {\n            if (typeof NON_DATE_PROPS[name] === 'function') {\n                val = NON_DATE_PROPS[name](val);\n            }\n            this.mutate({\n                standardProps: (_a = {}, _a[name] = val, _a)\n            });\n        }\n        else if (name in UNSCOPED_EVENT_UI_PROPS) {\n            var ui = void 0;\n            if (typeof UNSCOPED_EVENT_UI_PROPS[name] === 'function') {\n                val = UNSCOPED_EVENT_UI_PROPS[name](val);\n            }\n            if (name === 'color') {\n                ui = { backgroundColor: val, borderColor: val };\n            }\n            else if (name === 'editable') {\n                ui = { startEditable: val, durationEditable: val };\n            }\n            else {\n                ui = (_b = {}, _b[name] = val, _b);\n            }\n            this.mutate({\n                standardProps: { ui: ui }\n            });\n        }\n    };\n    EventApi.prototype.setExtendedProp = function (name, val) {\n        var _a;\n        this.mutate({\n            extendedProps: (_a = {}, _a[name] = val, _a)\n        });\n    };\n    EventApi.prototype.setStart = function (startInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var start = dateEnv.createMarker(startInput);\n        if (start && this._instance) { // TODO: warning if parsed bad\n            var instanceRange = this._instance.range;\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity); // what if parsed bad!?\n            if (options.maintainDuration) {\n                this.mutate({ datesDelta: startDelta });\n            }\n            else {\n                this.mutate({ startDelta: startDelta });\n            }\n        }\n    };\n    EventApi.prototype.setEnd = function (endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var end;\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) {\n                return; // TODO: warning if parsed bad\n            }\n        }\n        if (this._instance) {\n            if (end) {\n                var endDelta = diffDates(this._instance.range.end, end, dateEnv, options.granularity);\n                this.mutate({ endDelta: endDelta });\n            }\n            else {\n                this.mutate({ standardProps: { hasEnd: false } });\n            }\n        }\n    };\n    EventApi.prototype.setDates = function (startInput, endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._calendar.dateEnv;\n        var standardProps = { allDay: options.allDay };\n        var start = dateEnv.createMarker(startInput);\n        var end;\n        if (!start) {\n            return; // TODO: warning if parsed bad\n        }\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) { // TODO: warning if parsed bad\n                return;\n            }\n        }\n        if (this._instance) {\n            var instanceRange = this._instance.range;\n            // when computing the diff for an event being converted to all-day,\n            // compute diff off of the all-day values the way event-mutation does.\n            if (options.allDay === true) {\n                instanceRange = computeAlignedDayRange(instanceRange);\n            }\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity);\n            if (end) {\n                var endDelta = diffDates(instanceRange.end, end, dateEnv, options.granularity);\n                if (durationsEqual(startDelta, endDelta)) {\n                    this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n                }\n                else {\n                    this.mutate({ startDelta: startDelta, endDelta: endDelta, standardProps: standardProps });\n                }\n            }\n            else { // means \"clear the end\"\n                standardProps.hasEnd = false;\n                this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n            }\n        }\n    };\n    EventApi.prototype.moveStart = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ startDelta: delta });\n        }\n    };\n    EventApi.prototype.moveEnd = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ endDelta: delta });\n        }\n    };\n    EventApi.prototype.moveDates = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ datesDelta: delta });\n        }\n    };\n    EventApi.prototype.setAllDay = function (allDay, options) {\n        if (options === void 0) { options = {}; }\n        var standardProps = { allDay: allDay };\n        var maintainDuration = options.maintainDuration;\n        if (maintainDuration == null) {\n            maintainDuration = this._calendar.opt('allDayMaintainDuration');\n        }\n        if (this._def.allDay !== allDay) {\n            standardProps.hasEnd = maintainDuration;\n        }\n        this.mutate({ standardProps: standardProps });\n    };\n    EventApi.prototype.formatRange = function (formatInput) {\n        var dateEnv = this._calendar.dateEnv;\n        var instance = this._instance;\n        var formatter = createFormatter(formatInput, this._calendar.opt('defaultRangeSeparator'));\n        if (this._def.hasEnd) {\n            return dateEnv.formatRange(instance.range.start, instance.range.end, formatter, {\n                forcedStartTzo: instance.forcedStartTzo,\n                forcedEndTzo: instance.forcedEndTzo\n            });\n        }\n        else {\n            return dateEnv.format(instance.range.start, formatter, {\n                forcedTzo: instance.forcedStartTzo\n            });\n        }\n    };\n    EventApi.prototype.mutate = function (mutation) {\n        var def = this._def;\n        var instance = this._instance;\n        if (instance) {\n            this._calendar.dispatch({\n                type: 'MUTATE_EVENTS',\n                instanceId: instance.instanceId,\n                mutation: mutation,\n                fromApi: true\n            });\n            var eventStore = this._calendar.state.eventStore;\n            this._def = eventStore.defs[def.defId];\n            this._instance = eventStore.instances[instance.instanceId];\n        }\n    };\n    EventApi.prototype.remove = function () {\n        this._calendar.dispatch({\n            type: 'REMOVE_EVENT_DEF',\n            defId: this._def.defId\n        });\n    };\n    Object.defineProperty(EventApi.prototype, \"source\", {\n        get: function () {\n            var sourceId = this._def.sourceId;\n            if (sourceId) {\n                return new EventSourceApi(this._calendar, this._calendar.state.eventSources[sourceId]);\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"start\", {\n        get: function () {\n            return this._instance ?\n                this._calendar.dateEnv.toDate(this._instance.range.start) :\n                null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"end\", {\n        get: function () {\n            return (this._instance && this._def.hasEnd) ?\n                this._calendar.dateEnv.toDate(this._instance.range.end) :\n                null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"id\", {\n        // computable props that all access the def\n        // TODO: find a TypeScript-compatible way to do this at scale\n        get: function () { return this._def.publicId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"groupId\", {\n        get: function () { return this._def.groupId; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allDay\", {\n        get: function () { return this._def.allDay; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"title\", {\n        get: function () { return this._def.title; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"url\", {\n        get: function () { return this._def.url; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"rendering\", {\n        get: function () { return this._def.rendering; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"startEditable\", {\n        get: function () { return this._def.ui.startEditable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"durationEditable\", {\n        get: function () { return this._def.ui.durationEditable; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"constraint\", {\n        get: function () { return this._def.ui.constraints[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"overlap\", {\n        get: function () { return this._def.ui.overlap; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allow\", {\n        get: function () { return this._def.ui.allows[0] || null; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"backgroundColor\", {\n        get: function () { return this._def.ui.backgroundColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"borderColor\", {\n        get: function () { return this._def.ui.borderColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"textColor\", {\n        get: function () { return this._def.ui.textColor; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"classNames\", {\n        // NOTE: user can't modify these because Object.freeze was called in event-def parsing\n        get: function () { return this._def.ui.classNames; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"extendedProps\", {\n        get: function () { return this._def.extendedProps; },\n        enumerable: true,\n        configurable: true\n    });\n    return EventApi;\n}());\n\n/*\nSpecifying nextDayThreshold signals that all-day ranges should be sliced.\n*/\nfunction sliceEventStore(eventStore, eventUiBases, framingRange, nextDayThreshold) {\n    var inverseBgByGroupId = {};\n    var inverseBgByDefId = {};\n    var defByGroupId = {};\n    var bgRanges = [];\n    var fgRanges = [];\n    var eventUis = compileEventUis(eventStore.defs, eventUiBases);\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        if (def.rendering === 'inverse-background') {\n            if (def.groupId) {\n                inverseBgByGroupId[def.groupId] = [];\n                if (!defByGroupId[def.groupId]) {\n                    defByGroupId[def.groupId] = def;\n                }\n            }\n            else {\n                inverseBgByDefId[defId] = [];\n            }\n        }\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = eventStore.defs[instance.defId];\n        var ui = eventUis[def.defId];\n        var origRange = instance.range;\n        var normalRange = (!def.allDay && nextDayThreshold) ?\n            computeVisibleDayRange(origRange, nextDayThreshold) :\n            origRange;\n        var slicedRange = intersectRanges(normalRange, framingRange);\n        if (slicedRange) {\n            if (def.rendering === 'inverse-background') {\n                if (def.groupId) {\n                    inverseBgByGroupId[def.groupId].push(slicedRange);\n                }\n                else {\n                    inverseBgByDefId[instance.defId].push(slicedRange);\n                }\n            }\n            else {\n                (def.rendering === 'background' ? bgRanges : fgRanges).push({\n                    def: def,\n                    ui: ui,\n                    instance: instance,\n                    range: slicedRange,\n                    isStart: normalRange.start && normalRange.start.valueOf() === slicedRange.start.valueOf(),\n                    isEnd: normalRange.end && normalRange.end.valueOf() === slicedRange.end.valueOf()\n                });\n            }\n        }\n    }\n    for (var groupId in inverseBgByGroupId) { // BY GROUP\n        var ranges = inverseBgByGroupId[groupId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _i = 0, invertedRanges_1 = invertedRanges; _i < invertedRanges_1.length; _i++) {\n            var invertedRange = invertedRanges_1[_i];\n            var def = defByGroupId[groupId];\n            var ui = eventUis[def.defId];\n            bgRanges.push({\n                def: def,\n                ui: ui,\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false\n            });\n        }\n    }\n    for (var defId in inverseBgByDefId) {\n        var ranges = inverseBgByDefId[defId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _a = 0, invertedRanges_2 = invertedRanges; _a < invertedRanges_2.length; _a++) {\n            var invertedRange = invertedRanges_2[_a];\n            bgRanges.push({\n                def: eventStore.defs[defId],\n                ui: eventUis[defId],\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false\n            });\n        }\n    }\n    return { bg: bgRanges, fg: fgRanges };\n}\nfunction hasBgRendering(def) {\n    return def.rendering === 'background' || def.rendering === 'inverse-background';\n}\nfunction filterSegsViaEls(context, segs, isMirror) {\n    var calendar = context.calendar, view = context.view;\n    if (calendar.hasPublicHandlers('eventRender')) {\n        segs = segs.filter(function (seg) {\n            var custom = calendar.publiclyTrigger('eventRender', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirror,\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                    // TODO: include seg.range once all components consistently generate it\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n            if (custom === false) { // means don't render at all\n                return false;\n            }\n            else if (custom && custom !== true) {\n                seg.el = custom;\n            }\n            return true;\n        });\n    }\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        setElSeg(seg.el, seg);\n    }\n    return segs;\n}\nfunction setElSeg(el, seg) {\n    el.fcSeg = seg;\n}\nfunction getElSeg(el) {\n    return el.fcSeg || null;\n}\n// event ui computation\nfunction compileEventUis(eventDefs, eventUiBases) {\n    return mapHash(eventDefs, function (eventDef) {\n        return compileEventUi(eventDef, eventUiBases);\n    });\n}\nfunction compileEventUi(eventDef, eventUiBases) {\n    var uis = [];\n    if (eventUiBases['']) {\n        uis.push(eventUiBases['']);\n    }\n    if (eventUiBases[eventDef.defId]) {\n        uis.push(eventUiBases[eventDef.defId]);\n    }\n    uis.push(eventDef.ui);\n    return combineEventUis(uis);\n}\n// triggers\nfunction triggerRenderedSegs(context, segs, isMirrors) {\n    var calendar = context.calendar, view = context.view;\n    if (calendar.hasPublicHandlers('eventPositioned')) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            calendar.publiclyTriggerAfterSizing('eventPositioned', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirrors,\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n        }\n    }\n    if (!calendar.state.loadingLevel) { // avoid initial empty state while pending\n        calendar.afterSizingTriggers._eventsPositioned = [null]; // fire once\n    }\n}\nfunction triggerWillRemoveSegs(context, segs, isMirrors) {\n    var calendar = context.calendar, view = context.view;\n    for (var _i = 0, segs_3 = segs; _i < segs_3.length; _i++) {\n        var seg = segs_3[_i];\n        calendar.trigger('eventElRemove', seg.el);\n    }\n    if (calendar.hasPublicHandlers('eventDestroy')) {\n        for (var _a = 0, segs_4 = segs; _a < segs_4.length; _a++) {\n            var seg = segs_4[_a];\n            calendar.publiclyTrigger('eventDestroy', [\n                {\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    isMirror: isMirrors,\n                    el: seg.el,\n                    view: view\n                }\n            ]);\n        }\n    }\n}\n// is-interactable\nfunction computeEventDraggable(context, eventDef, eventUi) {\n    var calendar = context.calendar, view = context.view;\n    var transformers = calendar.pluginSystem.hooks.isDraggableTransformers;\n    var val = eventUi.startEditable;\n    for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n        var transformer = transformers_1[_i];\n        val = transformer(val, eventDef, eventUi, view);\n    }\n    return val;\n}\nfunction computeEventStartResizable(context, eventDef, eventUi) {\n    return eventUi.durationEditable && context.options.eventResizableFromStart;\n}\nfunction computeEventEndResizable(context, eventDef, eventUi) {\n    return eventUi.durationEditable;\n}\n\n// applies the mutation to ALL defs/instances within the event store\nfunction applyMutationToEventStore(eventStore, eventConfigBase, mutation, calendar) {\n    var eventConfigs = compileEventUis(eventStore.defs, eventConfigBase);\n    var dest = createEmptyEventStore();\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        dest.defs[defId] = applyMutationToEventDef(def, eventConfigs[defId], mutation, calendar.pluginSystem.hooks.eventDefMutationAppliers, calendar);\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = dest.defs[instance.defId]; // important to grab the newly modified def\n        dest.instances[instanceId] = applyMutationToEventInstance(instance, def, eventConfigs[instance.defId], mutation, calendar);\n    }\n    return dest;\n}\nfunction applyMutationToEventDef(eventDef, eventConfig, mutation, appliers, calendar) {\n    var standardProps = mutation.standardProps || {};\n    // if hasEnd has not been specified, guess a good value based on deltas.\n    // if duration will change, there's no way the default duration will persist,\n    // and thus, we need to mark the event as having a real end\n    if (standardProps.hasEnd == null &&\n        eventConfig.durationEditable &&\n        (mutation.startDelta || mutation.endDelta)) {\n        standardProps.hasEnd = true; // TODO: is this mutation okay?\n    }\n    var copy = __assign({}, eventDef, standardProps, { ui: __assign({}, eventDef.ui, standardProps.ui) });\n    if (mutation.extendedProps) {\n        copy.extendedProps = __assign({}, copy.extendedProps, mutation.extendedProps);\n    }\n    for (var _i = 0, appliers_1 = appliers; _i < appliers_1.length; _i++) {\n        var applier = appliers_1[_i];\n        applier(copy, mutation, calendar);\n    }\n    if (!copy.hasEnd && calendar.opt('forceEventDuration')) {\n        copy.hasEnd = true;\n    }\n    return copy;\n}\nfunction applyMutationToEventInstance(eventInstance, eventDef, // must first be modified by applyMutationToEventDef\neventConfig, mutation, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var forceAllDay = mutation.standardProps && mutation.standardProps.allDay === true;\n    var clearEnd = mutation.standardProps && mutation.standardProps.hasEnd === false;\n    var copy = __assign({}, eventInstance);\n    if (forceAllDay) {\n        copy.range = computeAlignedDayRange(copy.range);\n    }\n    if (mutation.datesDelta && eventConfig.startEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.datesDelta),\n            end: dateEnv.add(copy.range.end, mutation.datesDelta)\n        };\n    }\n    if (mutation.startDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.startDelta),\n            end: copy.range.end\n        };\n    }\n    if (mutation.endDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: copy.range.start,\n            end: dateEnv.add(copy.range.end, mutation.endDelta)\n        };\n    }\n    if (clearEnd) {\n        copy.range = {\n            start: copy.range.start,\n            end: calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start)\n        };\n    }\n    // in case event was all-day but the supplied deltas were not\n    // better util for this?\n    if (eventDef.allDay) {\n        copy.range = {\n            start: startOfDay(copy.range.start),\n            end: startOfDay(copy.range.end)\n        };\n    }\n    // handle invalid durations\n    if (copy.range.end < copy.range.start) {\n        copy.range.end = calendar.getDefaultEventEnd(eventDef.allDay, copy.range.start);\n    }\n    return copy;\n}\n\nfunction reduceEventStore (eventStore, action, eventSources, dateProfile, calendar) {\n    switch (action.type) {\n        case 'RECEIVE_EVENTS': // raw\n            return receiveRawEvents(eventStore, eventSources[action.sourceId], action.fetchId, action.fetchRange, action.rawEvents, calendar);\n        case 'ADD_EVENTS': // already parsed, but not expanded\n            return addEvent(eventStore, action.eventStore, // new ones\n            dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'MERGE_EVENTS': // already parsed and expanded\n            return mergeEventStores(eventStore, action.eventStore);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            if (dateProfile) {\n                return expandRecurring(eventStore, dateProfile.activeRange, calendar);\n            }\n            else {\n                return eventStore;\n            }\n        case 'CHANGE_TIMEZONE':\n            return rezoneDates(eventStore, action.oldDateEnv, calendar.dateEnv);\n        case 'MUTATE_EVENTS':\n            return applyMutationToRelated(eventStore, action.instanceId, action.mutation, action.fromApi, calendar);\n        case 'REMOVE_EVENT_INSTANCES':\n            return excludeInstances(eventStore, action.instances);\n        case 'REMOVE_EVENT_DEF':\n            return filterEventStoreDefs(eventStore, function (eventDef) {\n                return eventDef.defId !== action.defId;\n            });\n        case 'REMOVE_EVENT_SOURCE':\n            return excludeEventsBySourceId(eventStore, action.sourceId);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return filterEventStoreDefs(eventStore, function (eventDef) {\n                return !eventDef.sourceId; // only keep events with no source id\n            });\n        case 'REMOVE_ALL_EVENTS':\n            return createEmptyEventStore();\n        case 'RESET_EVENTS':\n            return {\n                defs: eventStore.defs,\n                instances: eventStore.instances\n            };\n        default:\n            return eventStore;\n    }\n}\nfunction receiveRawEvents(eventStore, eventSource, fetchId, fetchRange, rawEvents, calendar) {\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId // TODO: wish this logic was always in event-sources\n    ) {\n        var subset = parseEvents(transformRawEvents(rawEvents, eventSource, calendar), eventSource.sourceId, calendar);\n        if (fetchRange) {\n            subset = expandRecurring(subset, fetchRange, calendar);\n        }\n        return mergeEventStores(excludeEventsBySourceId(eventStore, eventSource.sourceId), subset);\n    }\n    return eventStore;\n}\nfunction addEvent(eventStore, subset, expandRange, calendar) {\n    if (expandRange) {\n        subset = expandRecurring(subset, expandRange, calendar);\n    }\n    return mergeEventStores(eventStore, subset);\n}\nfunction rezoneDates(eventStore, oldDateEnv, newDateEnv) {\n    var defs = eventStore.defs;\n    var instances = mapHash(eventStore.instances, function (instance) {\n        var def = defs[instance.defId];\n        if (def.allDay || def.recurringDef) {\n            return instance; // isn't dependent on timezone\n        }\n        else {\n            return __assign({}, instance, { range: {\n                    start: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.start, instance.forcedStartTzo)),\n                    end: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.end, instance.forcedEndTzo))\n                }, forcedStartTzo: newDateEnv.canComputeOffset ? null : instance.forcedStartTzo, forcedEndTzo: newDateEnv.canComputeOffset ? null : instance.forcedEndTzo });\n        }\n    });\n    return { defs: defs, instances: instances };\n}\nfunction applyMutationToRelated(eventStore, instanceId, mutation, fromApi, calendar) {\n    var relevant = getRelevantEvents(eventStore, instanceId);\n    var eventConfigBase = fromApi ?\n        { '': {\n                startEditable: true,\n                durationEditable: true,\n                constraints: [],\n                overlap: null,\n                allows: [],\n                backgroundColor: '',\n                borderColor: '',\n                textColor: '',\n                classNames: []\n            } } :\n        calendar.eventUiBases;\n    relevant = applyMutationToEventStore(relevant, eventConfigBase, mutation, calendar);\n    return mergeEventStores(eventStore, relevant);\n}\nfunction excludeEventsBySourceId(eventStore, sourceId) {\n    return filterEventStoreDefs(eventStore, function (eventDef) {\n        return eventDef.sourceId !== sourceId;\n    });\n}\n// QUESTION: why not just return instances? do a general object-property-exclusion util\nfunction excludeInstances(eventStore, removals) {\n    return {\n        defs: eventStore.defs,\n        instances: filterHash(eventStore.instances, function (instance) {\n            return !removals[instance.instanceId];\n        })\n    };\n}\n\n// high-level segmenting-aware tester functions\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionValid(interaction, calendar) {\n    return isNewPropsValid({ eventDrag: interaction }, calendar); // HACK: the eventDrag props is used for ALL interactions\n}\nfunction isDateSelectionValid(dateSelection, calendar) {\n    return isNewPropsValid({ dateSelection: dateSelection }, calendar);\n}\nfunction isNewPropsValid(newProps, calendar) {\n    var view = calendar.view;\n    var props = __assign({ businessHours: view ? view.props.businessHours : createEmptyEventStore(), dateSelection: '', eventStore: calendar.state.eventStore, eventUiBases: calendar.eventUiBases, eventSelection: '', eventDrag: null, eventResize: null }, newProps);\n    return (calendar.pluginSystem.hooks.isPropsValid || isPropsValid)(props, calendar);\n}\nfunction isPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    if (dateSpanMeta === void 0) { dateSpanMeta = {}; }\n    if (state.eventDrag && !isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    if (state.dateSelection && !isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    return true;\n}\n// Moving Event Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    var interaction = state.eventDrag; // HACK: the eventDrag props is used for ALL interactions\n    var subjectEventStore = interaction.mutatedEvents;\n    var subjectDefs = subjectEventStore.defs;\n    var subjectInstances = subjectEventStore.instances;\n    var subjectConfigs = compileEventUis(subjectDefs, interaction.isEvent ?\n        state.eventUiBases :\n        { '': calendar.selectionConfig } // if not a real event, validate as a selection\n    );\n    if (filterConfig) {\n        subjectConfigs = mapHash(subjectConfigs, filterConfig);\n    }\n    var otherEventStore = excludeInstances(state.eventStore, interaction.affectedEvents.instances); // exclude the subject events. TODO: exclude defs too?\n    var otherDefs = otherEventStore.defs;\n    var otherInstances = otherEventStore.instances;\n    var otherConfigs = compileEventUis(otherDefs, state.eventUiBases);\n    for (var subjectInstanceId in subjectInstances) {\n        var subjectInstance = subjectInstances[subjectInstanceId];\n        var subjectRange = subjectInstance.range;\n        var subjectConfig = subjectConfigs[subjectInstance.defId];\n        var subjectDef = subjectDefs[subjectInstance.defId];\n        // constraint\n        if (!allConstraintsPass(subjectConfig.constraints, subjectRange, otherEventStore, state.businessHours, calendar)) {\n            return false;\n        }\n        // overlap\n        var overlapFunc = calendar.opt('eventOverlap');\n        if (typeof overlapFunc !== 'function') {\n            overlapFunc = null;\n        }\n        for (var otherInstanceId in otherInstances) {\n            var otherInstance = otherInstances[otherInstanceId];\n            // intersect! evaluate\n            if (rangesIntersect(subjectRange, otherInstance.range)) {\n                var otherOverlap = otherConfigs[otherInstance.defId].overlap;\n                // consider the other event's overlap. only do this if the subject event is a \"real\" event\n                if (otherOverlap === false && interaction.isEvent) {\n                    return false;\n                }\n                if (subjectConfig.overlap === false) {\n                    return false;\n                }\n                if (overlapFunc && !overlapFunc(new EventApi(calendar, otherDefs[otherInstance.defId], otherInstance), // still event\n                new EventApi(calendar, subjectDef, subjectInstance) // moving event\n                )) {\n                    return false;\n                }\n            }\n        }\n        // allow (a function)\n        var calendarEventStore = calendar.state.eventStore; // need global-to-calendar, not local to component (splittable)state\n        for (var _i = 0, _a = subjectConfig.allows; _i < _a.length; _i++) {\n            var subjectAllow = _a[_i];\n            var subjectDateSpan = __assign({}, dateSpanMeta, { range: subjectInstance.range, allDay: subjectDef.allDay });\n            var origDef = calendarEventStore.defs[subjectDef.defId];\n            var origInstance = calendarEventStore.instances[subjectInstanceId];\n            var eventApi = void 0;\n            if (origDef) { // was previously in the calendar\n                eventApi = new EventApi(calendar, origDef, origInstance);\n            }\n            else { // was an external event\n                eventApi = new EventApi(calendar, subjectDef); // no instance, because had no dates\n            }\n            if (!subjectAllow(calendar.buildDateSpanApi(subjectDateSpan), eventApi)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n// Date Selection Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isDateSelectionPropsValid(state, calendar, dateSpanMeta, filterConfig) {\n    var relevantEventStore = state.eventStore;\n    var relevantDefs = relevantEventStore.defs;\n    var relevantInstances = relevantEventStore.instances;\n    var selection = state.dateSelection;\n    var selectionRange = selection.range;\n    var selectionConfig = calendar.selectionConfig;\n    if (filterConfig) {\n        selectionConfig = filterConfig(selectionConfig);\n    }\n    // constraint\n    if (!allConstraintsPass(selectionConfig.constraints, selectionRange, relevantEventStore, state.businessHours, calendar)) {\n        return false;\n    }\n    // overlap\n    var overlapFunc = calendar.opt('selectOverlap');\n    if (typeof overlapFunc !== 'function') {\n        overlapFunc = null;\n    }\n    for (var relevantInstanceId in relevantInstances) {\n        var relevantInstance = relevantInstances[relevantInstanceId];\n        // intersect! evaluate\n        if (rangesIntersect(selectionRange, relevantInstance.range)) {\n            if (selectionConfig.overlap === false) {\n                return false;\n            }\n            if (overlapFunc && !overlapFunc(new EventApi(calendar, relevantDefs[relevantInstance.defId], relevantInstance))) {\n                return false;\n            }\n        }\n    }\n    // allow (a function)\n    for (var _i = 0, _a = selectionConfig.allows; _i < _a.length; _i++) {\n        var selectionAllow = _a[_i];\n        var fullDateSpan = __assign({}, dateSpanMeta, selection);\n        if (!selectionAllow(calendar.buildDateSpanApi(fullDateSpan), null)) {\n            return false;\n        }\n    }\n    return true;\n}\n// Constraint Utils\n// ------------------------------------------------------------------------------------------------------------------------\nfunction allConstraintsPass(constraints, subjectRange, otherEventStore, businessHoursUnexpanded, calendar) {\n    for (var _i = 0, constraints_1 = constraints; _i < constraints_1.length; _i++) {\n        var constraint = constraints_1[_i];\n        if (!anyRangesContainRange(constraintToRanges(constraint, subjectRange, otherEventStore, businessHoursUnexpanded, calendar), subjectRange)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction constraintToRanges(constraint, subjectRange, // for expanding a recurring constraint, or expanding business hours\notherEventStore, // for if constraint is an even group ID\nbusinessHoursUnexpanded, // for if constraint is 'businessHours'\ncalendar // for expanding businesshours\n) {\n    if (constraint === 'businessHours') {\n        return eventStoreToRanges(expandRecurring(businessHoursUnexpanded, subjectRange, calendar));\n    }\n    else if (typeof constraint === 'string') { // an group ID\n        return eventStoreToRanges(filterEventStoreDefs(otherEventStore, function (eventDef) {\n            return eventDef.groupId === constraint;\n        }));\n    }\n    else if (typeof constraint === 'object' && constraint) { // non-null object\n        return eventStoreToRanges(expandRecurring(constraint, subjectRange, calendar));\n    }\n    return []; // if it's false\n}\n// TODO: move to event-store file?\nfunction eventStoreToRanges(eventStore) {\n    var instances = eventStore.instances;\n    var ranges = [];\n    for (var instanceId in instances) {\n        ranges.push(instances[instanceId].range);\n    }\n    return ranges;\n}\n// TODO: move to geom file?\nfunction anyRangesContainRange(outerRanges, innerRange) {\n    for (var _i = 0, outerRanges_1 = outerRanges; _i < outerRanges_1.length; _i++) {\n        var outerRange = outerRanges_1[_i];\n        if (rangeContainsRange(outerRange, innerRange)) {\n            return true;\n        }\n    }\n    return false;\n}\n// Parsing\n// ------------------------------------------------------------------------------------------------------------------------\nfunction normalizeConstraint(input, calendar) {\n    if (Array.isArray(input)) {\n        return parseEvents(input, '', calendar, true); // allowOpenRange=true\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        return parseEvents([input], '', calendar, true); // allowOpenRange=true\n    }\n    else if (input != null) {\n        return String(input);\n    }\n    else {\n        return null;\n    }\n}\n\nfunction htmlEscape(s) {\n    return (s + '').replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/'/g, '&#039;')\n        .replace(/\"/g, '&quot;')\n        .replace(/\\n/g, '<br />');\n}\n// Given a hash of CSS properties, returns a string of CSS.\n// Uses property names as-is (no camel-case conversion). Will not make statements for null/undefined values.\nfunction cssToStr(cssProps) {\n    var statements = [];\n    for (var name_1 in cssProps) {\n        var val = cssProps[name_1];\n        if (val != null && val !== '') {\n            statements.push(name_1 + ':' + val);\n        }\n    }\n    return statements.join(';');\n}\n// Given an object hash of HTML attribute names to values,\n// generates a string that can be injected between < > in HTML\nfunction attrsToStr(attrs) {\n    var parts = [];\n    for (var name_2 in attrs) {\n        var val = attrs[name_2];\n        if (val != null) {\n            parts.push(name_2 + '=\"' + htmlEscape(val) + '\"');\n        }\n    }\n    return parts.join(' ');\n}\nfunction parseClassName(raw) {\n    if (Array.isArray(raw)) {\n        return raw;\n    }\n    else if (typeof raw === 'string') {\n        return raw.split(/\\s+/);\n    }\n    else {\n        return [];\n    }\n}\n\nvar UNSCOPED_EVENT_UI_PROPS = {\n    editable: Boolean,\n    startEditable: Boolean,\n    durationEditable: Boolean,\n    constraint: null,\n    overlap: null,\n    allow: null,\n    className: parseClassName,\n    classNames: parseClassName,\n    color: String,\n    backgroundColor: String,\n    borderColor: String,\n    textColor: String\n};\nfunction processUnscopedUiProps(rawProps, calendar, leftovers) {\n    var props = refineProps(rawProps, UNSCOPED_EVENT_UI_PROPS, {}, leftovers);\n    var constraint = normalizeConstraint(props.constraint, calendar);\n    return {\n        startEditable: props.startEditable != null ? props.startEditable : props.editable,\n        durationEditable: props.durationEditable != null ? props.durationEditable : props.editable,\n        constraints: constraint != null ? [constraint] : [],\n        overlap: props.overlap,\n        allows: props.allow != null ? [props.allow] : [],\n        backgroundColor: props.backgroundColor || props.color,\n        borderColor: props.borderColor || props.color,\n        textColor: props.textColor,\n        classNames: props.classNames.concat(props.className)\n    };\n}\nfunction processScopedUiProps(prefix, rawScoped, calendar, leftovers) {\n    var rawUnscoped = {};\n    var wasFound = {};\n    for (var key in UNSCOPED_EVENT_UI_PROPS) {\n        var scopedKey = prefix + capitaliseFirstLetter(key);\n        rawUnscoped[key] = rawScoped[scopedKey];\n        wasFound[scopedKey] = true;\n    }\n    if (prefix === 'event') {\n        rawUnscoped.editable = rawScoped.editable; // special case. there is no 'eventEditable', just 'editable'\n    }\n    if (leftovers) {\n        for (var key in rawScoped) {\n            if (!wasFound[key]) {\n                leftovers[key] = rawScoped[key];\n            }\n        }\n    }\n    return processUnscopedUiProps(rawUnscoped, calendar);\n}\nvar EMPTY_EVENT_UI = {\n    startEditable: null,\n    durationEditable: null,\n    constraints: [],\n    overlap: null,\n    allows: [],\n    backgroundColor: '',\n    borderColor: '',\n    textColor: '',\n    classNames: []\n};\n// prevent against problems with <2 args!\nfunction combineEventUis(uis) {\n    return uis.reduce(combineTwoEventUis, EMPTY_EVENT_UI);\n}\nfunction combineTwoEventUis(item0, item1) {\n    return {\n        startEditable: item1.startEditable != null ? item1.startEditable : item0.startEditable,\n        durationEditable: item1.durationEditable != null ? item1.durationEditable : item0.durationEditable,\n        constraints: item0.constraints.concat(item1.constraints),\n        overlap: typeof item1.overlap === 'boolean' ? item1.overlap : item0.overlap,\n        allows: item0.allows.concat(item1.allows),\n        backgroundColor: item1.backgroundColor || item0.backgroundColor,\n        borderColor: item1.borderColor || item0.borderColor,\n        textColor: item1.textColor || item0.textColor,\n        classNames: item0.classNames.concat(item1.classNames)\n    };\n}\n\nvar NON_DATE_PROPS = {\n    id: String,\n    groupId: String,\n    title: String,\n    url: String,\n    rendering: String,\n    extendedProps: null\n};\nvar DATE_PROPS = {\n    start: null,\n    date: null,\n    end: null,\n    allDay: null\n};\nvar uid = 0;\nfunction parseEvent(raw, sourceId, calendar, allowOpenRange) {\n    var allDayDefault = computeIsAllDayDefault(sourceId, calendar);\n    var leftovers0 = {};\n    var recurringRes = parseRecurring(raw, // raw, but with single-event stuff stripped out\n    allDayDefault, calendar.dateEnv, calendar.pluginSystem.hooks.recurringTypes, leftovers0 // will populate with non-recurring props\n    );\n    if (recurringRes) {\n        var def = parseEventDef(leftovers0, sourceId, recurringRes.allDay, Boolean(recurringRes.duration), calendar);\n        def.recurringDef = {\n            typeId: recurringRes.typeId,\n            typeData: recurringRes.typeData,\n            duration: recurringRes.duration\n        };\n        return { def: def, instance: null };\n    }\n    else {\n        var leftovers1 = {};\n        var singleRes = parseSingle(raw, allDayDefault, calendar, leftovers1, allowOpenRange);\n        if (singleRes) {\n            var def = parseEventDef(leftovers1, sourceId, singleRes.allDay, singleRes.hasEnd, calendar);\n            var instance = createEventInstance(def.defId, singleRes.range, singleRes.forcedStartTzo, singleRes.forcedEndTzo);\n            return { def: def, instance: instance };\n        }\n    }\n    return null;\n}\n/*\nWill NOT populate extendedProps with the leftover properties.\nWill NOT populate date-related props.\nThe EventNonDateInput has been normalized (id => publicId, etc).\n*/\nfunction parseEventDef(raw, sourceId, allDay, hasEnd, calendar) {\n    var leftovers = {};\n    var def = pluckNonDateProps(raw, calendar, leftovers);\n    def.defId = String(uid++);\n    def.sourceId = sourceId;\n    def.allDay = allDay;\n    def.hasEnd = hasEnd;\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.eventDefParsers; _i < _a.length; _i++) {\n        var eventDefParser = _a[_i];\n        var newLeftovers = {};\n        eventDefParser(def, leftovers, newLeftovers);\n        leftovers = newLeftovers;\n    }\n    def.extendedProps = __assign(leftovers, def.extendedProps || {});\n    // help out EventApi from having user modify props\n    Object.freeze(def.ui.classNames);\n    Object.freeze(def.extendedProps);\n    return def;\n}\nfunction createEventInstance(defId, range, forcedStartTzo, forcedEndTzo) {\n    return {\n        instanceId: String(uid++),\n        defId: defId,\n        range: range,\n        forcedStartTzo: forcedStartTzo == null ? null : forcedStartTzo,\n        forcedEndTzo: forcedEndTzo == null ? null : forcedEndTzo\n    };\n}\nfunction parseSingle(raw, allDayDefault, calendar, leftovers, allowOpenRange) {\n    var props = pluckDateProps(raw, leftovers);\n    var allDay = props.allDay;\n    var startMeta;\n    var startMarker = null;\n    var hasEnd = false;\n    var endMeta;\n    var endMarker = null;\n    startMeta = calendar.dateEnv.createMarkerMeta(props.start);\n    if (startMeta) {\n        startMarker = startMeta.marker;\n    }\n    else if (!allowOpenRange) {\n        return null;\n    }\n    if (props.end != null) {\n        endMeta = calendar.dateEnv.createMarkerMeta(props.end);\n    }\n    if (allDay == null) {\n        if (allDayDefault != null) {\n            allDay = allDayDefault;\n        }\n        else {\n            // fall back to the date props LAST\n            allDay = (!startMeta || startMeta.isTimeUnspecified) &&\n                (!endMeta || endMeta.isTimeUnspecified);\n        }\n    }\n    if (allDay && startMarker) {\n        startMarker = startOfDay(startMarker);\n    }\n    if (endMeta) {\n        endMarker = endMeta.marker;\n        if (allDay) {\n            endMarker = startOfDay(endMarker);\n        }\n        if (startMarker && endMarker <= startMarker) {\n            endMarker = null;\n        }\n    }\n    if (endMarker) {\n        hasEnd = true;\n    }\n    else if (!allowOpenRange) {\n        hasEnd = calendar.opt('forceEventDuration') || false;\n        endMarker = calendar.dateEnv.add(startMarker, allDay ?\n            calendar.defaultAllDayEventDuration :\n            calendar.defaultTimedEventDuration);\n    }\n    return {\n        allDay: allDay,\n        hasEnd: hasEnd,\n        range: { start: startMarker, end: endMarker },\n        forcedStartTzo: startMeta ? startMeta.forcedTzo : null,\n        forcedEndTzo: endMeta ? endMeta.forcedTzo : null\n    };\n}\nfunction pluckDateProps(raw, leftovers) {\n    var props = refineProps(raw, DATE_PROPS, {}, leftovers);\n    props.start = (props.start !== null) ? props.start : props.date;\n    delete props.date;\n    return props;\n}\nfunction pluckNonDateProps(raw, calendar, leftovers) {\n    var preLeftovers = {};\n    var props = refineProps(raw, NON_DATE_PROPS, {}, preLeftovers);\n    var ui = processUnscopedUiProps(preLeftovers, calendar, leftovers);\n    props.publicId = props.id;\n    delete props.id;\n    props.ui = ui;\n    return props;\n}\nfunction computeIsAllDayDefault(sourceId, calendar) {\n    var res = null;\n    if (sourceId) {\n        var source = calendar.state.eventSources[sourceId];\n        res = source.allDayDefault;\n    }\n    if (res == null) {\n        res = calendar.opt('allDayDefault');\n    }\n    return res;\n}\n\nvar DEF_DEFAULTS = {\n    startTime: '09:00',\n    endTime: '17:00',\n    daysOfWeek: [1, 2, 3, 4, 5],\n    rendering: 'inverse-background',\n    classNames: 'fc-nonbusiness',\n    groupId: '_businessHours' // so multiple defs get grouped\n};\n/*\nTODO: pass around as EventDefHash!!!\n*/\nfunction parseBusinessHours(input, calendar) {\n    return parseEvents(refineInputs(input), '', calendar);\n}\nfunction refineInputs(input) {\n    var rawDefs;\n    if (input === true) {\n        rawDefs = [{}]; // will get DEF_DEFAULTS verbatim\n    }\n    else if (Array.isArray(input)) {\n        // if specifying an array, every sub-definition NEEDS a day-of-week\n        rawDefs = input.filter(function (rawDef) {\n            return rawDef.daysOfWeek;\n        });\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        rawDefs = [input];\n    }\n    else { // is probably false\n        rawDefs = [];\n    }\n    rawDefs = rawDefs.map(function (rawDef) {\n        return __assign({}, DEF_DEFAULTS, rawDef);\n    });\n    return rawDefs;\n}\n\nfunction memoizeRendering(renderFunc, unrenderFunc, dependencies) {\n    if (dependencies === void 0) { dependencies = []; }\n    var dependents = [];\n    var thisContext;\n    var prevArgs;\n    function unrender() {\n        if (prevArgs) {\n            for (var _i = 0, dependents_1 = dependents; _i < dependents_1.length; _i++) {\n                var dependent = dependents_1[_i];\n                dependent.unrender();\n            }\n            if (unrenderFunc) {\n                unrenderFunc.apply(thisContext, prevArgs);\n            }\n            prevArgs = null;\n        }\n    }\n    function res() {\n        if (!prevArgs || !isArraysEqual(prevArgs, arguments)) {\n            unrender();\n            thisContext = this;\n            prevArgs = arguments;\n            renderFunc.apply(this, arguments);\n        }\n    }\n    res.dependents = dependents;\n    res.unrender = unrender;\n    for (var _i = 0, dependencies_1 = dependencies; _i < dependencies_1.length; _i++) {\n        var dependency = dependencies_1[_i];\n        dependency.dependents.push(res);\n    }\n    return res;\n}\n\nvar EMPTY_EVENT_STORE = createEmptyEventStore(); // for purecomponents. TODO: keep elsewhere\nvar Splitter = /** @class */ (function () {\n    function Splitter() {\n        this.getKeysForEventDefs = memoize(this._getKeysForEventDefs);\n        this.splitDateSelection = memoize(this._splitDateSpan);\n        this.splitEventStore = memoize(this._splitEventStore);\n        this.splitIndividualUi = memoize(this._splitIndividualUi);\n        this.splitEventDrag = memoize(this._splitInteraction);\n        this.splitEventResize = memoize(this._splitInteraction);\n        this.eventUiBuilders = {}; // TODO: typescript protection\n    }\n    Splitter.prototype.splitProps = function (props) {\n        var _this = this;\n        var keyInfos = this.getKeyInfo(props);\n        var defKeys = this.getKeysForEventDefs(props.eventStore);\n        var dateSelections = this.splitDateSelection(props.dateSelection);\n        var individualUi = this.splitIndividualUi(props.eventUiBases, defKeys); // the individual *bases*\n        var eventStores = this.splitEventStore(props.eventStore, defKeys);\n        var eventDrags = this.splitEventDrag(props.eventDrag);\n        var eventResizes = this.splitEventResize(props.eventResize);\n        var splitProps = {};\n        this.eventUiBuilders = mapHash(keyInfos, function (info, key) {\n            return _this.eventUiBuilders[key] || memoize(buildEventUiForKey);\n        });\n        for (var key in keyInfos) {\n            var keyInfo = keyInfos[key];\n            var eventStore = eventStores[key] || EMPTY_EVENT_STORE;\n            var buildEventUi = this.eventUiBuilders[key];\n            splitProps[key] = {\n                businessHours: keyInfo.businessHours || props.businessHours,\n                dateSelection: dateSelections[key] || null,\n                eventStore: eventStore,\n                eventUiBases: buildEventUi(props.eventUiBases[''], keyInfo.ui, individualUi[key]),\n                eventSelection: eventStore.instances[props.eventSelection] ? props.eventSelection : '',\n                eventDrag: eventDrags[key] || null,\n                eventResize: eventResizes[key] || null\n            };\n        }\n        return splitProps;\n    };\n    Splitter.prototype._splitDateSpan = function (dateSpan) {\n        var dateSpans = {};\n        if (dateSpan) {\n            var keys = this.getKeysForDateSpan(dateSpan);\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                dateSpans[key] = dateSpan;\n            }\n        }\n        return dateSpans;\n    };\n    Splitter.prototype._getKeysForEventDefs = function (eventStore) {\n        var _this = this;\n        return mapHash(eventStore.defs, function (eventDef) {\n            return _this.getKeysForEventDef(eventDef);\n        });\n    };\n    Splitter.prototype._splitEventStore = function (eventStore, defKeys) {\n        var defs = eventStore.defs, instances = eventStore.instances;\n        var splitStores = {};\n        for (var defId in defs) {\n            for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (!splitStores[key]) {\n                    splitStores[key] = createEmptyEventStore();\n                }\n                splitStores[key].defs[defId] = defs[defId];\n            }\n        }\n        for (var instanceId in instances) {\n            var instance = instances[instanceId];\n            for (var _b = 0, _c = defKeys[instance.defId]; _b < _c.length; _b++) {\n                var key = _c[_b];\n                if (splitStores[key]) { // must have already been created\n                    splitStores[key].instances[instanceId] = instance;\n                }\n            }\n        }\n        return splitStores;\n    };\n    Splitter.prototype._splitIndividualUi = function (eventUiBases, defKeys) {\n        var splitHashes = {};\n        for (var defId in eventUiBases) {\n            if (defId) { // not the '' key\n                for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                    var key = _a[_i];\n                    if (!splitHashes[key]) {\n                        splitHashes[key] = {};\n                    }\n                    splitHashes[key][defId] = eventUiBases[defId];\n                }\n            }\n        }\n        return splitHashes;\n    };\n    Splitter.prototype._splitInteraction = function (interaction) {\n        var splitStates = {};\n        if (interaction) {\n            var affectedStores_1 = this._splitEventStore(interaction.affectedEvents, this._getKeysForEventDefs(interaction.affectedEvents) // can't use cached. might be events from other calendar\n            );\n            // can't rely on defKeys because event data is mutated\n            var mutatedKeysByDefId = this._getKeysForEventDefs(interaction.mutatedEvents);\n            var mutatedStores_1 = this._splitEventStore(interaction.mutatedEvents, mutatedKeysByDefId);\n            var populate = function (key) {\n                if (!splitStates[key]) {\n                    splitStates[key] = {\n                        affectedEvents: affectedStores_1[key] || EMPTY_EVENT_STORE,\n                        mutatedEvents: mutatedStores_1[key] || EMPTY_EVENT_STORE,\n                        isEvent: interaction.isEvent,\n                        origSeg: interaction.origSeg\n                    };\n                }\n            };\n            for (var key in affectedStores_1) {\n                populate(key);\n            }\n            for (var key in mutatedStores_1) {\n                populate(key);\n            }\n        }\n        return splitStates;\n    };\n    return Splitter;\n}());\nfunction buildEventUiForKey(allUi, eventUiForKey, individualUi) {\n    var baseParts = [];\n    if (allUi) {\n        baseParts.push(allUi);\n    }\n    if (eventUiForKey) {\n        baseParts.push(eventUiForKey);\n    }\n    var stuff = {\n        '': combineEventUis(baseParts)\n    };\n    if (individualUi) {\n        __assign(stuff, individualUi);\n    }\n    return stuff;\n}\n\n// Generates HTML for an anchor to another view into the calendar.\n// Will either generate an <a> tag or a non-clickable <span> tag, depending on enabled settings.\n// `gotoOptions` can either be a DateMarker, or an object with the form:\n// { date, type, forceOff }\n// `type` is a view-type like \"day\" or \"week\". default value is \"day\".\n// `attrs` and `innerHtml` are use to generate the rest of the HTML tag.\nfunction buildGotoAnchorHtml(allOptions, dateEnv, gotoOptions, attrs, innerHtml) {\n    var date;\n    var type;\n    var forceOff;\n    var finalOptions;\n    if (gotoOptions instanceof Date) {\n        date = gotoOptions; // a single date-like input\n    }\n    else {\n        date = gotoOptions.date;\n        type = gotoOptions.type;\n        forceOff = gotoOptions.forceOff;\n    }\n    finalOptions = {\n        date: dateEnv.formatIso(date, { omitTime: true }),\n        type: type || 'day'\n    };\n    if (typeof attrs === 'string') {\n        innerHtml = attrs;\n        attrs = null;\n    }\n    attrs = attrs ? ' ' + attrsToStr(attrs) : ''; // will have a leading space\n    innerHtml = innerHtml || '';\n    if (!forceOff && allOptions.navLinks) {\n        return '<a' + attrs +\n            ' data-goto=\"' + htmlEscape(JSON.stringify(finalOptions)) + '\">' +\n            innerHtml +\n            '</a>';\n    }\n    else {\n        return '<span' + attrs + '>' +\n            innerHtml +\n            '</span>';\n    }\n}\nfunction getAllDayHtml(allOptions) {\n    return allOptions.allDayHtml || htmlEscape(allOptions.allDayText);\n}\n// Computes HTML classNames for a single-day element\nfunction getDayClasses(date, dateProfile, context, noThemeHighlight) {\n    var calendar = context.calendar, options = context.options, theme = context.theme, dateEnv = context.dateEnv;\n    var classes = [];\n    var todayStart;\n    var todayEnd;\n    if (!rangeContainsMarker(dateProfile.activeRange, date)) {\n        classes.push('fc-disabled-day');\n    }\n    else {\n        classes.push('fc-' + DAY_IDS[date.getUTCDay()]);\n        if (options.monthMode &&\n            dateEnv.getMonth(date) !== dateEnv.getMonth(dateProfile.currentRange.start)) {\n            classes.push('fc-other-month');\n        }\n        todayStart = startOfDay(calendar.getNow());\n        todayEnd = addDays(todayStart, 1);\n        if (date < todayStart) {\n            classes.push('fc-past');\n        }\n        else if (date >= todayEnd) {\n            classes.push('fc-future');\n        }\n        else {\n            classes.push('fc-today');\n            if (noThemeHighlight !== true) {\n                classes.push(theme.getClass('today'));\n            }\n        }\n    }\n    return classes;\n}\n\n// given a function that resolves a result asynchronously.\n// the function can either call passed-in success and failure callbacks,\n// or it can return a promise.\n// if you need to pass additional params to func, bind them first.\nfunction unpromisify(func, success, failure) {\n    // guard against success/failure callbacks being called more than once\n    // and guard against a promise AND callback being used together.\n    var isResolved = false;\n    var wrappedSuccess = function () {\n        if (!isResolved) {\n            isResolved = true;\n            success.apply(this, arguments);\n        }\n    };\n    var wrappedFailure = function () {\n        if (!isResolved) {\n            isResolved = true;\n            if (failure) {\n                failure.apply(this, arguments);\n            }\n        }\n    };\n    var res = func(wrappedSuccess, wrappedFailure);\n    if (res && typeof res.then === 'function') {\n        res.then(wrappedSuccess, wrappedFailure);\n    }\n}\n\nvar Mixin = /** @class */ (function () {\n    function Mixin() {\n    }\n    // mix into a CLASS\n    Mixin.mixInto = function (destClass) {\n        this.mixIntoObj(destClass.prototype);\n    };\n    // mix into ANY object\n    Mixin.mixIntoObj = function (destObj) {\n        var _this = this;\n        Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n            if (!destObj[name]) { // if destination doesn't already define it\n                destObj[name] = _this.prototype[name];\n            }\n        });\n    };\n    /*\n    will override existing methods\n    TODO: remove! not used anymore\n    */\n    Mixin.mixOver = function (destClass) {\n        var _this = this;\n        Object.getOwnPropertyNames(this.prototype).forEach(function (name) {\n            destClass.prototype[name] = _this.prototype[name];\n        });\n    };\n    return Mixin;\n}());\n\n/*\nUSAGE:\n  import { default as EmitterMixin, EmitterInterface } from './EmitterMixin'\nin class:\n  on: EmitterInterface['on']\n  one: EmitterInterface['one']\n  off: EmitterInterface['off']\n  trigger: EmitterInterface['trigger']\n  triggerWith: EmitterInterface['triggerWith']\n  hasHandlers: EmitterInterface['hasHandlers']\nafter class:\n  EmitterMixin.mixInto(TheClass)\n*/\nvar EmitterMixin = /** @class */ (function (_super) {\n    __extends(EmitterMixin, _super);\n    function EmitterMixin() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmitterMixin.prototype.on = function (type, handler) {\n        addToHash(this._handlers || (this._handlers = {}), type, handler);\n        return this; // for chaining\n    };\n    // todo: add comments\n    EmitterMixin.prototype.one = function (type, handler) {\n        addToHash(this._oneHandlers || (this._oneHandlers = {}), type, handler);\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.off = function (type, handler) {\n        if (this._handlers) {\n            removeFromHash(this._handlers, type, handler);\n        }\n        if (this._oneHandlers) {\n            removeFromHash(this._oneHandlers, type, handler);\n        }\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.trigger = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.triggerWith(type, this, args);\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.triggerWith = function (type, context, args) {\n        if (this._handlers) {\n            applyAll(this._handlers[type], context, args);\n        }\n        if (this._oneHandlers) {\n            applyAll(this._oneHandlers[type], context, args);\n            delete this._oneHandlers[type]; // will never fire again\n        }\n        return this; // for chaining\n    };\n    EmitterMixin.prototype.hasHandlers = function (type) {\n        return (this._handlers && this._handlers[type] && this._handlers[type].length) ||\n            (this._oneHandlers && this._oneHandlers[type] && this._oneHandlers[type].length);\n    };\n    return EmitterMixin;\n}(Mixin));\nfunction addToHash(hash, type, handler) {\n    (hash[type] || (hash[type] = []))\n        .push(handler);\n}\nfunction removeFromHash(hash, type, handler) {\n    if (handler) {\n        if (hash[type]) {\n            hash[type] = hash[type].filter(function (func) {\n                return func !== handler;\n            });\n        }\n    }\n    else {\n        delete hash[type]; // remove all handler funcs for this type\n    }\n}\n\n/*\nRecords offset information for a set of elements, relative to an origin element.\nCan record the left/right OR the top/bottom OR both.\nProvides methods for querying the cache by position.\n*/\nvar PositionCache = /** @class */ (function () {\n    function PositionCache(originEl, els, isHorizontal, isVertical) {\n        this.originEl = originEl;\n        this.els = els;\n        this.isHorizontal = isHorizontal;\n        this.isVertical = isVertical;\n    }\n    // Queries the els for coordinates and stores them.\n    // Call this method before using and of the get* methods below.\n    PositionCache.prototype.build = function () {\n        var originEl = this.originEl;\n        var originClientRect = this.originClientRect =\n            originEl.getBoundingClientRect(); // relative to viewport top-left\n        if (this.isHorizontal) {\n            this.buildElHorizontals(originClientRect.left);\n        }\n        if (this.isVertical) {\n            this.buildElVerticals(originClientRect.top);\n        }\n    };\n    // Populates the left/right internal coordinate arrays\n    PositionCache.prototype.buildElHorizontals = function (originClientLeft) {\n        var lefts = [];\n        var rights = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            lefts.push(rect.left - originClientLeft);\n            rights.push(rect.right - originClientLeft);\n        }\n        this.lefts = lefts;\n        this.rights = rights;\n    };\n    // Populates the top/bottom internal coordinate arrays\n    PositionCache.prototype.buildElVerticals = function (originClientTop) {\n        var tops = [];\n        var bottoms = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            tops.push(rect.top - originClientTop);\n            bottoms.push(rect.bottom - originClientTop);\n        }\n        this.tops = tops;\n        this.bottoms = bottoms;\n    };\n    // Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.leftToIndex = function (leftPosition) {\n        var lefts = this.lefts;\n        var rights = this.rights;\n        var len = lefts.length;\n        var i;\n        for (i = 0; i < len; i++) {\n            if (leftPosition >= lefts[i] && leftPosition < rights[i]) {\n                return i;\n            }\n        }\n    };\n    // Given a top offset (from document top), returns the index of the el that it vertically intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.topToIndex = function (topPosition) {\n        var tops = this.tops;\n        var bottoms = this.bottoms;\n        var len = tops.length;\n        var i;\n        for (i = 0; i < len; i++) {\n            if (topPosition >= tops[i] && topPosition < bottoms[i]) {\n                return i;\n            }\n        }\n    };\n    // Gets the width of the element at the given index\n    PositionCache.prototype.getWidth = function (leftIndex) {\n        return this.rights[leftIndex] - this.lefts[leftIndex];\n    };\n    // Gets the height of the element at the given index\n    PositionCache.prototype.getHeight = function (topIndex) {\n        return this.bottoms[topIndex] - this.tops[topIndex];\n    };\n    return PositionCache;\n}());\n\n/*\nAn object for getting/setting scroll-related information for an element.\nInternally, this is done very differently for window versus DOM element,\nso this object serves as a common interface.\n*/\nvar ScrollController = /** @class */ (function () {\n    function ScrollController() {\n    }\n    ScrollController.prototype.getMaxScrollTop = function () {\n        return this.getScrollHeight() - this.getClientHeight();\n    };\n    ScrollController.prototype.getMaxScrollLeft = function () {\n        return this.getScrollWidth() - this.getClientWidth();\n    };\n    ScrollController.prototype.canScrollVertically = function () {\n        return this.getMaxScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollHorizontally = function () {\n        return this.getMaxScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollUp = function () {\n        return this.getScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollDown = function () {\n        return this.getScrollTop() < this.getMaxScrollTop();\n    };\n    ScrollController.prototype.canScrollLeft = function () {\n        return this.getScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollRight = function () {\n        return this.getScrollLeft() < this.getMaxScrollLeft();\n    };\n    return ScrollController;\n}());\nvar ElementScrollController = /** @class */ (function (_super) {\n    __extends(ElementScrollController, _super);\n    function ElementScrollController(el) {\n        var _this = _super.call(this) || this;\n        _this.el = el;\n        return _this;\n    }\n    ElementScrollController.prototype.getScrollTop = function () {\n        return this.el.scrollTop;\n    };\n    ElementScrollController.prototype.getScrollLeft = function () {\n        return this.el.scrollLeft;\n    };\n    ElementScrollController.prototype.setScrollTop = function (top) {\n        this.el.scrollTop = top;\n    };\n    ElementScrollController.prototype.setScrollLeft = function (left) {\n        this.el.scrollLeft = left;\n    };\n    ElementScrollController.prototype.getScrollWidth = function () {\n        return this.el.scrollWidth;\n    };\n    ElementScrollController.prototype.getScrollHeight = function () {\n        return this.el.scrollHeight;\n    };\n    ElementScrollController.prototype.getClientHeight = function () {\n        return this.el.clientHeight;\n    };\n    ElementScrollController.prototype.getClientWidth = function () {\n        return this.el.clientWidth;\n    };\n    return ElementScrollController;\n}(ScrollController));\nvar WindowScrollController = /** @class */ (function (_super) {\n    __extends(WindowScrollController, _super);\n    function WindowScrollController() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WindowScrollController.prototype.getScrollTop = function () {\n        return window.pageYOffset;\n    };\n    WindowScrollController.prototype.getScrollLeft = function () {\n        return window.pageXOffset;\n    };\n    WindowScrollController.prototype.setScrollTop = function (n) {\n        window.scroll(window.pageXOffset, n);\n    };\n    WindowScrollController.prototype.setScrollLeft = function (n) {\n        window.scroll(n, window.pageYOffset);\n    };\n    WindowScrollController.prototype.getScrollWidth = function () {\n        return document.documentElement.scrollWidth;\n    };\n    WindowScrollController.prototype.getScrollHeight = function () {\n        return document.documentElement.scrollHeight;\n    };\n    WindowScrollController.prototype.getClientHeight = function () {\n        return document.documentElement.clientHeight;\n    };\n    WindowScrollController.prototype.getClientWidth = function () {\n        return document.documentElement.clientWidth;\n    };\n    return WindowScrollController;\n}(ScrollController));\n\n/*\nEmbodies a div that has potential scrollbars\n*/\nvar ScrollComponent = /** @class */ (function (_super) {\n    __extends(ScrollComponent, _super);\n    function ScrollComponent(overflowX, overflowY) {\n        var _this = _super.call(this, createElement('div', {\n            className: 'fc-scroller'\n        })) || this;\n        _this.overflowX = overflowX;\n        _this.overflowY = overflowY;\n        _this.applyOverflow();\n        return _this;\n    }\n    // sets to natural height, unlocks overflow\n    ScrollComponent.prototype.clear = function () {\n        this.setHeight('auto');\n        this.applyOverflow();\n    };\n    ScrollComponent.prototype.destroy = function () {\n        removeElement(this.el);\n    };\n    // Overflow\n    // -----------------------------------------------------------------------------------------------------------------\n    ScrollComponent.prototype.applyOverflow = function () {\n        applyStyle(this.el, {\n            overflowX: this.overflowX,\n            overflowY: this.overflowY\n        });\n    };\n    // Causes any 'auto' overflow values to resolves to 'scroll' or 'hidden'.\n    // Useful for preserving scrollbar widths regardless of future resizes.\n    // Can pass in scrollbarWidths for optimization.\n    ScrollComponent.prototype.lockOverflow = function (scrollbarWidths) {\n        var overflowX = this.overflowX;\n        var overflowY = this.overflowY;\n        scrollbarWidths = scrollbarWidths || this.getScrollbarWidths();\n        if (overflowX === 'auto') {\n            overflowX = (scrollbarWidths.bottom || // horizontal scrollbars?\n                this.canScrollHorizontally() // OR scrolling pane with massless scrollbars?\n            ) ? 'scroll' : 'hidden';\n        }\n        if (overflowY === 'auto') {\n            overflowY = (scrollbarWidths.left || scrollbarWidths.right || // horizontal scrollbars?\n                this.canScrollVertically() // OR scrolling pane with massless scrollbars?\n            ) ? 'scroll' : 'hidden';\n        }\n        applyStyle(this.el, { overflowX: overflowX, overflowY: overflowY });\n    };\n    ScrollComponent.prototype.setHeight = function (height) {\n        applyStyleProp(this.el, 'height', height);\n    };\n    ScrollComponent.prototype.getScrollbarWidths = function () {\n        var edges = computeEdges(this.el);\n        return {\n            left: edges.scrollbarLeft,\n            right: edges.scrollbarRight,\n            bottom: edges.scrollbarBottom\n        };\n    };\n    return ScrollComponent;\n}(ElementScrollController));\n\nvar Theme = /** @class */ (function () {\n    function Theme(calendarOptions) {\n        this.calendarOptions = calendarOptions;\n        this.processIconOverride();\n    }\n    Theme.prototype.processIconOverride = function () {\n        if (this.iconOverrideOption) {\n            this.setIconOverride(this.calendarOptions[this.iconOverrideOption]);\n        }\n    };\n    Theme.prototype.setIconOverride = function (iconOverrideHash) {\n        var iconClassesCopy;\n        var buttonName;\n        if (typeof iconOverrideHash === 'object' && iconOverrideHash) { // non-null object\n            iconClassesCopy = __assign({}, this.iconClasses);\n            for (buttonName in iconOverrideHash) {\n                iconClassesCopy[buttonName] = this.applyIconOverridePrefix(iconOverrideHash[buttonName]);\n            }\n            this.iconClasses = iconClassesCopy;\n        }\n        else if (iconOverrideHash === false) {\n            this.iconClasses = {};\n        }\n    };\n    Theme.prototype.applyIconOverridePrefix = function (className) {\n        var prefix = this.iconOverridePrefix;\n        if (prefix && className.indexOf(prefix) !== 0) { // if not already present\n            className = prefix + className;\n        }\n        return className;\n    };\n    Theme.prototype.getClass = function (key) {\n        return this.classes[key] || '';\n    };\n    Theme.prototype.getIconClass = function (buttonName) {\n        var className = this.iconClasses[buttonName];\n        if (className) {\n            return this.baseIconClass + ' ' + className;\n        }\n        return '';\n    };\n    Theme.prototype.getCustomButtonIconClass = function (customButtonProps) {\n        var className;\n        if (this.iconOverrideCustomButtonOption) {\n            className = customButtonProps[this.iconOverrideCustomButtonOption];\n            if (className) {\n                return this.baseIconClass + ' ' + this.applyIconOverridePrefix(className);\n            }\n        }\n        return '';\n    };\n    return Theme;\n}());\nTheme.prototype.classes = {};\nTheme.prototype.iconClasses = {};\nTheme.prototype.baseIconClass = '';\nTheme.prototype.iconOverridePrefix = '';\n\nvar guid = 0;\nvar ComponentContext = /** @class */ (function () {\n    function ComponentContext(calendar, theme, dateEnv, options, view) {\n        this.calendar = calendar;\n        this.theme = theme;\n        this.dateEnv = dateEnv;\n        this.options = options;\n        this.view = view;\n        this.isRtl = options.dir === 'rtl';\n        this.eventOrderSpecs = parseFieldSpecs(options.eventOrder);\n        this.nextDayThreshold = createDuration(options.nextDayThreshold);\n    }\n    ComponentContext.prototype.extend = function (options, view) {\n        return new ComponentContext(this.calendar, this.theme, this.dateEnv, options || this.options, view || this.view);\n    };\n    return ComponentContext;\n}());\nvar Component = /** @class */ (function () {\n    function Component() {\n        this.uid = String(guid++);\n    }\n    Component.addEqualityFuncs = function (newFuncs) {\n        this.prototype.equalityFuncs = __assign({}, this.prototype.equalityFuncs, newFuncs);\n    };\n    Component.prototype.receiveProps = function (props, context) {\n        var oldContext = this.context;\n        this.context = context;\n        if (!oldContext) {\n            this.firstContext(context);\n        }\n        var _a = recycleProps(this.props || {}, props, this.equalityFuncs), anyChanges = _a.anyChanges, comboProps = _a.comboProps;\n        this.props = comboProps;\n        if (anyChanges) {\n            if (oldContext) {\n                this.beforeUpdate();\n            }\n            this.render(comboProps, context);\n            if (oldContext) {\n                this.afterUpdate();\n            }\n        }\n    };\n    Component.prototype.render = function (props, context) {\n    };\n    Component.prototype.firstContext = function (context) {\n    };\n    Component.prototype.beforeUpdate = function () {\n    };\n    Component.prototype.afterUpdate = function () {\n    };\n    // after destroy is called, this component won't ever be used again\n    Component.prototype.destroy = function () {\n    };\n    return Component;\n}());\nComponent.prototype.equalityFuncs = {};\n/*\nReuses old values when equal. If anything is unequal, returns newProps as-is.\nGreat for PureComponent, but won't be feasible with React, so just eliminate and use React's DOM diffing.\n*/\nfunction recycleProps(oldProps, newProps, equalityFuncs) {\n    var comboProps = {}; // some old, some new\n    var anyChanges = false;\n    for (var key in newProps) {\n        if (key in oldProps && (oldProps[key] === newProps[key] ||\n            (equalityFuncs[key] && equalityFuncs[key](oldProps[key], newProps[key])))) {\n            // equal to old? use old prop\n            comboProps[key] = oldProps[key];\n        }\n        else {\n            comboProps[key] = newProps[key];\n            anyChanges = true;\n        }\n    }\n    for (var key in oldProps) {\n        if (!(key in newProps)) {\n            anyChanges = true;\n            break;\n        }\n    }\n    return { anyChanges: anyChanges, comboProps: comboProps };\n}\n\n/*\nPURPOSES:\n- hook up to fg, fill, and mirror renderers\n- interface for dragging and hits\n*/\nvar DateComponent = /** @class */ (function (_super) {\n    __extends(DateComponent, _super);\n    function DateComponent(el) {\n        var _this = _super.call(this) || this;\n        _this.el = el;\n        return _this;\n    }\n    DateComponent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        removeElement(this.el);\n    };\n    // Hit System\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.buildPositionCaches = function () {\n    };\n    DateComponent.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        return null; // this should be abstract\n    };\n    // Validation\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.isInteractionValid = function (interaction) {\n        var calendar = this.context.calendar;\n        var dateProfile = this.props.dateProfile; // HACK\n        var instances = interaction.mutatedEvents.instances;\n        if (dateProfile) { // HACK for DayTile\n            for (var instanceId in instances) {\n                if (!rangeContainsRange(dateProfile.validRange, instances[instanceId].range)) {\n                    return false;\n                }\n            }\n        }\n        return isInteractionValid(interaction, calendar);\n    };\n    DateComponent.prototype.isDateSelectionValid = function (selection) {\n        var calendar = this.context.calendar;\n        var dateProfile = this.props.dateProfile; // HACK\n        if (dateProfile && // HACK for DayTile\n            !rangeContainsRange(dateProfile.validRange, selection.range)) {\n            return false;\n        }\n        return isDateSelectionValid(selection, calendar);\n    };\n    // Pointer Interaction Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.isValidSegDownEl = function (el) {\n        return !this.props.eventDrag && // HACK\n            !this.props.eventResize && // HACK\n            !elementClosest(el, '.fc-mirror') &&\n            (this.isPopover() || !this.isInPopover(el));\n        // ^above line ensures we don't detect a seg interaction within a nested component.\n        // it's a HACK because it only supports a popover as the nested component.\n    };\n    DateComponent.prototype.isValidDateDownEl = function (el) {\n        var segEl = elementClosest(el, this.fgSegSelector);\n        return (!segEl || segEl.classList.contains('fc-mirror')) &&\n            !elementClosest(el, '.fc-more') && // a \"more..\" link\n            !elementClosest(el, 'a[data-goto]') && // a clickable nav link\n            !this.isInPopover(el);\n    };\n    DateComponent.prototype.isPopover = function () {\n        return this.el.classList.contains('fc-popover');\n    };\n    DateComponent.prototype.isInPopover = function (el) {\n        return Boolean(elementClosest(el, '.fc-popover'));\n    };\n    return DateComponent;\n}(Component));\nDateComponent.prototype.fgSegSelector = '.fc-event-container > *';\nDateComponent.prototype.bgSegSelector = '.fc-bgevent:not(.fc-nonbusiness)';\n\nvar uid$1 = 0;\nfunction createPlugin(input) {\n    return {\n        id: String(uid$1++),\n        deps: input.deps || [],\n        reducers: input.reducers || [],\n        eventDefParsers: input.eventDefParsers || [],\n        isDraggableTransformers: input.isDraggableTransformers || [],\n        eventDragMutationMassagers: input.eventDragMutationMassagers || [],\n        eventDefMutationAppliers: input.eventDefMutationAppliers || [],\n        dateSelectionTransformers: input.dateSelectionTransformers || [],\n        datePointTransforms: input.datePointTransforms || [],\n        dateSpanTransforms: input.dateSpanTransforms || [],\n        views: input.views || {},\n        viewPropsTransformers: input.viewPropsTransformers || [],\n        isPropsValid: input.isPropsValid || null,\n        externalDefTransforms: input.externalDefTransforms || [],\n        eventResizeJoinTransforms: input.eventResizeJoinTransforms || [],\n        viewContainerModifiers: input.viewContainerModifiers || [],\n        eventDropTransformers: input.eventDropTransformers || [],\n        componentInteractions: input.componentInteractions || [],\n        calendarInteractions: input.calendarInteractions || [],\n        themeClasses: input.themeClasses || {},\n        eventSourceDefs: input.eventSourceDefs || [],\n        cmdFormatter: input.cmdFormatter,\n        recurringTypes: input.recurringTypes || [],\n        namedTimeZonedImpl: input.namedTimeZonedImpl,\n        defaultView: input.defaultView || '',\n        elementDraggingImpl: input.elementDraggingImpl,\n        optionChangeHandlers: input.optionChangeHandlers || {}\n    };\n}\nvar PluginSystem = /** @class */ (function () {\n    function PluginSystem() {\n        this.hooks = {\n            reducers: [],\n            eventDefParsers: [],\n            isDraggableTransformers: [],\n            eventDragMutationMassagers: [],\n            eventDefMutationAppliers: [],\n            dateSelectionTransformers: [],\n            datePointTransforms: [],\n            dateSpanTransforms: [],\n            views: {},\n            viewPropsTransformers: [],\n            isPropsValid: null,\n            externalDefTransforms: [],\n            eventResizeJoinTransforms: [],\n            viewContainerModifiers: [],\n            eventDropTransformers: [],\n            componentInteractions: [],\n            calendarInteractions: [],\n            themeClasses: {},\n            eventSourceDefs: [],\n            cmdFormatter: null,\n            recurringTypes: [],\n            namedTimeZonedImpl: null,\n            defaultView: '',\n            elementDraggingImpl: null,\n            optionChangeHandlers: {}\n        };\n        this.addedHash = {};\n    }\n    PluginSystem.prototype.add = function (plugin) {\n        if (!this.addedHash[plugin.id]) {\n            this.addedHash[plugin.id] = true;\n            for (var _i = 0, _a = plugin.deps; _i < _a.length; _i++) {\n                var dep = _a[_i];\n                this.add(dep);\n            }\n            this.hooks = combineHooks(this.hooks, plugin);\n        }\n    };\n    return PluginSystem;\n}());\nfunction combineHooks(hooks0, hooks1) {\n    return {\n        reducers: hooks0.reducers.concat(hooks1.reducers),\n        eventDefParsers: hooks0.eventDefParsers.concat(hooks1.eventDefParsers),\n        isDraggableTransformers: hooks0.isDraggableTransformers.concat(hooks1.isDraggableTransformers),\n        eventDragMutationMassagers: hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),\n        eventDefMutationAppliers: hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),\n        dateSelectionTransformers: hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),\n        datePointTransforms: hooks0.datePointTransforms.concat(hooks1.datePointTransforms),\n        dateSpanTransforms: hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),\n        views: __assign({}, hooks0.views, hooks1.views),\n        viewPropsTransformers: hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),\n        isPropsValid: hooks1.isPropsValid || hooks0.isPropsValid,\n        externalDefTransforms: hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),\n        eventResizeJoinTransforms: hooks0.eventResizeJoinTransforms.concat(hooks1.eventResizeJoinTransforms),\n        viewContainerModifiers: hooks0.viewContainerModifiers.concat(hooks1.viewContainerModifiers),\n        eventDropTransformers: hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),\n        calendarInteractions: hooks0.calendarInteractions.concat(hooks1.calendarInteractions),\n        componentInteractions: hooks0.componentInteractions.concat(hooks1.componentInteractions),\n        themeClasses: __assign({}, hooks0.themeClasses, hooks1.themeClasses),\n        eventSourceDefs: hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),\n        cmdFormatter: hooks1.cmdFormatter || hooks0.cmdFormatter,\n        recurringTypes: hooks0.recurringTypes.concat(hooks1.recurringTypes),\n        namedTimeZonedImpl: hooks1.namedTimeZonedImpl || hooks0.namedTimeZonedImpl,\n        defaultView: hooks0.defaultView || hooks1.defaultView,\n        elementDraggingImpl: hooks0.elementDraggingImpl || hooks1.elementDraggingImpl,\n        optionChangeHandlers: __assign({}, hooks0.optionChangeHandlers, hooks1.optionChangeHandlers)\n    };\n}\n\nvar eventSourceDef = {\n    ignoreRange: true,\n    parseMeta: function (raw) {\n        if (Array.isArray(raw)) { // short form\n            return raw;\n        }\n        else if (Array.isArray(raw.events)) {\n            return raw.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success) {\n        success({\n            rawEvents: arg.eventSource.meta\n        });\n    }\n};\nvar ArrayEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef]\n});\n\nvar eventSourceDef$1 = {\n    parseMeta: function (raw) {\n        if (typeof raw === 'function') { // short form\n            return raw;\n        }\n        else if (typeof raw.events === 'function') {\n            return raw.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success, failure) {\n        var dateEnv = arg.calendar.dateEnv;\n        var func = arg.eventSource.meta;\n        unpromisify(func.bind(null, {\n            start: dateEnv.toDate(arg.range.start),\n            end: dateEnv.toDate(arg.range.end),\n            startStr: dateEnv.formatIso(arg.range.start),\n            endStr: dateEnv.formatIso(arg.range.end),\n            timeZone: dateEnv.timeZone\n        }), function (rawEvents) {\n            success({ rawEvents: rawEvents }); // needs an object response\n        }, failure // send errorObj directly to failure callback\n        );\n    }\n};\nvar FuncEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$1]\n});\n\nfunction requestJson(method, url, params, successCallback, failureCallback) {\n    method = method.toUpperCase();\n    var body = null;\n    if (method === 'GET') {\n        url = injectQueryStringParams(url, params);\n    }\n    else {\n        body = encodeParams(params);\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open(method, url, true);\n    if (method !== 'GET') {\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n    xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 400) {\n            try {\n                var res = JSON.parse(xhr.responseText);\n                successCallback(res, xhr);\n            }\n            catch (err) {\n                failureCallback('Failure parsing JSON', xhr);\n            }\n        }\n        else {\n            failureCallback('Request failed', xhr);\n        }\n    };\n    xhr.onerror = function () {\n        failureCallback('Request failed', xhr);\n    };\n    xhr.send(body);\n}\nfunction injectQueryStringParams(url, params) {\n    return url +\n        (url.indexOf('?') === -1 ? '?' : '&') +\n        encodeParams(params);\n}\nfunction encodeParams(params) {\n    var parts = [];\n    for (var key in params) {\n        parts.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));\n    }\n    return parts.join('&');\n}\n\nvar eventSourceDef$2 = {\n    parseMeta: function (raw) {\n        if (typeof raw === 'string') { // short form\n            raw = { url: raw };\n        }\n        else if (!raw || typeof raw !== 'object' || !raw.url) {\n            return null;\n        }\n        return {\n            url: raw.url,\n            method: (raw.method || 'GET').toUpperCase(),\n            extraParams: raw.extraParams,\n            startParam: raw.startParam,\n            endParam: raw.endParam,\n            timeZoneParam: raw.timeZoneParam\n        };\n    },\n    fetch: function (arg, success, failure) {\n        var meta = arg.eventSource.meta;\n        var requestParams = buildRequestParams(meta, arg.range, arg.calendar);\n        requestJson(meta.method, meta.url, requestParams, function (rawEvents, xhr) {\n            success({ rawEvents: rawEvents, xhr: xhr });\n        }, function (errorMessage, xhr) {\n            failure({ message: errorMessage, xhr: xhr });\n        });\n    }\n};\nvar JsonFeedEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$2]\n});\nfunction buildRequestParams(meta, range, calendar) {\n    var dateEnv = calendar.dateEnv;\n    var startParam;\n    var endParam;\n    var timeZoneParam;\n    var customRequestParams;\n    var params = {};\n    startParam = meta.startParam;\n    if (startParam == null) {\n        startParam = calendar.opt('startParam');\n    }\n    endParam = meta.endParam;\n    if (endParam == null) {\n        endParam = calendar.opt('endParam');\n    }\n    timeZoneParam = meta.timeZoneParam;\n    if (timeZoneParam == null) {\n        timeZoneParam = calendar.opt('timeZoneParam');\n    }\n    // retrieve any outbound GET/POST data from the options\n    if (typeof meta.extraParams === 'function') {\n        // supplied as a function that returns a key/value object\n        customRequestParams = meta.extraParams();\n    }\n    else {\n        // probably supplied as a straight key/value object\n        customRequestParams = meta.extraParams || {};\n    }\n    __assign(params, customRequestParams);\n    params[startParam] = dateEnv.formatIso(range.start);\n    params[endParam] = dateEnv.formatIso(range.end);\n    if (dateEnv.timeZone !== 'local') {\n        params[timeZoneParam] = dateEnv.timeZone;\n    }\n    return params;\n}\n\nvar recurring = {\n    parse: function (rawEvent, leftoverProps, dateEnv) {\n        var createMarker = dateEnv.createMarker.bind(dateEnv);\n        var processors = {\n            daysOfWeek: null,\n            startTime: createDuration,\n            endTime: createDuration,\n            startRecur: createMarker,\n            endRecur: createMarker\n        };\n        var props = refineProps(rawEvent, processors, {}, leftoverProps);\n        var anyValid = false;\n        for (var propName in props) {\n            if (props[propName] != null) {\n                anyValid = true;\n                break;\n            }\n        }\n        if (anyValid) {\n            var duration = null;\n            if ('duration' in leftoverProps) {\n                duration = createDuration(leftoverProps.duration);\n                delete leftoverProps.duration;\n            }\n            if (!duration && props.startTime && props.endTime) {\n                duration = subtractDurations(props.endTime, props.startTime);\n            }\n            return {\n                allDayGuess: Boolean(!props.startTime && !props.endTime),\n                duration: duration,\n                typeData: props // doesn't need endTime anymore but oh well\n            };\n        }\n        return null;\n    },\n    expand: function (typeData, framingRange, dateEnv) {\n        var clippedFramingRange = intersectRanges(framingRange, { start: typeData.startRecur, end: typeData.endRecur });\n        if (clippedFramingRange) {\n            return expandRanges(typeData.daysOfWeek, typeData.startTime, clippedFramingRange, dateEnv);\n        }\n        else {\n            return [];\n        }\n    }\n};\nvar SimpleRecurrencePlugin = createPlugin({\n    recurringTypes: [recurring]\n});\nfunction expandRanges(daysOfWeek, startTime, framingRange, dateEnv) {\n    var dowHash = daysOfWeek ? arrayToHash(daysOfWeek) : null;\n    var dayMarker = startOfDay(framingRange.start);\n    var endMarker = framingRange.end;\n    var instanceStarts = [];\n    while (dayMarker < endMarker) {\n        var instanceStart \n        // if everyday, or this particular day-of-week\n        = void 0;\n        // if everyday, or this particular day-of-week\n        if (!dowHash || dowHash[dayMarker.getUTCDay()]) {\n            if (startTime) {\n                instanceStart = dateEnv.add(dayMarker, startTime);\n            }\n            else {\n                instanceStart = dayMarker;\n            }\n            instanceStarts.push(instanceStart);\n        }\n        dayMarker = addDays(dayMarker, 1);\n    }\n    return instanceStarts;\n}\n\nvar DefaultOptionChangeHandlers = createPlugin({\n    optionChangeHandlers: {\n        events: function (events, calendar, deepEqual) {\n            handleEventSources([events], calendar, deepEqual);\n        },\n        eventSources: handleEventSources,\n        plugins: handlePlugins\n    }\n});\nfunction handleEventSources(inputs, calendar, deepEqual) {\n    var unfoundSources = hashValuesToArray(calendar.state.eventSources);\n    var newInputs = [];\n    for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n        var input = inputs_1[_i];\n        var inputFound = false;\n        for (var i = 0; i < unfoundSources.length; i++) {\n            if (deepEqual(unfoundSources[i]._raw, input)) {\n                unfoundSources.splice(i, 1); // delete\n                inputFound = true;\n                break;\n            }\n        }\n        if (!inputFound) {\n            newInputs.push(input);\n        }\n    }\n    for (var _a = 0, unfoundSources_1 = unfoundSources; _a < unfoundSources_1.length; _a++) {\n        var unfoundSource = unfoundSources_1[_a];\n        calendar.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: unfoundSource.sourceId\n        });\n    }\n    for (var _b = 0, newInputs_1 = newInputs; _b < newInputs_1.length; _b++) {\n        var newInput = newInputs_1[_b];\n        calendar.addEventSource(newInput);\n    }\n}\n// shortcoming: won't remove plugins\nfunction handlePlugins(inputs, calendar) {\n    calendar.addPluginInputs(inputs); // will gracefully handle duplicates\n}\n\nvar config = {}; // TODO: make these options\nvar globalDefaults = {\n    defaultRangeSeparator: ' - ',\n    titleRangeSeparator: ' \\u2013 ',\n    defaultTimedEventDuration: '01:00:00',\n    defaultAllDayEventDuration: { day: 1 },\n    forceEventDuration: false,\n    nextDayThreshold: '00:00:00',\n    // display\n    columnHeader: true,\n    defaultView: '',\n    aspectRatio: 1.35,\n    header: {\n        left: 'title',\n        center: '',\n        right: 'today prev,next'\n    },\n    weekends: true,\n    weekNumbers: false,\n    weekNumberCalculation: 'local',\n    editable: false,\n    // nowIndicator: false,\n    scrollTime: '06:00:00',\n    minTime: '00:00:00',\n    maxTime: '24:00:00',\n    showNonCurrentDates: true,\n    // event ajax\n    lazyFetching: true,\n    startParam: 'start',\n    endParam: 'end',\n    timeZoneParam: 'timeZone',\n    timeZone: 'local',\n    // allDayDefault: undefined,\n    // locale\n    locales: [],\n    locale: '',\n    // dir: will get this from the default locale\n    // buttonIcons: null,\n    // allows setting a min-height to the event segment to prevent short events overlapping each other\n    timeGridEventMinHeight: 0,\n    themeSystem: 'standard',\n    // eventResizableFromStart: false,\n    dragRevertDuration: 500,\n    dragScroll: true,\n    allDayMaintainDuration: false,\n    // selectable: false,\n    unselectAuto: true,\n    // selectMinDistance: 0,\n    dropAccept: '*',\n    eventOrder: 'start,-duration,allDay,title',\n    // ^ if start tie, longer events go before shorter. final tie-breaker is title text\n    // rerenderDelay: null,\n    eventLimit: false,\n    eventLimitClick: 'popover',\n    dayPopoverFormat: { month: 'long', day: 'numeric', year: 'numeric' },\n    handleWindowResize: true,\n    windowResizeDelay: 100,\n    longPressDelay: 1000,\n    eventDragMinDistance: 5 // only applies to mouse\n};\nvar rtlDefaults = {\n    header: {\n        left: 'next,prev today',\n        center: '',\n        right: 'title'\n    },\n    buttonIcons: {\n        // TODO: make RTL support the responibility of the theme\n        prev: 'fc-icon-chevron-right',\n        next: 'fc-icon-chevron-left',\n        prevYear: 'fc-icon-chevrons-right',\n        nextYear: 'fc-icon-chevrons-left'\n    }\n};\nvar complexOptions = [\n    'header',\n    'footer',\n    'buttonText',\n    'buttonIcons'\n];\n// Merges an array of option objects into a single object\nfunction mergeOptions(optionObjs) {\n    return mergeProps(optionObjs, complexOptions);\n}\n// TODO: move this stuff to a \"plugin\"-related file...\nvar INTERNAL_PLUGINS = [\n    ArrayEventSourcePlugin,\n    FuncEventSourcePlugin,\n    JsonFeedEventSourcePlugin,\n    SimpleRecurrencePlugin,\n    DefaultOptionChangeHandlers\n];\nfunction refinePluginDefs(pluginInputs) {\n    var plugins = [];\n    for (var _i = 0, pluginInputs_1 = pluginInputs; _i < pluginInputs_1.length; _i++) {\n        var pluginInput = pluginInputs_1[_i];\n        if (typeof pluginInput === 'string') {\n            var globalName = 'FullCalendar' + capitaliseFirstLetter(pluginInput);\n            if (!window[globalName]) {\n                console.warn('Plugin file not loaded for ' + pluginInput);\n            }\n            else {\n                plugins.push(window[globalName].default); // is an ES6 module\n            }\n        }\n        else {\n            plugins.push(pluginInput);\n        }\n    }\n    return INTERNAL_PLUGINS.concat(plugins);\n}\n\nvar RAW_EN_LOCALE = {\n    code: 'en',\n    week: {\n        dow: 0,\n        doy: 4 // 4 days need to be within the year to be considered the first week\n    },\n    dir: 'ltr',\n    buttonText: {\n        prev: 'prev',\n        next: 'next',\n        prevYear: 'prev year',\n        nextYear: 'next year',\n        year: 'year',\n        today: 'today',\n        month: 'month',\n        week: 'week',\n        day: 'day',\n        list: 'list'\n    },\n    weekLabel: 'W',\n    allDayText: 'all-day',\n    eventLimitText: 'more',\n    noEventsMessage: 'No events to display'\n};\nfunction parseRawLocales(explicitRawLocales) {\n    var defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n    var globalArray = window['FullCalendarLocalesAll'] || []; // from locales-all.js\n    var globalObject = window['FullCalendarLocales'] || {}; // from locales/*.js. keys are meaningless\n    var allRawLocales = globalArray.concat(// globalArray is low prio\n    hashValuesToArray(globalObject), // medium prio\n    explicitRawLocales // highest prio\n    );\n    var rawLocaleMap = {\n        en: RAW_EN_LOCALE // necessary?\n    };\n    for (var _i = 0, allRawLocales_1 = allRawLocales; _i < allRawLocales_1.length; _i++) {\n        var rawLocale = allRawLocales_1[_i];\n        rawLocaleMap[rawLocale.code] = rawLocale;\n    }\n    return {\n        map: rawLocaleMap,\n        defaultCode: defaultCode\n    };\n}\nfunction buildLocale(inputSingular, available) {\n    if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n        return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n    }\n    else {\n        return queryLocale(inputSingular, available);\n    }\n}\nfunction queryLocale(codeArg, available) {\n    var codes = [].concat(codeArg || []); // will convert to array\n    var raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n    return parseLocale(codeArg, codes, raw);\n}\nfunction queryRawLocale(codes, available) {\n    for (var i = 0; i < codes.length; i++) {\n        var parts = codes[i].toLocaleLowerCase().split('-');\n        for (var j = parts.length; j > 0; j--) {\n            var simpleId = parts.slice(0, j).join('-');\n            if (available[simpleId]) {\n                return available[simpleId];\n            }\n        }\n    }\n    return null;\n}\nfunction parseLocale(codeArg, codes, raw) {\n    var merged = mergeProps([RAW_EN_LOCALE, raw], ['buttonText']);\n    delete merged.code; // don't want this part of the options\n    var week = merged.week;\n    delete merged.week;\n    return {\n        codeArg: codeArg,\n        codes: codes,\n        week: week,\n        simpleNumberFormat: new Intl.NumberFormat(codeArg),\n        options: merged\n    };\n}\n\nvar OptionsManager = /** @class */ (function () {\n    function OptionsManager(overrides) {\n        this.overrides = __assign({}, overrides); // make a copy\n        this.dynamicOverrides = {};\n        this.compute();\n    }\n    OptionsManager.prototype.mutate = function (updates, removals, isDynamic) {\n        if (!Object.keys(updates).length && !removals.length) {\n            return;\n        }\n        var overrideHash = isDynamic ? this.dynamicOverrides : this.overrides;\n        __assign(overrideHash, updates);\n        for (var _i = 0, removals_1 = removals; _i < removals_1.length; _i++) {\n            var propName = removals_1[_i];\n            delete overrideHash[propName];\n        }\n        this.compute();\n    };\n    // Computes the flattened options hash for the calendar and assigns to `this.options`.\n    // Assumes this.overrides and this.dynamicOverrides have already been initialized.\n    OptionsManager.prototype.compute = function () {\n        // TODO: not a very efficient system\n        var locales = firstDefined(// explicit locale option given?\n        this.dynamicOverrides.locales, this.overrides.locales, globalDefaults.locales);\n        var locale = firstDefined(// explicit locales option given?\n        this.dynamicOverrides.locale, this.overrides.locale, globalDefaults.locale);\n        var available = parseRawLocales(locales);\n        var localeDefaults = buildLocale(locale || available.defaultCode, available.map).options;\n        var dir = firstDefined(// based on options computed so far, is direction RTL?\n        this.dynamicOverrides.dir, this.overrides.dir, localeDefaults.dir);\n        var dirDefaults = dir === 'rtl' ? rtlDefaults : {};\n        this.dirDefaults = dirDefaults;\n        this.localeDefaults = localeDefaults;\n        this.computed = mergeOptions([\n            globalDefaults,\n            dirDefaults,\n            localeDefaults,\n            this.overrides,\n            this.dynamicOverrides\n        ]);\n    };\n    return OptionsManager;\n}());\n\nvar calendarSystemClassMap = {};\nfunction registerCalendarSystem(name, theClass) {\n    calendarSystemClassMap[name] = theClass;\n}\nfunction createCalendarSystem(name) {\n    return new calendarSystemClassMap[name]();\n}\nvar GregorianCalendarSystem = /** @class */ (function () {\n    function GregorianCalendarSystem() {\n    }\n    GregorianCalendarSystem.prototype.getMarkerYear = function (d) {\n        return d.getUTCFullYear();\n    };\n    GregorianCalendarSystem.prototype.getMarkerMonth = function (d) {\n        return d.getUTCMonth();\n    };\n    GregorianCalendarSystem.prototype.getMarkerDay = function (d) {\n        return d.getUTCDate();\n    };\n    GregorianCalendarSystem.prototype.arrayToMarker = function (arr) {\n        return arrayToUtcDate(arr);\n    };\n    GregorianCalendarSystem.prototype.markerToArray = function (marker) {\n        return dateToUtcArray(marker);\n    };\n    return GregorianCalendarSystem;\n}());\nregisterCalendarSystem('gregory', GregorianCalendarSystem);\n\nvar ISO_RE = /^\\s*(\\d{4})(-(\\d{2})(-(\\d{2})([T ](\\d{2}):(\\d{2})(:(\\d{2})(\\.(\\d+))?)?(Z|(([-+])(\\d{2})(:?(\\d{2}))?))?)?)?)?$/;\nfunction parse(str) {\n    var m = ISO_RE.exec(str);\n    if (m) {\n        var marker = new Date(Date.UTC(Number(m[1]), m[3] ? Number(m[3]) - 1 : 0, Number(m[5] || 1), Number(m[7] || 0), Number(m[8] || 0), Number(m[10] || 0), m[12] ? Number('0.' + m[12]) * 1000 : 0));\n        if (isValidDate(marker)) {\n            var timeZoneOffset = null;\n            if (m[13]) {\n                timeZoneOffset = (m[15] === '-' ? -1 : 1) * (Number(m[16] || 0) * 60 +\n                    Number(m[18] || 0));\n            }\n            return {\n                marker: marker,\n                isTimeUnspecified: !m[6],\n                timeZoneOffset: timeZoneOffset\n            };\n        }\n    }\n    return null;\n}\n\nvar DateEnv = /** @class */ (function () {\n    function DateEnv(settings) {\n        var timeZone = this.timeZone = settings.timeZone;\n        var isNamedTimeZone = timeZone !== 'local' && timeZone !== 'UTC';\n        if (settings.namedTimeZoneImpl && isNamedTimeZone) {\n            this.namedTimeZoneImpl = new settings.namedTimeZoneImpl(timeZone);\n        }\n        this.canComputeOffset = Boolean(!isNamedTimeZone || this.namedTimeZoneImpl);\n        this.calendarSystem = createCalendarSystem(settings.calendarSystem);\n        this.locale = settings.locale;\n        this.weekDow = settings.locale.week.dow;\n        this.weekDoy = settings.locale.week.doy;\n        if (settings.weekNumberCalculation === 'ISO') {\n            this.weekDow = 1;\n            this.weekDoy = 4;\n        }\n        if (typeof settings.firstDay === 'number') {\n            this.weekDow = settings.firstDay;\n        }\n        if (typeof settings.weekNumberCalculation === 'function') {\n            this.weekNumberFunc = settings.weekNumberCalculation;\n        }\n        this.weekLabel = settings.weekLabel != null ? settings.weekLabel : settings.locale.options.weekLabel;\n        this.cmdFormatter = settings.cmdFormatter;\n    }\n    // Creating / Parsing\n    DateEnv.prototype.createMarker = function (input) {\n        var meta = this.createMarkerMeta(input);\n        if (meta === null) {\n            return null;\n        }\n        return meta.marker;\n    };\n    DateEnv.prototype.createNowMarker = function () {\n        if (this.canComputeOffset) {\n            return this.timestampToMarker(new Date().valueOf());\n        }\n        else {\n            // if we can't compute the current date val for a timezone,\n            // better to give the current local date vals than UTC\n            return arrayToUtcDate(dateToLocalArray(new Date()));\n        }\n    };\n    DateEnv.prototype.createMarkerMeta = function (input) {\n        if (typeof input === 'string') {\n            return this.parse(input);\n        }\n        var marker = null;\n        if (typeof input === 'number') {\n            marker = this.timestampToMarker(input);\n        }\n        else if (input instanceof Date) {\n            input = input.valueOf();\n            if (!isNaN(input)) {\n                marker = this.timestampToMarker(input);\n            }\n        }\n        else if (Array.isArray(input)) {\n            marker = arrayToUtcDate(input);\n        }\n        if (marker === null || !isValidDate(marker)) {\n            return null;\n        }\n        return { marker: marker, isTimeUnspecified: false, forcedTzo: null };\n    };\n    DateEnv.prototype.parse = function (s) {\n        var parts = parse(s);\n        if (parts === null) {\n            return null;\n        }\n        var marker = parts.marker;\n        var forcedTzo = null;\n        if (parts.timeZoneOffset !== null) {\n            if (this.canComputeOffset) {\n                marker = this.timestampToMarker(marker.valueOf() - parts.timeZoneOffset * 60 * 1000);\n            }\n            else {\n                forcedTzo = parts.timeZoneOffset;\n            }\n        }\n        return { marker: marker, isTimeUnspecified: parts.isTimeUnspecified, forcedTzo: forcedTzo };\n    };\n    // Accessors\n    DateEnv.prototype.getYear = function (marker) {\n        return this.calendarSystem.getMarkerYear(marker);\n    };\n    DateEnv.prototype.getMonth = function (marker) {\n        return this.calendarSystem.getMarkerMonth(marker);\n    };\n    // Adding / Subtracting\n    DateEnv.prototype.add = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += dur.years;\n        a[1] += dur.months;\n        a[2] += dur.days;\n        a[6] += dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.subtract = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] -= dur.years;\n        a[1] -= dur.months;\n        a[2] -= dur.days;\n        a[6] -= dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addYears = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addMonths = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[1] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    // Diffing Whole Units\n    DateEnv.prototype.diffWholeYears = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1) &&\n            calendarSystem.getMarkerMonth(m0) === calendarSystem.getMarkerMonth(m1)) {\n            return calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0);\n        }\n        return null;\n    };\n    DateEnv.prototype.diffWholeMonths = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1)) {\n            return (calendarSystem.getMarkerMonth(m1) - calendarSystem.getMarkerMonth(m0)) +\n                (calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0)) * 12;\n        }\n        return null;\n    };\n    // Range / Duration\n    DateEnv.prototype.greatestWholeUnit = function (m0, m1) {\n        var n = this.diffWholeYears(m0, m1);\n        if (n !== null) {\n            return { unit: 'year', value: n };\n        }\n        n = this.diffWholeMonths(m0, m1);\n        if (n !== null) {\n            return { unit: 'month', value: n };\n        }\n        n = diffWholeWeeks(m0, m1);\n        if (n !== null) {\n            return { unit: 'week', value: n };\n        }\n        n = diffWholeDays(m0, m1);\n        if (n !== null) {\n            return { unit: 'day', value: n };\n        }\n        n = diffHours(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'hour', value: n };\n        }\n        n = diffMinutes(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'minute', value: n };\n        }\n        n = diffSeconds(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'second', value: n };\n        }\n        return { unit: 'millisecond', value: m1.valueOf() - m0.valueOf() };\n    };\n    DateEnv.prototype.countDurationsBetween = function (m0, m1, d) {\n        // TODO: can use greatestWholeUnit\n        var diff;\n        if (d.years) {\n            diff = this.diffWholeYears(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughYears(d);\n            }\n        }\n        if (d.months) {\n            diff = this.diffWholeMonths(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughMonths(d);\n            }\n        }\n        if (d.days) {\n            diff = diffWholeDays(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughDays(d);\n            }\n        }\n        return (m1.valueOf() - m0.valueOf()) / asRoughMs(d);\n    };\n    // Start-Of\n    DateEnv.prototype.startOf = function (m, unit) {\n        if (unit === 'year') {\n            return this.startOfYear(m);\n        }\n        else if (unit === 'month') {\n            return this.startOfMonth(m);\n        }\n        else if (unit === 'week') {\n            return this.startOfWeek(m);\n        }\n        else if (unit === 'day') {\n            return startOfDay(m);\n        }\n        else if (unit === 'hour') {\n            return startOfHour(m);\n        }\n        else if (unit === 'minute') {\n            return startOfMinute(m);\n        }\n        else if (unit === 'second') {\n            return startOfSecond(m);\n        }\n    };\n    DateEnv.prototype.startOfYear = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m)\n        ]);\n    };\n    DateEnv.prototype.startOfMonth = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m)\n        ]);\n    };\n    DateEnv.prototype.startOfWeek = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m),\n            m.getUTCDate() - ((m.getUTCDay() - this.weekDow + 7) % 7)\n        ]);\n    };\n    // Week Number\n    DateEnv.prototype.computeWeekNumber = function (marker) {\n        if (this.weekNumberFunc) {\n            return this.weekNumberFunc(this.toDate(marker));\n        }\n        else {\n            return weekOfYear(marker, this.weekDow, this.weekDoy);\n        }\n    };\n    // TODO: choke on timeZoneName: long\n    DateEnv.prototype.format = function (marker, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        return formatter.format({\n            marker: marker,\n            timeZoneOffset: dateOptions.forcedTzo != null ?\n                dateOptions.forcedTzo :\n                this.offsetForMarker(marker)\n        }, this);\n    };\n    DateEnv.prototype.formatRange = function (start, end, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        if (dateOptions.isEndExclusive) {\n            end = addMs(end, -1);\n        }\n        return formatter.formatRange({\n            marker: start,\n            timeZoneOffset: dateOptions.forcedStartTzo != null ?\n                dateOptions.forcedStartTzo :\n                this.offsetForMarker(start)\n        }, {\n            marker: end,\n            timeZoneOffset: dateOptions.forcedEndTzo != null ?\n                dateOptions.forcedEndTzo :\n                this.offsetForMarker(end)\n        }, this);\n    };\n    DateEnv.prototype.formatIso = function (marker, extraOptions) {\n        if (extraOptions === void 0) { extraOptions = {}; }\n        var timeZoneOffset = null;\n        if (!extraOptions.omitTimeZoneOffset) {\n            if (extraOptions.forcedTzo != null) {\n                timeZoneOffset = extraOptions.forcedTzo;\n            }\n            else {\n                timeZoneOffset = this.offsetForMarker(marker);\n            }\n        }\n        return buildIsoString(marker, timeZoneOffset, extraOptions.omitTime);\n    };\n    // TimeZone\n    DateEnv.prototype.timestampToMarker = function (ms) {\n        if (this.timeZone === 'local') {\n            return arrayToUtcDate(dateToLocalArray(new Date(ms)));\n        }\n        else if (this.timeZone === 'UTC' || !this.namedTimeZoneImpl) {\n            return new Date(ms);\n        }\n        else {\n            return arrayToUtcDate(this.namedTimeZoneImpl.timestampToArray(ms));\n        }\n    };\n    DateEnv.prototype.offsetForMarker = function (m) {\n        if (this.timeZone === 'local') {\n            return -arrayToLocalDate(dateToUtcArray(m)).getTimezoneOffset(); // convert \"inverse\" offset to \"normal\" offset\n        }\n        else if (this.timeZone === 'UTC') {\n            return 0;\n        }\n        else if (this.namedTimeZoneImpl) {\n            return this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m));\n        }\n        return null;\n    };\n    // Conversion\n    DateEnv.prototype.toDate = function (m, forcedTzo) {\n        if (this.timeZone === 'local') {\n            return arrayToLocalDate(dateToUtcArray(m));\n        }\n        else if (this.timeZone === 'UTC') {\n            return new Date(m.valueOf()); // make sure it's a copy\n        }\n        else if (!this.namedTimeZoneImpl) {\n            return new Date(m.valueOf() - (forcedTzo || 0));\n        }\n        else {\n            return new Date(m.valueOf() -\n                this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m)) * 1000 * 60 // convert minutes -> ms\n            );\n        }\n    };\n    return DateEnv;\n}());\n\nvar SIMPLE_SOURCE_PROPS = {\n    id: String,\n    allDayDefault: Boolean,\n    eventDataTransform: Function,\n    success: Function,\n    failure: Function\n};\nvar uid$2 = 0;\nfunction doesSourceNeedRange(eventSource, calendar) {\n    var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n    return !defs[eventSource.sourceDefId].ignoreRange;\n}\nfunction parseEventSource(raw, calendar) {\n    var defs = calendar.pluginSystem.hooks.eventSourceDefs;\n    for (var i = defs.length - 1; i >= 0; i--) { // later-added plugins take precedence\n        var def = defs[i];\n        var meta = def.parseMeta(raw);\n        if (meta) {\n            var res = parseEventSourceProps(typeof raw === 'object' ? raw : {}, meta, i, calendar);\n            res._raw = raw;\n            return res;\n        }\n    }\n    return null;\n}\nfunction parseEventSourceProps(raw, meta, sourceDefId, calendar) {\n    var leftovers0 = {};\n    var props = refineProps(raw, SIMPLE_SOURCE_PROPS, {}, leftovers0);\n    var leftovers1 = {};\n    var ui = processUnscopedUiProps(leftovers0, calendar, leftovers1);\n    props.isFetching = false;\n    props.latestFetchId = '';\n    props.fetchRange = null;\n    props.publicId = String(raw.id || '');\n    props.sourceId = String(uid$2++);\n    props.sourceDefId = sourceDefId;\n    props.meta = meta;\n    props.ui = ui;\n    props.extendedProps = leftovers1;\n    return props;\n}\n\nfunction reduceEventSources (eventSources, action, dateProfile, calendar) {\n    switch (action.type) {\n        case 'ADD_EVENT_SOURCES': // already parsed\n            return addSources(eventSources, action.sources, dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'REMOVE_EVENT_SOURCE':\n            return removeSource(eventSources, action.sourceId);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            if (dateProfile) {\n                return fetchDirtySources(eventSources, dateProfile.activeRange, calendar);\n            }\n            else {\n                return eventSources;\n            }\n        case 'FETCH_EVENT_SOURCES':\n        case 'CHANGE_TIMEZONE':\n            return fetchSourcesByIds(eventSources, action.sourceIds ?\n                arrayToHash(action.sourceIds) :\n                excludeStaticSources(eventSources, calendar), dateProfile ? dateProfile.activeRange : null, calendar);\n        case 'RECEIVE_EVENTS':\n        case 'RECEIVE_EVENT_ERROR':\n            return receiveResponse(eventSources, action.sourceId, action.fetchId, action.fetchRange);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return {};\n        default:\n            return eventSources;\n    }\n}\nvar uid$3 = 0;\nfunction addSources(eventSourceHash, sources, fetchRange, calendar) {\n    var hash = {};\n    for (var _i = 0, sources_1 = sources; _i < sources_1.length; _i++) {\n        var source = sources_1[_i];\n        hash[source.sourceId] = source;\n    }\n    if (fetchRange) {\n        hash = fetchDirtySources(hash, fetchRange, calendar);\n    }\n    return __assign({}, eventSourceHash, hash);\n}\nfunction removeSource(eventSourceHash, sourceId) {\n    return filterHash(eventSourceHash, function (eventSource) {\n        return eventSource.sourceId !== sourceId;\n    });\n}\nfunction fetchDirtySources(sourceHash, fetchRange, calendar) {\n    return fetchSourcesByIds(sourceHash, filterHash(sourceHash, function (eventSource) {\n        return isSourceDirty(eventSource, fetchRange, calendar);\n    }), fetchRange, calendar);\n}\nfunction isSourceDirty(eventSource, fetchRange, calendar) {\n    if (!doesSourceNeedRange(eventSource, calendar)) {\n        return !eventSource.latestFetchId;\n    }\n    else {\n        return !calendar.opt('lazyFetching') ||\n            !eventSource.fetchRange ||\n            eventSource.isFetching || // always cancel outdated in-progress fetches\n            fetchRange.start < eventSource.fetchRange.start ||\n            fetchRange.end > eventSource.fetchRange.end;\n    }\n}\nfunction fetchSourcesByIds(prevSources, sourceIdHash, fetchRange, calendar) {\n    var nextSources = {};\n    for (var sourceId in prevSources) {\n        var source = prevSources[sourceId];\n        if (sourceIdHash[sourceId]) {\n            nextSources[sourceId] = fetchSource(source, fetchRange, calendar);\n        }\n        else {\n            nextSources[sourceId] = source;\n        }\n    }\n    return nextSources;\n}\nfunction fetchSource(eventSource, fetchRange, calendar) {\n    var sourceDef = calendar.pluginSystem.hooks.eventSourceDefs[eventSource.sourceDefId];\n    var fetchId = String(uid$3++);\n    sourceDef.fetch({\n        eventSource: eventSource,\n        calendar: calendar,\n        range: fetchRange\n    }, function (res) {\n        var rawEvents = res.rawEvents;\n        var calSuccess = calendar.opt('eventSourceSuccess');\n        var calSuccessRes;\n        var sourceSuccessRes;\n        if (eventSource.success) {\n            sourceSuccessRes = eventSource.success(rawEvents, res.xhr);\n        }\n        if (calSuccess) {\n            calSuccessRes = calSuccess(rawEvents, res.xhr);\n        }\n        rawEvents = sourceSuccessRes || calSuccessRes || rawEvents;\n        calendar.dispatch({\n            type: 'RECEIVE_EVENTS',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            rawEvents: rawEvents\n        });\n    }, function (error) {\n        var callFailure = calendar.opt('eventSourceFailure');\n        console.warn(error.message, error);\n        if (eventSource.failure) {\n            eventSource.failure(error);\n        }\n        if (callFailure) {\n            callFailure(error);\n        }\n        calendar.dispatch({\n            type: 'RECEIVE_EVENT_ERROR',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            error: error\n        });\n    });\n    return __assign({}, eventSource, { isFetching: true, latestFetchId: fetchId });\n}\nfunction receiveResponse(sourceHash, sourceId, fetchId, fetchRange) {\n    var _a;\n    var eventSource = sourceHash[sourceId];\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId) {\n        return __assign({}, sourceHash, (_a = {}, _a[sourceId] = __assign({}, eventSource, { isFetching: false, fetchRange: fetchRange // also serves as a marker that at least one fetch has completed\n         }), _a));\n    }\n    return sourceHash;\n}\nfunction excludeStaticSources(eventSources, calendar) {\n    return filterHash(eventSources, function (eventSource) {\n        return doesSourceNeedRange(eventSource, calendar);\n    });\n}\n\nvar DateProfileGenerator = /** @class */ (function () {\n    function DateProfileGenerator(viewSpec, calendar) {\n        this.viewSpec = viewSpec;\n        this.options = viewSpec.options;\n        this.dateEnv = calendar.dateEnv;\n        this.calendar = calendar;\n        this.initHiddenDays();\n    }\n    /* Date Range Computation\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Builds a structure with info about what the dates/ranges will be for the \"prev\" view.\n    DateProfileGenerator.prototype.buildPrev = function (currentDateProfile, currentDate) {\n        var dateEnv = this.dateEnv;\n        var prevDate = dateEnv.subtract(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(prevDate, -1);\n    };\n    // Builds a structure with info about what the dates/ranges will be for the \"next\" view.\n    DateProfileGenerator.prototype.buildNext = function (currentDateProfile, currentDate) {\n        var dateEnv = this.dateEnv;\n        var nextDate = dateEnv.add(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(nextDate, 1);\n    };\n    // Builds a structure holding dates/ranges for rendering around the given date.\n    // Optional direction param indicates whether the date is being incremented/decremented\n    // from its previous value. decremented = -1, incremented = 1 (default).\n    DateProfileGenerator.prototype.build = function (currentDate, direction, forceToValid) {\n        if (forceToValid === void 0) { forceToValid = false; }\n        var validRange;\n        var minTime = null;\n        var maxTime = null;\n        var currentInfo;\n        var isRangeAllDay;\n        var renderRange;\n        var activeRange;\n        var isValid;\n        validRange = this.buildValidRange();\n        validRange = this.trimHiddenDays(validRange);\n        if (forceToValid) {\n            currentDate = constrainMarkerToRange(currentDate, validRange);\n        }\n        currentInfo = this.buildCurrentRangeInfo(currentDate, direction);\n        isRangeAllDay = /^(year|month|week|day)$/.test(currentInfo.unit);\n        renderRange = this.buildRenderRange(this.trimHiddenDays(currentInfo.range), currentInfo.unit, isRangeAllDay);\n        renderRange = this.trimHiddenDays(renderRange);\n        activeRange = renderRange;\n        if (!this.options.showNonCurrentDates) {\n            activeRange = intersectRanges(activeRange, currentInfo.range);\n        }\n        minTime = createDuration(this.options.minTime);\n        maxTime = createDuration(this.options.maxTime);\n        activeRange = this.adjustActiveRange(activeRange, minTime, maxTime);\n        activeRange = intersectRanges(activeRange, validRange); // might return null\n        // it's invalid if the originally requested date is not contained,\n        // or if the range is completely outside of the valid range.\n        isValid = rangesIntersect(currentInfo.range, validRange);\n        return {\n            // constraint for where prev/next operations can go and where events can be dragged/resized to.\n            // an object with optional start and end properties.\n            validRange: validRange,\n            // range the view is formally responsible for.\n            // for example, a month view might have 1st-31st, excluding padded dates\n            currentRange: currentInfo.range,\n            // name of largest unit being displayed, like \"month\" or \"week\"\n            currentRangeUnit: currentInfo.unit,\n            isRangeAllDay: isRangeAllDay,\n            // dates that display events and accept drag-n-drop\n            // will be `null` if no dates accept events\n            activeRange: activeRange,\n            // date range with a rendered skeleton\n            // includes not-active days that need some sort of DOM\n            renderRange: renderRange,\n            // Duration object that denotes the first visible time of any given day\n            minTime: minTime,\n            // Duration object that denotes the exclusive visible end time of any given day\n            maxTime: maxTime,\n            isValid: isValid,\n            // how far the current date will move for a prev/next operation\n            dateIncrement: this.buildDateIncrement(currentInfo.duration)\n            // pass a fallback (might be null) ^\n        };\n    };\n    // Builds an object with optional start/end properties.\n    // Indicates the minimum/maximum dates to display.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildValidRange = function () {\n        return this.getRangeOption('validRange', this.calendar.getNow()) ||\n            { start: null, end: null }; // completely open-ended\n    };\n    // Builds a structure with info about the \"current\" range, the range that is\n    // highlighted as being the current month for example.\n    // See build() for a description of `direction`.\n    // Guaranteed to have `range` and `unit` properties. `duration` is optional.\n    DateProfileGenerator.prototype.buildCurrentRangeInfo = function (date, direction) {\n        var _a = this, viewSpec = _a.viewSpec, dateEnv = _a.dateEnv;\n        var duration = null;\n        var unit = null;\n        var range = null;\n        var dayCount;\n        if (viewSpec.duration) {\n            duration = viewSpec.duration;\n            unit = viewSpec.durationUnit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        else if ((dayCount = this.options.dayCount)) {\n            unit = 'day';\n            range = this.buildRangeFromDayCount(date, direction, dayCount);\n        }\n        else if ((range = this.buildCustomVisibleRange(date))) {\n            unit = dateEnv.greatestWholeUnit(range.start, range.end).unit;\n        }\n        else {\n            duration = this.getFallbackDuration();\n            unit = greatestDurationDenominator(duration).unit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        return { duration: duration, unit: unit, range: range };\n    };\n    DateProfileGenerator.prototype.getFallbackDuration = function () {\n        return createDuration({ day: 1 });\n    };\n    // Returns a new activeRange to have time values (un-ambiguate)\n    // minTime or maxTime causes the range to expand.\n    DateProfileGenerator.prototype.adjustActiveRange = function (range, minTime, maxTime) {\n        var dateEnv = this.dateEnv;\n        var start = range.start;\n        var end = range.end;\n        if (this.viewSpec.class.prototype.usesMinMaxTime) {\n            // expand active range if minTime is negative (why not when positive?)\n            if (asRoughDays(minTime) < 0) {\n                start = startOfDay(start); // necessary?\n                start = dateEnv.add(start, minTime);\n            }\n            // expand active range if maxTime is beyond one day (why not when positive?)\n            if (asRoughDays(maxTime) > 1) {\n                end = startOfDay(end); // necessary?\n                end = addDays(end, -1);\n                end = dateEnv.add(end, maxTime);\n            }\n        }\n        return { start: start, end: end };\n    };\n    // Builds the \"current\" range when it is specified as an explicit duration.\n    // `unit` is the already-computed greatestDurationDenominator unit of duration.\n    DateProfileGenerator.prototype.buildRangeFromDuration = function (date, direction, duration, unit) {\n        var dateEnv = this.dateEnv;\n        var alignment = this.options.dateAlignment;\n        var dateIncrementInput;\n        var dateIncrementDuration;\n        var start;\n        var end;\n        var res;\n        // compute what the alignment should be\n        if (!alignment) {\n            dateIncrementInput = this.options.dateIncrement;\n            if (dateIncrementInput) {\n                dateIncrementDuration = createDuration(dateIncrementInput);\n                // use the smaller of the two units\n                if (asRoughMs(dateIncrementDuration) < asRoughMs(duration)) {\n                    alignment = greatestDurationDenominator(dateIncrementDuration, !getWeeksFromInput(dateIncrementInput)).unit;\n                }\n                else {\n                    alignment = unit;\n                }\n            }\n            else {\n                alignment = unit;\n            }\n        }\n        // if the view displays a single day or smaller\n        if (asRoughDays(duration) <= 1) {\n            if (this.isHiddenDay(start)) {\n                start = this.skipHiddenDays(start, direction);\n                start = startOfDay(start);\n            }\n        }\n        function computeRes() {\n            start = dateEnv.startOf(date, alignment);\n            end = dateEnv.add(start, duration);\n            res = { start: start, end: end };\n        }\n        computeRes();\n        // if range is completely enveloped by hidden days, go past the hidden days\n        if (!this.trimHiddenDays(res)) {\n            date = this.skipHiddenDays(date, direction);\n            computeRes();\n        }\n        return res;\n    };\n    // Builds the \"current\" range when a dayCount is specified.\n    DateProfileGenerator.prototype.buildRangeFromDayCount = function (date, direction, dayCount) {\n        var dateEnv = this.dateEnv;\n        var customAlignment = this.options.dateAlignment;\n        var runningCount = 0;\n        var start = date;\n        var end;\n        if (customAlignment) {\n            start = dateEnv.startOf(start, customAlignment);\n        }\n        start = startOfDay(start);\n        start = this.skipHiddenDays(start, direction);\n        end = start;\n        do {\n            end = addDays(end, 1);\n            if (!this.isHiddenDay(end)) {\n                runningCount++;\n            }\n        } while (runningCount < dayCount);\n        return { start: start, end: end };\n    };\n    // Builds a normalized range object for the \"visible\" range,\n    // which is a way to define the currentRange and activeRange at the same time.\n    DateProfileGenerator.prototype.buildCustomVisibleRange = function (date) {\n        var dateEnv = this.dateEnv;\n        var visibleRange = this.getRangeOption('visibleRange', dateEnv.toDate(date));\n        if (visibleRange && (visibleRange.start == null || visibleRange.end == null)) {\n            return null;\n        }\n        return visibleRange;\n    };\n    // Computes the range that will represent the element/cells for *rendering*,\n    // but which may have voided days/times.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        return currentRange;\n    };\n    // Compute the duration value that should be added/substracted to the current date\n    // when a prev/next operation happens.\n    DateProfileGenerator.prototype.buildDateIncrement = function (fallback) {\n        var dateIncrementInput = this.options.dateIncrement;\n        var customAlignment;\n        if (dateIncrementInput) {\n            return createDuration(dateIncrementInput);\n        }\n        else if ((customAlignment = this.options.dateAlignment)) {\n            return createDuration(1, customAlignment);\n        }\n        else if (fallback) {\n            return fallback;\n        }\n        else {\n            return createDuration({ days: 1 });\n        }\n    };\n    // Arguments after name will be forwarded to a hypothetical function value\n    // WARNING: passed-in arguments will be given to generator functions as-is and can cause side-effects.\n    // Always clone your objects if you fear mutation.\n    DateProfileGenerator.prototype.getRangeOption = function (name) {\n        var otherArgs = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            otherArgs[_i - 1] = arguments[_i];\n        }\n        var val = this.options[name];\n        if (typeof val === 'function') {\n            val = val.apply(null, otherArgs);\n        }\n        if (val) {\n            val = parseRange(val, this.dateEnv);\n        }\n        if (val) {\n            val = computeVisibleDayRange(val);\n        }\n        return val;\n    };\n    /* Hidden Days\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Initializes internal variables related to calculating hidden days-of-week\n    DateProfileGenerator.prototype.initHiddenDays = function () {\n        var hiddenDays = this.options.hiddenDays || []; // array of day-of-week indices that are hidden\n        var isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n        var dayCnt = 0;\n        var i;\n        if (this.options.weekends === false) {\n            hiddenDays.push(0, 6); // 0=sunday, 6=saturday\n        }\n        for (i = 0; i < 7; i++) {\n            if (!(isHiddenDayHash[i] = hiddenDays.indexOf(i) !== -1)) {\n                dayCnt++;\n            }\n        }\n        if (!dayCnt) {\n            throw new Error('invalid hiddenDays'); // all days were hidden? bad.\n        }\n        this.isHiddenDayHash = isHiddenDayHash;\n    };\n    // Remove days from the beginning and end of the range that are computed as hidden.\n    // If the whole range is trimmed off, returns null\n    DateProfileGenerator.prototype.trimHiddenDays = function (range) {\n        var start = range.start;\n        var end = range.end;\n        if (start) {\n            start = this.skipHiddenDays(start);\n        }\n        if (end) {\n            end = this.skipHiddenDays(end, -1, true);\n        }\n        if (start == null || end == null || start < end) {\n            return { start: start, end: end };\n        }\n        return null;\n    };\n    // Is the current day hidden?\n    // `day` is a day-of-week index (0-6), or a Date (used for UTC)\n    DateProfileGenerator.prototype.isHiddenDay = function (day) {\n        if (day instanceof Date) {\n            day = day.getUTCDay();\n        }\n        return this.isHiddenDayHash[day];\n    };\n    // Incrementing the current day until it is no longer a hidden day, returning a copy.\n    // DOES NOT CONSIDER validRange!\n    // If the initial value of `date` is not a hidden day, don't do anything.\n    // Pass `isExclusive` as `true` if you are dealing with an end date.\n    // `inc` defaults to `1` (increment one day forward each time)\n    DateProfileGenerator.prototype.skipHiddenDays = function (date, inc, isExclusive) {\n        if (inc === void 0) { inc = 1; }\n        if (isExclusive === void 0) { isExclusive = false; }\n        while (this.isHiddenDayHash[(date.getUTCDay() + (isExclusive ? inc : 0) + 7) % 7]) {\n            date = addDays(date, inc);\n        }\n        return date;\n    };\n    return DateProfileGenerator;\n}());\n// TODO: find a way to avoid comparing DateProfiles. it's tedious\nfunction isDateProfilesEqual(p0, p1) {\n    return rangesEqual(p0.validRange, p1.validRange) &&\n        rangesEqual(p0.activeRange, p1.activeRange) &&\n        rangesEqual(p0.renderRange, p1.renderRange) &&\n        durationsEqual(p0.minTime, p1.minTime) &&\n        durationsEqual(p0.maxTime, p1.maxTime);\n    /*\n    TODO: compare more?\n      currentRange: DateRange\n      currentRangeUnit: string\n      isRangeAllDay: boolean\n      isValid: boolean\n      dateIncrement: Duration\n    */\n}\n\nfunction reduce (state, action, calendar) {\n    var viewType = reduceViewType(state.viewType, action);\n    var dateProfile = reduceDateProfile(state.dateProfile, action, state.currentDate, viewType, calendar);\n    var eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendar);\n    var nextState = __assign({}, state, { viewType: viewType,\n        dateProfile: dateProfile, currentDate: reduceCurrentDate(state.currentDate, action, dateProfile), eventSources: eventSources, eventStore: reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendar), dateSelection: reduceDateSelection(state.dateSelection, action, calendar), eventSelection: reduceSelectedEvent(state.eventSelection, action), eventDrag: reduceEventDrag(state.eventDrag, action, eventSources, calendar), eventResize: reduceEventResize(state.eventResize, action, eventSources, calendar), eventSourceLoadingLevel: computeLoadingLevel(eventSources), loadingLevel: computeLoadingLevel(eventSources) });\n    for (var _i = 0, _a = calendar.pluginSystem.hooks.reducers; _i < _a.length; _i++) {\n        var reducerFunc = _a[_i];\n        nextState = reducerFunc(nextState, action, calendar);\n    }\n    // console.log(action.type, nextState)\n    return nextState;\n}\nfunction reduceViewType(currentViewType, action) {\n    switch (action.type) {\n        case 'SET_VIEW_TYPE':\n            return action.viewType;\n        default:\n            return currentViewType;\n    }\n}\nfunction reduceDateProfile(currentDateProfile, action, currentDate, viewType, calendar) {\n    var newDateProfile;\n    switch (action.type) {\n        case 'PREV':\n            newDateProfile = calendar.dateProfileGenerators[viewType].buildPrev(currentDateProfile, currentDate);\n            break;\n        case 'NEXT':\n            newDateProfile = calendar.dateProfileGenerators[viewType].buildNext(currentDateProfile, currentDate);\n            break;\n        case 'SET_DATE':\n            if (!currentDateProfile.activeRange ||\n                !rangeContainsMarker(currentDateProfile.currentRange, action.dateMarker)) {\n                newDateProfile = calendar.dateProfileGenerators[viewType].build(action.dateMarker, undefined, true // forceToValid\n                );\n            }\n            break;\n        case 'SET_VIEW_TYPE':\n            var generator = calendar.dateProfileGenerators[viewType];\n            if (!generator) {\n                throw new Error(viewType ?\n                    'The FullCalendar view \"' + viewType + '\" does not exist. Make sure your plugins are loaded correctly.' :\n                    'No available FullCalendar view plugins.');\n            }\n            newDateProfile = generator.build(action.dateMarker || currentDate, undefined, true // forceToValid\n            );\n            break;\n    }\n    if (newDateProfile &&\n        newDateProfile.isValid &&\n        !(currentDateProfile && isDateProfilesEqual(currentDateProfile, newDateProfile))) {\n        return newDateProfile;\n    }\n    else {\n        return currentDateProfile;\n    }\n}\nfunction reduceCurrentDate(currentDate, action, dateProfile) {\n    switch (action.type) {\n        case 'PREV':\n        case 'NEXT':\n            if (!rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n                return dateProfile.currentRange.start;\n            }\n            else {\n                return currentDate;\n            }\n        case 'SET_DATE':\n        case 'SET_VIEW_TYPE':\n            var newDate = action.dateMarker || currentDate;\n            if (dateProfile.activeRange && !rangeContainsMarker(dateProfile.activeRange, newDate)) {\n                return dateProfile.currentRange.start;\n            }\n            else {\n                return newDate;\n            }\n        default:\n            return currentDate;\n    }\n}\nfunction reduceDateSelection(currentSelection, action, calendar) {\n    switch (action.type) {\n        case 'SELECT_DATES':\n            return action.selection;\n        case 'UNSELECT_DATES':\n            return null;\n        default:\n            return currentSelection;\n    }\n}\nfunction reduceSelectedEvent(currentInstanceId, action) {\n    switch (action.type) {\n        case 'SELECT_EVENT':\n            return action.eventInstanceId;\n        case 'UNSELECT_EVENT':\n            return '';\n        default:\n            return currentInstanceId;\n    }\n}\nfunction reduceEventDrag(currentDrag, action, sources, calendar) {\n    switch (action.type) {\n        case 'SET_EVENT_DRAG':\n            var newDrag = action.state;\n            return {\n                affectedEvents: newDrag.affectedEvents,\n                mutatedEvents: newDrag.mutatedEvents,\n                isEvent: newDrag.isEvent,\n                origSeg: newDrag.origSeg\n            };\n        case 'UNSET_EVENT_DRAG':\n            return null;\n        default:\n            return currentDrag;\n    }\n}\nfunction reduceEventResize(currentResize, action, sources, calendar) {\n    switch (action.type) {\n        case 'SET_EVENT_RESIZE':\n            var newResize = action.state;\n            return {\n                affectedEvents: newResize.affectedEvents,\n                mutatedEvents: newResize.mutatedEvents,\n                isEvent: newResize.isEvent,\n                origSeg: newResize.origSeg\n            };\n        case 'UNSET_EVENT_RESIZE':\n            return null;\n        default:\n            return currentResize;\n    }\n}\nfunction computeLoadingLevel(eventSources) {\n    var cnt = 0;\n    for (var sourceId in eventSources) {\n        if (eventSources[sourceId].isFetching) {\n            cnt++;\n        }\n    }\n    return cnt;\n}\n\nvar STANDARD_PROPS = {\n    start: null,\n    end: null,\n    allDay: Boolean\n};\nfunction parseDateSpan(raw, dateEnv, defaultDuration) {\n    var span = parseOpenDateSpan(raw, dateEnv);\n    var range = span.range;\n    if (!range.start) {\n        return null;\n    }\n    if (!range.end) {\n        if (defaultDuration == null) {\n            return null;\n        }\n        else {\n            range.end = dateEnv.add(range.start, defaultDuration);\n        }\n    }\n    return span;\n}\n/*\nTODO: somehow combine with parseRange?\nWill return null if the start/end props were present but parsed invalidly.\n*/\nfunction parseOpenDateSpan(raw, dateEnv) {\n    var leftovers = {};\n    var standardProps = refineProps(raw, STANDARD_PROPS, {}, leftovers);\n    var startMeta = standardProps.start ? dateEnv.createMarkerMeta(standardProps.start) : null;\n    var endMeta = standardProps.end ? dateEnv.createMarkerMeta(standardProps.end) : null;\n    var allDay = standardProps.allDay;\n    if (allDay == null) {\n        allDay = (startMeta && startMeta.isTimeUnspecified) &&\n            (!endMeta || endMeta.isTimeUnspecified);\n    }\n    // use this leftover object as the selection object\n    leftovers.range = {\n        start: startMeta ? startMeta.marker : null,\n        end: endMeta ? endMeta.marker : null\n    };\n    leftovers.allDay = allDay;\n    return leftovers;\n}\nfunction isDateSpansEqual(span0, span1) {\n    return rangesEqual(span0.range, span1.range) &&\n        span0.allDay === span1.allDay &&\n        isSpanPropsEqual(span0, span1);\n}\n// the NON-DATE-RELATED props\nfunction isSpanPropsEqual(span0, span1) {\n    for (var propName in span1) {\n        if (propName !== 'range' && propName !== 'allDay') {\n            if (span0[propName] !== span1[propName]) {\n                return false;\n            }\n        }\n    }\n    // are there any props that span0 has that span1 DOESN'T have?\n    // both have range/allDay, so no need to special-case.\n    for (var propName in span0) {\n        if (!(propName in span1)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction buildDateSpanApi(span, dateEnv) {\n    return {\n        start: dateEnv.toDate(span.range.start),\n        end: dateEnv.toDate(span.range.end),\n        startStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        endStr: dateEnv.formatIso(span.range.end, { omitTime: span.allDay }),\n        allDay: span.allDay\n    };\n}\nfunction buildDatePointApi(span, dateEnv) {\n    return {\n        date: dateEnv.toDate(span.range.start),\n        dateStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        allDay: span.allDay\n    };\n}\nfunction fabricateEventRange(dateSpan, eventUiBases, calendar) {\n    var def = parseEventDef({ editable: false }, '', // sourceId\n    dateSpan.allDay, true, // hasEnd\n    calendar);\n    return {\n        def: def,\n        ui: compileEventUi(def, eventUiBases),\n        instance: createEventInstance(def.defId, dateSpan.range),\n        range: dateSpan.range,\n        isStart: true,\n        isEnd: true\n    };\n}\n\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n    var hash = {};\n    var viewType;\n    for (viewType in defaultConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    for (viewType in overrideConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    return hash;\n}\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    if (hash[viewType]) {\n        return hash[viewType];\n    }\n    var viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    if (viewDef) {\n        hash[viewType] = viewDef;\n    }\n    return viewDef;\n}\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    var defaultConfig = defaultConfigs[viewType];\n    var overrideConfig = overrideConfigs[viewType];\n    var queryProp = function (name) {\n        return (defaultConfig && defaultConfig[name] !== null) ? defaultConfig[name] :\n            ((overrideConfig && overrideConfig[name] !== null) ? overrideConfig[name] : null);\n    };\n    var theClass = queryProp('class');\n    var superType = queryProp('superType');\n    if (!superType && theClass) {\n        superType =\n            findViewNameBySubclass(theClass, overrideConfigs) ||\n                findViewNameBySubclass(theClass, defaultConfigs);\n    }\n    var superDef = null;\n    if (superType) {\n        if (superType === viewType) {\n            throw new Error('Can\\'t have a custom view type that references itself');\n        }\n        superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n    }\n    if (!theClass && superDef) {\n        theClass = superDef.class;\n    }\n    if (!theClass) {\n        return null; // don't throw a warning, might be settings for a single-unit view\n    }\n    return {\n        type: viewType,\n        class: theClass,\n        defaults: __assign({}, (superDef ? superDef.defaults : {}), (defaultConfig ? defaultConfig.options : {})),\n        overrides: __assign({}, (superDef ? superDef.overrides : {}), (overrideConfig ? overrideConfig.options : {}))\n    };\n}\nfunction findViewNameBySubclass(viewSubclass, configs) {\n    var superProto = Object.getPrototypeOf(viewSubclass.prototype);\n    for (var viewType in configs) {\n        var parsed = configs[viewType];\n        // need DIRECT subclass, so instanceof won't do it\n        if (parsed.class && parsed.class.prototype === superProto) {\n            return viewType;\n        }\n    }\n    return '';\n}\n\nfunction parseViewConfigs(inputs) {\n    return mapHash(inputs, parseViewConfig);\n}\nvar VIEW_DEF_PROPS = {\n    type: String,\n    class: null\n};\nfunction parseViewConfig(input) {\n    if (typeof input === 'function') {\n        input = { class: input };\n    }\n    var options = {};\n    var props = refineProps(input, VIEW_DEF_PROPS, {}, options);\n    return {\n        superType: props.type,\n        class: props.class,\n        options: options\n    };\n}\n\nfunction buildViewSpecs(defaultInputs, optionsManager) {\n    var defaultConfigs = parseViewConfigs(defaultInputs);\n    var overrideConfigs = parseViewConfigs(optionsManager.overrides.views);\n    var viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n    return mapHash(viewDefs, function (viewDef) {\n        return buildViewSpec(viewDef, overrideConfigs, optionsManager);\n    });\n}\nfunction buildViewSpec(viewDef, overrideConfigs, optionsManager) {\n    var durationInput = viewDef.overrides.duration ||\n        viewDef.defaults.duration ||\n        optionsManager.dynamicOverrides.duration ||\n        optionsManager.overrides.duration;\n    var duration = null;\n    var durationUnit = '';\n    var singleUnit = '';\n    var singleUnitOverrides = {};\n    if (durationInput) {\n        duration = createDuration(durationInput);\n        if (duration) { // valid?\n            var denom = greatestDurationDenominator(duration, !getWeeksFromInput(durationInput));\n            durationUnit = denom.unit;\n            if (denom.value === 1) {\n                singleUnit = durationUnit;\n                singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].options : {};\n            }\n        }\n    }\n    var queryButtonText = function (options) {\n        var buttonTextMap = options.buttonText || {};\n        var buttonTextKey = viewDef.defaults.buttonTextKey;\n        if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n            return buttonTextMap[buttonTextKey];\n        }\n        if (buttonTextMap[viewDef.type] != null) {\n            return buttonTextMap[viewDef.type];\n        }\n        if (buttonTextMap[singleUnit] != null) {\n            return buttonTextMap[singleUnit];\n        }\n    };\n    return {\n        type: viewDef.type,\n        class: viewDef.class,\n        duration: duration,\n        durationUnit: durationUnit,\n        singleUnit: singleUnit,\n        options: __assign({}, globalDefaults, viewDef.defaults, optionsManager.dirDefaults, optionsManager.localeDefaults, optionsManager.overrides, singleUnitOverrides, viewDef.overrides, optionsManager.dynamicOverrides),\n        buttonTextOverride: queryButtonText(optionsManager.dynamicOverrides) ||\n            queryButtonText(optionsManager.overrides) || // constructor-specified buttonText lookup hash takes precedence\n            viewDef.overrides.buttonText,\n        buttonTextDefault: queryButtonText(optionsManager.localeDefaults) ||\n            queryButtonText(optionsManager.dirDefaults) ||\n            viewDef.defaults.buttonText ||\n            queryButtonText(globalDefaults) ||\n            viewDef.type // fall back to given view name\n    };\n}\n\nvar Toolbar = /** @class */ (function (_super) {\n    __extends(Toolbar, _super);\n    function Toolbar(extraClassName) {\n        var _this = _super.call(this) || this;\n        _this._renderLayout = memoizeRendering(_this.renderLayout, _this.unrenderLayout);\n        _this._updateTitle = memoizeRendering(_this.updateTitle, null, [_this._renderLayout]);\n        _this._updateActiveButton = memoizeRendering(_this.updateActiveButton, null, [_this._renderLayout]);\n        _this._updateToday = memoizeRendering(_this.updateToday, null, [_this._renderLayout]);\n        _this._updatePrev = memoizeRendering(_this.updatePrev, null, [_this._renderLayout]);\n        _this._updateNext = memoizeRendering(_this.updateNext, null, [_this._renderLayout]);\n        _this.el = createElement('div', { className: 'fc-toolbar ' + extraClassName });\n        return _this;\n    }\n    Toolbar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this._renderLayout.unrender(); // should unrender everything else\n        removeElement(this.el);\n    };\n    Toolbar.prototype.render = function (props) {\n        this._renderLayout(props.layout);\n        this._updateTitle(props.title);\n        this._updateActiveButton(props.activeButton);\n        this._updateToday(props.isTodayEnabled);\n        this._updatePrev(props.isPrevEnabled);\n        this._updateNext(props.isNextEnabled);\n    };\n    Toolbar.prototype.renderLayout = function (layout) {\n        var el = this.el;\n        this.viewsWithButtons = [];\n        appendToElement(el, this.renderSection('left', layout.left));\n        appendToElement(el, this.renderSection('center', layout.center));\n        appendToElement(el, this.renderSection('right', layout.right));\n    };\n    Toolbar.prototype.unrenderLayout = function () {\n        this.el.innerHTML = '';\n    };\n    Toolbar.prototype.renderSection = function (position, buttonStr) {\n        var _this = this;\n        var _a = this.context, theme = _a.theme, calendar = _a.calendar;\n        var optionsManager = calendar.optionsManager;\n        var viewSpecs = calendar.viewSpecs;\n        var sectionEl = createElement('div', { className: 'fc-' + position });\n        var calendarCustomButtons = optionsManager.computed.customButtons || {};\n        var calendarButtonTextOverrides = optionsManager.overrides.buttonText || {};\n        var calendarButtonText = optionsManager.computed.buttonText || {};\n        if (buttonStr) {\n            buttonStr.split(' ').forEach(function (buttonGroupStr, i) {\n                var groupChildren = [];\n                var isOnlyButtons = true;\n                var groupEl;\n                buttonGroupStr.split(',').forEach(function (buttonName, j) {\n                    var customButtonProps;\n                    var viewSpec;\n                    var buttonClick;\n                    var buttonIcon; // only one of these will be set\n                    var buttonText; // \"\n                    var buttonInnerHtml;\n                    var buttonClasses;\n                    var buttonEl;\n                    var buttonAriaAttr;\n                    if (buttonName === 'title') {\n                        groupChildren.push(htmlToElement('<h2>&nbsp;</h2>')); // we always want it to take up height\n                        isOnlyButtons = false;\n                    }\n                    else {\n                        if ((customButtonProps = calendarCustomButtons[buttonName])) {\n                            buttonClick = function (ev) {\n                                if (customButtonProps.click) {\n                                    customButtonProps.click.call(buttonEl, ev);\n                                }\n                            };\n                            (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = customButtonProps.text);\n                        }\n                        else if ((viewSpec = viewSpecs[buttonName])) {\n                            _this.viewsWithButtons.push(buttonName);\n                            buttonClick = function () {\n                                calendar.changeView(buttonName);\n                            };\n                            (buttonText = viewSpec.buttonTextOverride) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = viewSpec.buttonTextDefault);\n                        }\n                        else if (calendar[buttonName]) { // a calendar method\n                            buttonClick = function () {\n                                calendar[buttonName]();\n                            };\n                            (buttonText = calendarButtonTextOverrides[buttonName]) ||\n                                (buttonIcon = theme.getIconClass(buttonName)) ||\n                                (buttonText = calendarButtonText[buttonName]);\n                            //            ^ everything else is considered default\n                        }\n                        if (buttonClick) {\n                            buttonClasses = [\n                                'fc-' + buttonName + '-button',\n                                theme.getClass('button')\n                            ];\n                            if (buttonText) {\n                                buttonInnerHtml = htmlEscape(buttonText);\n                                buttonAriaAttr = '';\n                            }\n                            else if (buttonIcon) {\n                                buttonInnerHtml = \"<span class='\" + buttonIcon + \"'></span>\";\n                                buttonAriaAttr = ' aria-label=\"' + buttonName + '\"';\n                            }\n                            buttonEl = htmlToElement(// type=\"button\" so that it doesn't submit a form\n                            '<button type=\"button\" class=\"' + buttonClasses.join(' ') + '\"' +\n                                buttonAriaAttr +\n                                '>' + buttonInnerHtml + '</button>');\n                            buttonEl.addEventListener('click', buttonClick);\n                            groupChildren.push(buttonEl);\n                        }\n                    }\n                });\n                if (groupChildren.length > 1) {\n                    groupEl = document.createElement('div');\n                    var buttonGroupClassName = theme.getClass('buttonGroup');\n                    if (isOnlyButtons && buttonGroupClassName) {\n                        groupEl.classList.add(buttonGroupClassName);\n                    }\n                    appendToElement(groupEl, groupChildren);\n                    sectionEl.appendChild(groupEl);\n                }\n                else {\n                    appendToElement(sectionEl, groupChildren); // 1 or 0 children\n                }\n            });\n        }\n        return sectionEl;\n    };\n    Toolbar.prototype.updateToday = function (isTodayEnabled) {\n        this.toggleButtonEnabled('today', isTodayEnabled);\n    };\n    Toolbar.prototype.updatePrev = function (isPrevEnabled) {\n        this.toggleButtonEnabled('prev', isPrevEnabled);\n    };\n    Toolbar.prototype.updateNext = function (isNextEnabled) {\n        this.toggleButtonEnabled('next', isNextEnabled);\n    };\n    Toolbar.prototype.updateTitle = function (text) {\n        findElements(this.el, 'h2').forEach(function (titleEl) {\n            titleEl.innerText = text;\n        });\n    };\n    Toolbar.prototype.updateActiveButton = function (buttonName) {\n        var theme = this.context.theme;\n        var className = theme.getClass('buttonActive');\n        findElements(this.el, 'button').forEach(function (buttonEl) {\n            if (buttonName && buttonEl.classList.contains('fc-' + buttonName + '-button')) {\n                buttonEl.classList.add(className);\n            }\n            else {\n                buttonEl.classList.remove(className);\n            }\n        });\n    };\n    Toolbar.prototype.toggleButtonEnabled = function (buttonName, bool) {\n        findElements(this.el, '.fc-' + buttonName + '-button').forEach(function (buttonEl) {\n            buttonEl.disabled = !bool;\n        });\n    };\n    return Toolbar;\n}(Component));\n\nvar CalendarComponent = /** @class */ (function (_super) {\n    __extends(CalendarComponent, _super);\n    function CalendarComponent(el) {\n        var _this = _super.call(this) || this;\n        _this.elClassNames = [];\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.renderToolbars = memoizeRendering(_this._renderToolbars, _this._unrenderToolbars, [_this.renderSkeleton]);\n        _this.buildComponentContext = memoize(buildComponentContext);\n        _this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n        _this.el = el;\n        _this.computeTitle = memoize(computeTitle);\n        _this.parseBusinessHours = memoize(function (input) {\n            return parseBusinessHours(input, _this.context.calendar);\n        });\n        return _this;\n    }\n    CalendarComponent.prototype.render = function (props, context) {\n        this.freezeHeight();\n        var title = this.computeTitle(props.dateProfile, props.viewSpec.options);\n        this.renderSkeleton(context);\n        this.renderToolbars(props.viewSpec, props.dateProfile, props.currentDate, title);\n        this.renderView(props, title);\n        this.updateSize();\n        this.thawHeight();\n    };\n    CalendarComponent.prototype.destroy = function () {\n        if (this.header) {\n            this.header.destroy();\n        }\n        if (this.footer) {\n            this.footer.destroy();\n        }\n        this.renderSkeleton.unrender(); // will call destroyView\n        _super.prototype.destroy.call(this);\n    };\n    CalendarComponent.prototype._renderSkeleton = function (context) {\n        this.updateElClassNames(context);\n        prependToElement(this.el, this.contentEl = createElement('div', { className: 'fc-view-container' }));\n        var calendar = context.calendar;\n        for (var _i = 0, _a = calendar.pluginSystem.hooks.viewContainerModifiers; _i < _a.length; _i++) {\n            var modifyViewContainer = _a[_i];\n            modifyViewContainer(this.contentEl, calendar);\n        }\n    };\n    CalendarComponent.prototype._unrenderSkeleton = function () {\n        // weird to have this here\n        if (this.view) {\n            this.savedScroll = this.view.queryScroll();\n            this.view.destroy();\n            this.view = null;\n        }\n        removeElement(this.contentEl);\n        this.removeElClassNames();\n    };\n    CalendarComponent.prototype.removeElClassNames = function () {\n        var classList = this.el.classList;\n        for (var _i = 0, _a = this.elClassNames; _i < _a.length; _i++) {\n            var className = _a[_i];\n            classList.remove(className);\n        }\n        this.elClassNames = [];\n    };\n    CalendarComponent.prototype.updateElClassNames = function (context) {\n        this.removeElClassNames();\n        var theme = context.theme, options = context.options;\n        this.elClassNames = [\n            'fc',\n            'fc-' + options.dir,\n            theme.getClass('widget')\n        ];\n        var classList = this.el.classList;\n        for (var _i = 0, _a = this.elClassNames; _i < _a.length; _i++) {\n            var className = _a[_i];\n            classList.add(className);\n        }\n    };\n    CalendarComponent.prototype._renderToolbars = function (viewSpec, dateProfile, currentDate, title) {\n        var _a = this, context = _a.context, header = _a.header, footer = _a.footer;\n        var options = context.options, calendar = context.calendar;\n        var headerLayout = options.header;\n        var footerLayout = options.footer;\n        var dateProfileGenerator = this.props.dateProfileGenerator;\n        var now = calendar.getNow();\n        var todayInfo = dateProfileGenerator.build(now);\n        var prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate);\n        var nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate);\n        var toolbarProps = {\n            title: title,\n            activeButton: viewSpec.type,\n            isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n            isPrevEnabled: prevInfo.isValid,\n            isNextEnabled: nextInfo.isValid\n        };\n        if (headerLayout) {\n            if (!header) {\n                header = this.header = new Toolbar('fc-header-toolbar');\n                prependToElement(this.el, header.el);\n            }\n            header.receiveProps(__assign({ layout: headerLayout }, toolbarProps), context);\n        }\n        else if (header) {\n            header.destroy();\n            header = this.header = null;\n        }\n        if (footerLayout) {\n            if (!footer) {\n                footer = this.footer = new Toolbar('fc-footer-toolbar');\n                appendToElement(this.el, footer.el);\n            }\n            footer.receiveProps(__assign({ layout: footerLayout }, toolbarProps), context);\n        }\n        else if (footer) {\n            footer.destroy();\n            footer = this.footer = null;\n        }\n    };\n    CalendarComponent.prototype._unrenderToolbars = function () {\n        if (this.header) {\n            this.header.destroy();\n            this.header = null;\n        }\n        if (this.footer) {\n            this.footer.destroy();\n            this.footer = null;\n        }\n    };\n    CalendarComponent.prototype.renderView = function (props, title) {\n        var view = this.view;\n        var _a = this.context, calendar = _a.calendar, options = _a.options;\n        var viewSpec = props.viewSpec, dateProfileGenerator = props.dateProfileGenerator;\n        if (!view || view.viewSpec !== viewSpec) {\n            if (view) {\n                view.destroy();\n            }\n            view = this.view = new viewSpec['class'](viewSpec, this.contentEl);\n            if (this.savedScroll) {\n                view.addScroll(this.savedScroll, true);\n                this.savedScroll = null;\n            }\n        }\n        view.title = title; // for the API\n        var viewProps = {\n            dateProfileGenerator: dateProfileGenerator,\n            dateProfile: props.dateProfile,\n            businessHours: this.parseBusinessHours(viewSpec.options.businessHours),\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            dateSelection: props.dateSelection,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize\n        };\n        var transformers = this.buildViewPropTransformers(calendar.pluginSystem.hooks.viewPropsTransformers);\n        for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n            var transformer = transformers_1[_i];\n            __assign(viewProps, transformer.transform(viewProps, viewSpec, props, options));\n        }\n        view.receiveProps(viewProps, this.buildComponentContext(this.context, viewSpec, view));\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarComponent.prototype.updateSize = function (isResize) {\n        if (isResize === void 0) { isResize = false; }\n        var view = this.view;\n        if (!view) {\n            return; // why?\n        }\n        if (isResize || this.isHeightAuto == null) {\n            this.computeHeightVars();\n        }\n        view.updateSize(isResize, this.viewHeight, this.isHeightAuto);\n        view.updateNowIndicator(); // we need to guarantee this will run after updateSize\n        view.popScroll(isResize);\n    };\n    CalendarComponent.prototype.computeHeightVars = function () {\n        var calendar = this.context.calendar; // yuck. need to handle dynamic options\n        var heightInput = calendar.opt('height');\n        var contentHeightInput = calendar.opt('contentHeight');\n        this.isHeightAuto = heightInput === 'auto' || contentHeightInput === 'auto';\n        if (typeof contentHeightInput === 'number') { // exists and not 'auto'\n            this.viewHeight = contentHeightInput;\n        }\n        else if (typeof contentHeightInput === 'function') { // exists and is a function\n            this.viewHeight = contentHeightInput();\n        }\n        else if (typeof heightInput === 'number') { // exists and not 'auto'\n            this.viewHeight = heightInput - this.queryToolbarsHeight();\n        }\n        else if (typeof heightInput === 'function') { // exists and is a function\n            this.viewHeight = heightInput() - this.queryToolbarsHeight();\n        }\n        else if (heightInput === 'parent') { // set to height of parent element\n            var parentEl = this.el.parentNode;\n            this.viewHeight = parentEl.getBoundingClientRect().height - this.queryToolbarsHeight();\n        }\n        else {\n            this.viewHeight = Math.round(this.contentEl.getBoundingClientRect().width /\n                Math.max(calendar.opt('aspectRatio'), .5));\n        }\n    };\n    CalendarComponent.prototype.queryToolbarsHeight = function () {\n        var height = 0;\n        if (this.header) {\n            height += computeHeightAndMargins(this.header.el);\n        }\n        if (this.footer) {\n            height += computeHeightAndMargins(this.footer.el);\n        }\n        return height;\n    };\n    // Height \"Freezing\"\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarComponent.prototype.freezeHeight = function () {\n        applyStyle(this.el, {\n            height: this.el.getBoundingClientRect().height,\n            overflow: 'hidden'\n        });\n    };\n    CalendarComponent.prototype.thawHeight = function () {\n        applyStyle(this.el, {\n            height: '',\n            overflow: ''\n        });\n    };\n    return CalendarComponent;\n}(Component));\n// Title and Date Formatting\n// -----------------------------------------------------------------------------------------------------------------\n// Computes what the title at the top of the calendar should be for this view\nfunction computeTitle(dateProfile, viewOptions) {\n    var range;\n    // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n    if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n        range = dateProfile.currentRange;\n    }\n    else { // for day units or smaller, use the actual day range\n        range = dateProfile.activeRange;\n    }\n    return this.context.dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || computeTitleFormat(dateProfile), viewOptions.titleRangeSeparator), { isEndExclusive: dateProfile.isRangeAllDay });\n}\n// Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\nfunction computeTitleFormat(dateProfile) {\n    var currentRangeUnit = dateProfile.currentRangeUnit;\n    if (currentRangeUnit === 'year') {\n        return { year: 'numeric' };\n    }\n    else if (currentRangeUnit === 'month') {\n        return { year: 'numeric', month: 'long' }; // like \"September 2014\"\n    }\n    else {\n        var days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n        if (days !== null && days > 1) {\n            // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n            return { year: 'numeric', month: 'short', day: 'numeric' };\n        }\n        else {\n            // one day. longer, like \"September 9 2014\"\n            return { year: 'numeric', month: 'long', day: 'numeric' };\n        }\n    }\n}\n// build a context scoped to the view\nfunction buildComponentContext(context, viewSpec, view) {\n    return context.extend(viewSpec.options, view);\n}\n// Plugin\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildViewPropTransformers(theClasses) {\n    return theClasses.map(function (theClass) {\n        return new theClass();\n    });\n}\n\nvar Interaction = /** @class */ (function () {\n    function Interaction(settings) {\n        this.component = settings.component;\n    }\n    Interaction.prototype.destroy = function () {\n    };\n    return Interaction;\n}());\nfunction parseInteractionSettings(component, input) {\n    return {\n        component: component,\n        el: input.el,\n        useEventCenter: input.useEventCenter != null ? input.useEventCenter : true\n    };\n}\nfunction interactionSettingsToStore(settings) {\n    var _a;\n    return _a = {},\n        _a[settings.component.uid] = settings,\n        _a;\n}\n// global state\nvar interactionSettingsStore = {};\n\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\nvar EventClicking = /** @class */ (function (_super) {\n    __extends(EventClicking, _super);\n    function EventClicking(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.handleSegClick = function (ev, segEl) {\n            var component = _this.component;\n            var _a = component.context, calendar = _a.calendar, view = _a.view;\n            var seg = getElSeg(segEl);\n            if (seg && // might be the <div> surrounding the more link\n                component.isValidSegDownEl(ev.target)) {\n                // our way to simulate a link click for elements that can't be <a> tags\n                // grab before trigger fired in case trigger trashes DOM thru rerendering\n                var hasUrlContainer = elementClosest(ev.target, '.fc-has-url');\n                var url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n                calendar.publiclyTrigger('eventClick', [\n                    {\n                        el: segEl,\n                        event: new EventApi(component.context.calendar, seg.eventRange.def, seg.eventRange.instance),\n                        jsEvent: ev,\n                        view: view\n                    }\n                ]);\n                if (url && !ev.defaultPrevented) {\n                    window.location.href = url;\n                }\n            }\n        };\n        var component = settings.component;\n        _this.destroy = listenBySelector(component.el, 'click', component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegClick);\n        return _this;\n    }\n    return EventClicking;\n}(Interaction));\n\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\nvar EventHovering = /** @class */ (function (_super) {\n    __extends(EventHovering, _super);\n    function EventHovering(settings) {\n        var _this = _super.call(this, settings) || this;\n        // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n        _this.handleEventElRemove = function (el) {\n            if (el === _this.currentSegEl) {\n                _this.handleSegLeave(null, _this.currentSegEl);\n            }\n        };\n        _this.handleSegEnter = function (ev, segEl) {\n            if (getElSeg(segEl)) { // TODO: better way to make sure not hovering over more+ link or its wrapper\n                segEl.classList.add('fc-allow-mouse-resize');\n                _this.currentSegEl = segEl;\n                _this.triggerEvent('eventMouseEnter', ev, segEl);\n            }\n        };\n        _this.handleSegLeave = function (ev, segEl) {\n            if (_this.currentSegEl) {\n                segEl.classList.remove('fc-allow-mouse-resize');\n                _this.currentSegEl = null;\n                _this.triggerEvent('eventMouseLeave', ev, segEl);\n            }\n        };\n        var component = settings.component;\n        _this.removeHoverListeners = listenToHoverBySelector(component.el, component.fgSegSelector + ',' + component.bgSegSelector, _this.handleSegEnter, _this.handleSegLeave);\n        // how to make sure component already has context?\n        component.context.calendar.on('eventElRemove', _this.handleEventElRemove);\n        return _this;\n    }\n    EventHovering.prototype.destroy = function () {\n        this.removeHoverListeners();\n        this.component.context.calendar.off('eventElRemove', this.handleEventElRemove);\n    };\n    EventHovering.prototype.triggerEvent = function (publicEvName, ev, segEl) {\n        var component = this.component;\n        var _a = component.context, calendar = _a.calendar, view = _a.view;\n        var seg = getElSeg(segEl);\n        if (!ev || component.isValidSegDownEl(ev.target)) {\n            calendar.publiclyTrigger(publicEvName, [\n                {\n                    el: segEl,\n                    event: new EventApi(calendar, seg.eventRange.def, seg.eventRange.instance),\n                    jsEvent: ev,\n                    view: view\n                }\n            ]);\n        }\n    };\n    return EventHovering;\n}(Interaction));\n\nvar StandardTheme = /** @class */ (function (_super) {\n    __extends(StandardTheme, _super);\n    function StandardTheme() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return StandardTheme;\n}(Theme));\nStandardTheme.prototype.classes = {\n    widget: 'fc-unthemed',\n    widgetHeader: 'fc-widget-header',\n    widgetContent: 'fc-widget-content',\n    buttonGroup: 'fc-button-group',\n    button: 'fc-button fc-button-primary',\n    buttonActive: 'fc-button-active',\n    popoverHeader: 'fc-widget-header',\n    popoverContent: 'fc-widget-content',\n    // day grid\n    headerRow: 'fc-widget-header',\n    dayRow: 'fc-widget-content',\n    // list view\n    listView: 'fc-widget-content'\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n    close: 'fc-icon-x',\n    prev: 'fc-icon-chevron-left',\n    next: 'fc-icon-chevron-right',\n    prevYear: 'fc-icon-chevrons-left',\n    nextYear: 'fc-icon-chevrons-right'\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons';\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\nvar Calendar = /** @class */ (function () {\n    function Calendar(el, overrides) {\n        var _this = this;\n        this.buildComponentContext = memoize(buildComponentContext$1);\n        this.parseRawLocales = memoize(parseRawLocales);\n        this.buildLocale = memoize(buildLocale);\n        this.buildDateEnv = memoize(buildDateEnv);\n        this.buildTheme = memoize(buildTheme);\n        this.buildEventUiSingleBase = memoize(this._buildEventUiSingleBase);\n        this.buildSelectionConfig = memoize(this._buildSelectionConfig);\n        this.buildEventUiBySource = memoizeOutput(buildEventUiBySource, isPropsEqual);\n        this.buildEventUiBases = memoize(buildEventUiBases);\n        this.interactionsStore = {};\n        this.actionQueue = [];\n        this.isReducing = false;\n        // isDisplaying: boolean = false // installed in DOM? accepting renders?\n        this.needsRerender = false; // needs a render?\n        this.isRendering = false; // currently in the executeRender function?\n        this.renderingPauseDepth = 0;\n        this.buildDelayedRerender = memoize(buildDelayedRerender);\n        this.afterSizingTriggers = {};\n        this.isViewUpdated = false;\n        this.isDatesUpdated = false;\n        this.isEventsUpdated = false;\n        this.el = el;\n        this.optionsManager = new OptionsManager(overrides || {});\n        this.pluginSystem = new PluginSystem();\n        // only do once. don't do in handleOptions. because can't remove plugins\n        this.addPluginInputs(this.optionsManager.computed.plugins || []);\n        this.handleOptions(this.optionsManager.computed);\n        this.publiclyTrigger('_init'); // for tests\n        this.hydrate();\n        this.calendarInteractions = this.pluginSystem.hooks.calendarInteractions\n            .map(function (calendarInteractionClass) {\n            return new calendarInteractionClass(_this);\n        });\n    }\n    Calendar.prototype.addPluginInputs = function (pluginInputs) {\n        var pluginDefs = refinePluginDefs(pluginInputs);\n        for (var _i = 0, pluginDefs_1 = pluginDefs; _i < pluginDefs_1.length; _i++) {\n            var pluginDef = pluginDefs_1[_i];\n            this.pluginSystem.add(pluginDef);\n        }\n    };\n    Object.defineProperty(Calendar.prototype, \"view\", {\n        // public API\n        get: function () {\n            return this.component ? this.component.view : null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Public API for rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.render = function () {\n        if (!this.component) {\n            this.component = new CalendarComponent(this.el);\n            this.renderableEventStore = createEmptyEventStore();\n            this.bindHandlers();\n            this.executeRender();\n        }\n        else {\n            this.requestRerender();\n        }\n    };\n    Calendar.prototype.destroy = function () {\n        if (this.component) {\n            this.unbindHandlers();\n            this.component.destroy(); // don't null-out. in case API needs access\n            this.component = null; // umm ???\n            for (var _i = 0, _a = this.calendarInteractions; _i < _a.length; _i++) {\n                var interaction = _a[_i];\n                interaction.destroy();\n            }\n            this.publiclyTrigger('_destroyed');\n        }\n    };\n    // Handlers\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.bindHandlers = function () {\n        var _this = this;\n        // event delegation for nav links\n        this.removeNavLinkListener = listenBySelector(this.el, 'click', 'a[data-goto]', function (ev, anchorEl) {\n            var gotoOptions = anchorEl.getAttribute('data-goto');\n            gotoOptions = gotoOptions ? JSON.parse(gotoOptions) : {};\n            var dateEnv = _this.dateEnv;\n            var dateMarker = dateEnv.createMarker(gotoOptions.date);\n            var viewType = gotoOptions.type;\n            // property like \"navLinkDayClick\". might be a string or a function\n            var customAction = _this.viewOpt('navLink' + capitaliseFirstLetter(viewType) + 'Click');\n            if (typeof customAction === 'function') {\n                customAction(dateEnv.toDate(dateMarker), ev);\n            }\n            else {\n                if (typeof customAction === 'string') {\n                    viewType = customAction;\n                }\n                _this.zoomTo(dateMarker, viewType);\n            }\n        });\n        if (this.opt('handleWindowResize')) {\n            window.addEventListener('resize', this.windowResizeProxy = debounce(// prevents rapid calls\n            this.windowResize.bind(this), this.opt('windowResizeDelay')));\n        }\n    };\n    Calendar.prototype.unbindHandlers = function () {\n        this.removeNavLinkListener();\n        if (this.windowResizeProxy) {\n            window.removeEventListener('resize', this.windowResizeProxy);\n            this.windowResizeProxy = null;\n        }\n    };\n    // Dispatcher\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.hydrate = function () {\n        var _this = this;\n        this.state = this.buildInitialState();\n        var rawSources = this.opt('eventSources') || [];\n        var singleRawSource = this.opt('events');\n        var sources = []; // parsed\n        if (singleRawSource) {\n            rawSources.unshift(singleRawSource);\n        }\n        for (var _i = 0, rawSources_1 = rawSources; _i < rawSources_1.length; _i++) {\n            var rawSource = rawSources_1[_i];\n            var source = parseEventSource(rawSource, this);\n            if (source) {\n                sources.push(source);\n            }\n        }\n        this.batchRendering(function () {\n            _this.dispatch({ type: 'INIT' }); // pass in sources here?\n            _this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: sources });\n            _this.dispatch({\n                type: 'SET_VIEW_TYPE',\n                viewType: _this.opt('defaultView') || _this.pluginSystem.hooks.defaultView\n            });\n        });\n    };\n    Calendar.prototype.buildInitialState = function () {\n        return {\n            viewType: null,\n            loadingLevel: 0,\n            eventSourceLoadingLevel: 0,\n            currentDate: this.getInitialDate(),\n            dateProfile: null,\n            eventSources: {},\n            eventStore: createEmptyEventStore(),\n            dateSelection: null,\n            eventSelection: '',\n            eventDrag: null,\n            eventResize: null\n        };\n    };\n    Calendar.prototype.dispatch = function (action) {\n        this.actionQueue.push(action);\n        if (!this.isReducing) {\n            this.isReducing = true;\n            var oldState = this.state;\n            while (this.actionQueue.length) {\n                this.state = this.reduce(this.state, this.actionQueue.shift(), this);\n            }\n            var newState = this.state;\n            this.isReducing = false;\n            if (!oldState.loadingLevel && newState.loadingLevel) {\n                this.publiclyTrigger('loading', [true]);\n            }\n            else if (oldState.loadingLevel && !newState.loadingLevel) {\n                this.publiclyTrigger('loading', [false]);\n            }\n            var view = this.component && this.component.view;\n            if (oldState.eventStore !== newState.eventStore) {\n                if (oldState.eventStore) {\n                    this.isEventsUpdated = true;\n                }\n            }\n            if (oldState.dateProfile !== newState.dateProfile) {\n                if (oldState.dateProfile && view) { // why would view be null!?\n                    this.publiclyTrigger('datesDestroy', [\n                        {\n                            view: view,\n                            el: view.el\n                        }\n                    ]);\n                }\n                this.isDatesUpdated = true;\n            }\n            if (oldState.viewType !== newState.viewType) {\n                if (oldState.viewType && view) { // why would view be null!?\n                    this.publiclyTrigger('viewSkeletonDestroy', [\n                        {\n                            view: view,\n                            el: view.el\n                        }\n                    ]);\n                }\n                this.isViewUpdated = true;\n            }\n            this.requestRerender();\n        }\n    };\n    Calendar.prototype.reduce = function (state, action, calendar) {\n        return reduce(state, action, calendar);\n    };\n    // Render Queue\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.requestRerender = function () {\n        this.needsRerender = true;\n        this.delayedRerender(); // will call a debounced-version of tryRerender\n    };\n    Calendar.prototype.tryRerender = function () {\n        if (this.component && // must be accepting renders\n            this.needsRerender && // indicates that a rerender was requested\n            !this.renderingPauseDepth && // not paused\n            !this.isRendering // not currently in the render loop\n        ) {\n            this.executeRender();\n        }\n    };\n    Calendar.prototype.batchRendering = function (func) {\n        this.renderingPauseDepth++;\n        func();\n        this.renderingPauseDepth--;\n        if (this.needsRerender) {\n            this.requestRerender();\n        }\n    };\n    // Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.executeRender = function () {\n        // clear these BEFORE the render so that new values will accumulate during render\n        this.needsRerender = false;\n        this.isRendering = true;\n        this.renderComponent();\n        this.isRendering = false;\n        // received a rerender request while rendering\n        if (this.needsRerender) {\n            this.delayedRerender();\n        }\n    };\n    /*\n    don't call this directly. use executeRender instead\n    */\n    Calendar.prototype.renderComponent = function () {\n        var _a = this, state = _a.state, component = _a.component;\n        var viewType = state.viewType;\n        var viewSpec = this.viewSpecs[viewType];\n        if (!viewSpec) {\n            throw new Error(\"View type \\\"\" + viewType + \"\\\" is not valid\");\n        }\n        // if event sources are still loading and progressive rendering hasn't been enabled,\n        // keep rendering the last fully loaded set of events\n        var renderableEventStore = this.renderableEventStore =\n            (state.eventSourceLoadingLevel && !this.opt('progressiveEventRendering')) ?\n                this.renderableEventStore :\n                state.eventStore;\n        var eventUiSingleBase = this.buildEventUiSingleBase(viewSpec.options);\n        var eventUiBySource = this.buildEventUiBySource(state.eventSources);\n        var eventUiBases = this.eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n        component.receiveProps(__assign({}, state, { viewSpec: viewSpec, dateProfileGenerator: this.dateProfileGenerators[viewType], dateProfile: state.dateProfile, eventStore: renderableEventStore, eventUiBases: eventUiBases, dateSelection: state.dateSelection, eventSelection: state.eventSelection, eventDrag: state.eventDrag, eventResize: state.eventResize }), this.buildComponentContext(this.theme, this.dateEnv, this.optionsManager.computed));\n        if (this.isViewUpdated) {\n            this.isViewUpdated = false;\n            this.publiclyTrigger('viewSkeletonRender', [\n                {\n                    view: component.view,\n                    el: component.view.el\n                }\n            ]);\n        }\n        if (this.isDatesUpdated) {\n            this.isDatesUpdated = false;\n            this.publiclyTrigger('datesRender', [\n                {\n                    view: component.view,\n                    el: component.view.el\n                }\n            ]);\n        }\n        if (this.isEventsUpdated) {\n            this.isEventsUpdated = false;\n        }\n        this.releaseAfterSizingTriggers();\n    };\n    // Options\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.setOption = function (name, val) {\n        var _a;\n        this.mutateOptions((_a = {}, _a[name] = val, _a), [], true);\n    };\n    Calendar.prototype.getOption = function (name) {\n        return this.optionsManager.computed[name];\n    };\n    Calendar.prototype.opt = function (name) {\n        return this.optionsManager.computed[name];\n    };\n    Calendar.prototype.viewOpt = function (name) {\n        return this.viewOpts()[name];\n    };\n    Calendar.prototype.viewOpts = function () {\n        return this.viewSpecs[this.state.viewType].options;\n    };\n    /*\n    handles option changes (like a diff)\n    */\n    Calendar.prototype.mutateOptions = function (updates, removals, isDynamic, deepEqual) {\n        var _this = this;\n        var changeHandlers = this.pluginSystem.hooks.optionChangeHandlers;\n        var normalUpdates = {};\n        var specialUpdates = {};\n        var oldDateEnv = this.dateEnv; // do this before handleOptions\n        var isTimeZoneDirty = false;\n        var isSizeDirty = false;\n        var anyDifficultOptions = Boolean(removals.length);\n        for (var name_1 in updates) {\n            if (changeHandlers[name_1]) {\n                specialUpdates[name_1] = updates[name_1];\n            }\n            else {\n                normalUpdates[name_1] = updates[name_1];\n            }\n        }\n        for (var name_2 in normalUpdates) {\n            if (/^(height|contentHeight|aspectRatio)$/.test(name_2)) {\n                isSizeDirty = true;\n            }\n            else if (/^(defaultDate|defaultView)$/.test(name_2)) ;\n            else {\n                anyDifficultOptions = true;\n                if (name_2 === 'timeZone') {\n                    isTimeZoneDirty = true;\n                }\n            }\n        }\n        this.optionsManager.mutate(normalUpdates, removals, isDynamic);\n        if (anyDifficultOptions) {\n            this.handleOptions(this.optionsManager.computed);\n        }\n        this.batchRendering(function () {\n            if (anyDifficultOptions) {\n                if (isTimeZoneDirty) {\n                    _this.dispatch({\n                        type: 'CHANGE_TIMEZONE',\n                        oldDateEnv: oldDateEnv\n                    });\n                }\n                /* HACK\n                has the same effect as calling this.requestRerender()\n                but recomputes the state's dateProfile\n                */\n                _this.dispatch({\n                    type: 'SET_VIEW_TYPE',\n                    viewType: _this.state.viewType\n                });\n            }\n            else if (isSizeDirty) {\n                _this.updateSize();\n            }\n            // special updates\n            if (deepEqual) {\n                for (var name_3 in specialUpdates) {\n                    changeHandlers[name_3](specialUpdates[name_3], _this, deepEqual);\n                }\n            }\n        });\n    };\n    /*\n    rebuilds things based off of a complete set of refined options\n    */\n    Calendar.prototype.handleOptions = function (options) {\n        var _this = this;\n        var pluginHooks = this.pluginSystem.hooks;\n        this.defaultAllDayEventDuration = createDuration(options.defaultAllDayEventDuration);\n        this.defaultTimedEventDuration = createDuration(options.defaultTimedEventDuration);\n        this.delayedRerender = this.buildDelayedRerender(options.rerenderDelay);\n        this.theme = this.buildTheme(options);\n        var available = this.parseRawLocales(options.locales);\n        this.availableRawLocales = available.map;\n        var locale = this.buildLocale(options.locale || available.defaultCode, available.map);\n        this.dateEnv = this.buildDateEnv(locale, options.timeZone, pluginHooks.namedTimeZonedImpl, options.firstDay, options.weekNumberCalculation, options.weekLabel, pluginHooks.cmdFormatter);\n        this.selectionConfig = this.buildSelectionConfig(options); // needs dateEnv. do after :(\n        // ineffecient to do every time?\n        this.viewSpecs = buildViewSpecs(pluginHooks.views, this.optionsManager);\n        // ineffecient to do every time?\n        this.dateProfileGenerators = mapHash(this.viewSpecs, function (viewSpec) {\n            return new viewSpec.class.prototype.dateProfileGeneratorClass(viewSpec, _this);\n        });\n    };\n    Calendar.prototype.getAvailableLocaleCodes = function () {\n        return Object.keys(this.availableRawLocales);\n    };\n    Calendar.prototype._buildSelectionConfig = function (rawOpts) {\n        return processScopedUiProps('select', rawOpts, this);\n    };\n    Calendar.prototype._buildEventUiSingleBase = function (rawOpts) {\n        if (rawOpts.editable) { // so 'editable' affected events\n            rawOpts = __assign({}, rawOpts, { eventEditable: true });\n        }\n        return processScopedUiProps('event', rawOpts, this);\n    };\n    // Trigger\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.hasPublicHandlers = function (name) {\n        return this.hasHandlers(name) ||\n            this.opt(name); // handler specified in options\n    };\n    Calendar.prototype.publiclyTrigger = function (name, args) {\n        var optHandler = this.opt(name);\n        this.triggerWith(name, this, args);\n        if (optHandler) {\n            return optHandler.apply(this, args);\n        }\n    };\n    Calendar.prototype.publiclyTriggerAfterSizing = function (name, args) {\n        var afterSizingTriggers = this.afterSizingTriggers;\n        (afterSizingTriggers[name] || (afterSizingTriggers[name] = [])).push(args);\n    };\n    Calendar.prototype.releaseAfterSizingTriggers = function () {\n        var afterSizingTriggers = this.afterSizingTriggers;\n        for (var name_4 in afterSizingTriggers) {\n            for (var _i = 0, _a = afterSizingTriggers[name_4]; _i < _a.length; _i++) {\n                var args = _a[_i];\n                this.publiclyTrigger(name_4, args);\n            }\n        }\n        this.afterSizingTriggers = {};\n    };\n    // View\n    // -----------------------------------------------------------------------------------------------------------------\n    // Returns a boolean about whether the view is okay to instantiate at some point\n    Calendar.prototype.isValidViewType = function (viewType) {\n        return Boolean(this.viewSpecs[viewType]);\n    };\n    Calendar.prototype.changeView = function (viewType, dateOrRange) {\n        var dateMarker = null;\n        if (dateOrRange) {\n            if (dateOrRange.start && dateOrRange.end) { // a range\n                this.optionsManager.mutate({ visibleRange: dateOrRange }, []); // will not rerender\n                this.handleOptions(this.optionsManager.computed); // ...but yuck\n            }\n            else { // a date\n                dateMarker = this.dateEnv.createMarker(dateOrRange); // just like gotoDate\n            }\n        }\n        this.unselect();\n        this.dispatch({\n            type: 'SET_VIEW_TYPE',\n            viewType: viewType,\n            dateMarker: dateMarker\n        });\n    };\n    // Forces navigation to a view for the given date.\n    // `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n    // needs to change\n    Calendar.prototype.zoomTo = function (dateMarker, viewType) {\n        var spec;\n        viewType = viewType || 'day'; // day is default zoom\n        spec = this.viewSpecs[viewType] ||\n            this.getUnitViewSpec(viewType);\n        this.unselect();\n        if (spec) {\n            this.dispatch({\n                type: 'SET_VIEW_TYPE',\n                viewType: spec.type,\n                dateMarker: dateMarker\n            });\n        }\n        else {\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: dateMarker\n            });\n        }\n    };\n    // Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n    // Preference is given to views that have corresponding buttons.\n    Calendar.prototype.getUnitViewSpec = function (unit) {\n        var component = this.component;\n        var viewTypes = [];\n        var i;\n        var spec;\n        // put views that have buttons first. there will be duplicates, but oh\n        if (component.header) {\n            viewTypes.push.apply(viewTypes, component.header.viewsWithButtons);\n        }\n        if (component.footer) {\n            viewTypes.push.apply(viewTypes, component.footer.viewsWithButtons);\n        }\n        for (var viewType in this.viewSpecs) {\n            viewTypes.push(viewType);\n        }\n        for (i = 0; i < viewTypes.length; i++) {\n            spec = this.viewSpecs[viewTypes[i]];\n            if (spec) {\n                if (spec.singleUnit === unit) {\n                    return spec;\n                }\n            }\n        }\n    };\n    // Current Date\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.getInitialDate = function () {\n        var defaultDateInput = this.opt('defaultDate');\n        // compute the initial ambig-timezone date\n        if (defaultDateInput != null) {\n            return this.dateEnv.createMarker(defaultDateInput);\n        }\n        else {\n            return this.getNow(); // getNow already returns unzoned\n        }\n    };\n    Calendar.prototype.prev = function () {\n        this.unselect();\n        this.dispatch({ type: 'PREV' });\n    };\n    Calendar.prototype.next = function () {\n        this.unselect();\n        this.dispatch({ type: 'NEXT' });\n    };\n    Calendar.prototype.prevYear = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.addYears(this.state.currentDate, -1)\n        });\n    };\n    Calendar.prototype.nextYear = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.addYears(this.state.currentDate, 1)\n        });\n    };\n    Calendar.prototype.today = function () {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.getNow()\n        });\n    };\n    Calendar.prototype.gotoDate = function (zonedDateInput) {\n        this.unselect();\n        this.dispatch({\n            type: 'SET_DATE',\n            dateMarker: this.dateEnv.createMarker(zonedDateInput)\n        });\n    };\n    Calendar.prototype.incrementDate = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // else, warn about invalid input?\n            this.unselect();\n            this.dispatch({\n                type: 'SET_DATE',\n                dateMarker: this.dateEnv.add(this.state.currentDate, delta)\n            });\n        }\n    };\n    // for external API\n    Calendar.prototype.getDate = function () {\n        return this.dateEnv.toDate(this.state.currentDate);\n    };\n    // Date Formatting Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.formatDate = function (d, formatter) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.format(dateEnv.createMarker(d), createFormatter(formatter));\n    };\n    // `settings` is for formatter AND isEndExclusive\n    Calendar.prototype.formatRange = function (d0, d1, settings) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.formatRange(dateEnv.createMarker(d0), dateEnv.createMarker(d1), createFormatter(settings, this.opt('defaultRangeSeparator')), settings);\n    };\n    Calendar.prototype.formatIso = function (d, omitTime) {\n        var dateEnv = this.dateEnv;\n        return dateEnv.formatIso(dateEnv.createMarker(d), { omitTime: omitTime });\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.windowResize = function (ev) {\n        if (!this.isHandlingWindowResize &&\n            this.component && // why?\n            ev.target === window // not a jqui resize event\n        ) {\n            this.isHandlingWindowResize = true;\n            this.updateSize();\n            this.publiclyTrigger('windowResize', [this.view]);\n            this.isHandlingWindowResize = false;\n        }\n    };\n    Calendar.prototype.updateSize = function () {\n        if (this.component) { // when?\n            this.component.updateSize(true);\n        }\n    };\n    // Component Registration\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.registerInteractiveComponent = function (component, settingsInput) {\n        var settings = parseInteractionSettings(component, settingsInput);\n        var DEFAULT_INTERACTIONS = [\n            EventClicking,\n            EventHovering\n        ];\n        var interactionClasses = DEFAULT_INTERACTIONS.concat(this.pluginSystem.hooks.componentInteractions);\n        var interactions = interactionClasses.map(function (interactionClass) {\n            return new interactionClass(settings);\n        });\n        this.interactionsStore[component.uid] = interactions;\n        interactionSettingsStore[component.uid] = settings;\n    };\n    Calendar.prototype.unregisterInteractiveComponent = function (component) {\n        for (var _i = 0, _a = this.interactionsStore[component.uid]; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener.destroy();\n        }\n        delete this.interactionsStore[component.uid];\n        delete interactionSettingsStore[component.uid];\n    };\n    // Date Selection / Event Selection / DayClick\n    // -----------------------------------------------------------------------------------------------------------------\n    // this public method receives start/end dates in any format, with any timezone\n    // NOTE: args were changed from v3\n    Calendar.prototype.select = function (dateOrObj, endDate) {\n        var selectionInput;\n        if (endDate == null) {\n            if (dateOrObj.start != null) {\n                selectionInput = dateOrObj;\n            }\n            else {\n                selectionInput = {\n                    start: dateOrObj,\n                    end: null\n                };\n            }\n        }\n        else {\n            selectionInput = {\n                start: dateOrObj,\n                end: endDate\n            };\n        }\n        var selection = parseDateSpan(selectionInput, this.dateEnv, createDuration({ days: 1 }) // TODO: cache this?\n        );\n        if (selection) { // throw parse error otherwise?\n            this.dispatch({ type: 'SELECT_DATES', selection: selection });\n            this.triggerDateSelect(selection);\n        }\n    };\n    // public method\n    Calendar.prototype.unselect = function (pev) {\n        if (this.state.dateSelection) {\n            this.dispatch({ type: 'UNSELECT_DATES' });\n            this.triggerDateUnselect(pev);\n        }\n    };\n    Calendar.prototype.triggerDateSelect = function (selection, pev) {\n        var arg = __assign({}, this.buildDateSpanApi(selection), { jsEvent: pev ? pev.origEvent : null, view: this.view });\n        this.publiclyTrigger('select', [arg]);\n    };\n    Calendar.prototype.triggerDateUnselect = function (pev) {\n        this.publiclyTrigger('unselect', [\n            {\n                jsEvent: pev ? pev.origEvent : null,\n                view: this.view\n            }\n        ]);\n    };\n    // TODO: receive pev?\n    Calendar.prototype.triggerDateClick = function (dateSpan, dayEl, view, ev) {\n        var arg = __assign({}, this.buildDatePointApi(dateSpan), { dayEl: dayEl, jsEvent: ev, // Is this always a mouse event? See #4655\n            view: view });\n        this.publiclyTrigger('dateClick', [arg]);\n    };\n    Calendar.prototype.buildDatePointApi = function (dateSpan) {\n        var props = {};\n        for (var _i = 0, _a = this.pluginSystem.hooks.datePointTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(props, transform(dateSpan, this));\n        }\n        __assign(props, buildDatePointApi(dateSpan, this.dateEnv));\n        return props;\n    };\n    Calendar.prototype.buildDateSpanApi = function (dateSpan) {\n        var props = {};\n        for (var _i = 0, _a = this.pluginSystem.hooks.dateSpanTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(props, transform(dateSpan, this));\n        }\n        __assign(props, buildDateSpanApi(dateSpan, this.dateEnv));\n        return props;\n    };\n    // Date Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    // Returns a DateMarker for the current date, as defined by the client's computer or from the `now` option\n    Calendar.prototype.getNow = function () {\n        var now = this.opt('now');\n        if (typeof now === 'function') {\n            now = now();\n        }\n        if (now == null) {\n            return this.dateEnv.createNowMarker();\n        }\n        return this.dateEnv.createMarker(now);\n    };\n    // Event-Date Utilities\n    // -----------------------------------------------------------------------------------------------------------------\n    // Given an event's allDay status and start date, return what its fallback end date should be.\n    // TODO: rename to computeDefaultEventEnd\n    Calendar.prototype.getDefaultEventEnd = function (allDay, marker) {\n        var end = marker;\n        if (allDay) {\n            end = startOfDay(end);\n            end = this.dateEnv.add(end, this.defaultAllDayEventDuration);\n        }\n        else {\n            end = this.dateEnv.add(end, this.defaultTimedEventDuration);\n        }\n        return end;\n    };\n    // Public Events API\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.addEvent = function (eventInput, sourceInput) {\n        if (eventInput instanceof EventApi) {\n            var def = eventInput._def;\n            var instance = eventInput._instance;\n            // not already present? don't want to add an old snapshot\n            if (!this.state.eventStore.defs[def.defId]) {\n                this.dispatch({\n                    type: 'ADD_EVENTS',\n                    eventStore: eventTupleToStore({ def: def, instance: instance }) // TODO: better util for two args?\n                });\n            }\n            return eventInput;\n        }\n        var sourceId;\n        if (sourceInput instanceof EventSourceApi) {\n            sourceId = sourceInput.internalEventSource.sourceId;\n        }\n        else if (sourceInput != null) {\n            var sourceApi = this.getEventSourceById(sourceInput); // TODO: use an internal function\n            if (!sourceApi) {\n                console.warn('Could not find an event source with ID \"' + sourceInput + '\"'); // TODO: test\n                return null;\n            }\n            else {\n                sourceId = sourceApi.internalEventSource.sourceId;\n            }\n        }\n        var tuple = parseEvent(eventInput, sourceId, this);\n        if (tuple) {\n            this.dispatch({\n                type: 'ADD_EVENTS',\n                eventStore: eventTupleToStore(tuple)\n            });\n            return new EventApi(this, tuple.def, tuple.def.recurringDef ? null : tuple.instance);\n        }\n        return null;\n    };\n    // TODO: optimize\n    Calendar.prototype.getEventById = function (id) {\n        var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n        id = String(id);\n        for (var defId in defs) {\n            var def = defs[defId];\n            if (def.publicId === id) {\n                if (def.recurringDef) {\n                    return new EventApi(this, def, null);\n                }\n                else {\n                    for (var instanceId in instances) {\n                        var instance = instances[instanceId];\n                        if (instance.defId === def.defId) {\n                            return new EventApi(this, def, instance);\n                        }\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    Calendar.prototype.getEvents = function () {\n        var _a = this.state.eventStore, defs = _a.defs, instances = _a.instances;\n        var eventApis = [];\n        for (var id in instances) {\n            var instance = instances[id];\n            var def = defs[instance.defId];\n            eventApis.push(new EventApi(this, def, instance));\n        }\n        return eventApis;\n    };\n    Calendar.prototype.removeAllEvents = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENTS' });\n    };\n    Calendar.prototype.rerenderEvents = function () {\n        this.dispatch({ type: 'RESET_EVENTS' });\n    };\n    // Public Event Sources API\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.getEventSources = function () {\n        var sourceHash = this.state.eventSources;\n        var sourceApis = [];\n        for (var internalId in sourceHash) {\n            sourceApis.push(new EventSourceApi(this, sourceHash[internalId]));\n        }\n        return sourceApis;\n    };\n    Calendar.prototype.getEventSourceById = function (id) {\n        var sourceHash = this.state.eventSources;\n        id = String(id);\n        for (var sourceId in sourceHash) {\n            if (sourceHash[sourceId].publicId === id) {\n                return new EventSourceApi(this, sourceHash[sourceId]);\n            }\n        }\n        return null;\n    };\n    Calendar.prototype.addEventSource = function (sourceInput) {\n        if (sourceInput instanceof EventSourceApi) {\n            // not already present? don't want to add an old snapshot\n            if (!this.state.eventSources[sourceInput.internalEventSource.sourceId]) {\n                this.dispatch({\n                    type: 'ADD_EVENT_SOURCES',\n                    sources: [sourceInput.internalEventSource]\n                });\n            }\n            return sourceInput;\n        }\n        var eventSource = parseEventSource(sourceInput, this);\n        if (eventSource) { // TODO: error otherwise?\n            this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: [eventSource] });\n            return new EventSourceApi(this, eventSource);\n        }\n        return null;\n    };\n    Calendar.prototype.removeAllEventSources = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENT_SOURCES' });\n    };\n    Calendar.prototype.refetchEvents = function () {\n        this.dispatch({ type: 'FETCH_EVENT_SOURCES' });\n    };\n    // Scroll\n    // -----------------------------------------------------------------------------------------------------------------\n    Calendar.prototype.scrollToTime = function (timeInput) {\n        var duration = createDuration(timeInput);\n        if (duration) {\n            this.component.view.scrollToDuration(duration);\n        }\n    };\n    return Calendar;\n}());\nEmitterMixin.mixInto(Calendar);\n// for memoizers\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildComponentContext$1(theme, dateEnv, options) {\n    return new ComponentContext(this, theme, dateEnv, options, null);\n}\nfunction buildDateEnv(locale, timeZone, namedTimeZoneImpl, firstDay, weekNumberCalculation, weekLabel, cmdFormatter) {\n    return new DateEnv({\n        calendarSystem: 'gregory',\n        timeZone: timeZone,\n        namedTimeZoneImpl: namedTimeZoneImpl,\n        locale: locale,\n        weekNumberCalculation: weekNumberCalculation,\n        firstDay: firstDay,\n        weekLabel: weekLabel,\n        cmdFormatter: cmdFormatter\n    });\n}\nfunction buildTheme(calendarOptions) {\n    var themeClass = this.pluginSystem.hooks.themeClasses[calendarOptions.themeSystem] || StandardTheme;\n    return new themeClass(calendarOptions);\n}\nfunction buildDelayedRerender(wait) {\n    var func = this.tryRerender.bind(this);\n    if (wait != null) {\n        func = debounce(func, wait);\n    }\n    return func;\n}\nfunction buildEventUiBySource(eventSources) {\n    return mapHash(eventSources, function (eventSource) {\n        return eventSource.ui;\n    });\n}\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n    var eventUiBases = { '': eventUiSingleBase };\n    for (var defId in eventDefs) {\n        var def = eventDefs[defId];\n        if (def.sourceId && eventUiBySource[def.sourceId]) {\n            eventUiBases[defId] = eventUiBySource[def.sourceId];\n        }\n    }\n    return eventUiBases;\n}\n\nvar View = /** @class */ (function (_super) {\n    __extends(View, _super);\n    function View(viewSpec, parentEl) {\n        var _this = _super.call(this, createElement('div', { className: 'fc-view fc-' + viewSpec.type + '-view' })) || this;\n        _this.renderDatesMem = memoizeRendering(_this.renderDatesWrap, _this.unrenderDatesWrap);\n        _this.renderBusinessHoursMem = memoizeRendering(_this.renderBusinessHours, _this.unrenderBusinessHours, [_this.renderDatesMem]);\n        _this.renderDateSelectionMem = memoizeRendering(_this.renderDateSelectionWrap, _this.unrenderDateSelectionWrap, [_this.renderDatesMem]);\n        _this.renderEventsMem = memoizeRendering(_this.renderEvents, _this.unrenderEvents, [_this.renderDatesMem]);\n        _this.renderEventSelectionMem = memoizeRendering(_this.renderEventSelectionWrap, _this.unrenderEventSelectionWrap, [_this.renderEventsMem]);\n        _this.renderEventDragMem = memoizeRendering(_this.renderEventDragWrap, _this.unrenderEventDragWrap, [_this.renderDatesMem]);\n        _this.renderEventResizeMem = memoizeRendering(_this.renderEventResizeWrap, _this.unrenderEventResizeWrap, [_this.renderDatesMem]);\n        _this.viewSpec = viewSpec;\n        _this.type = viewSpec.type;\n        parentEl.appendChild(_this.el);\n        _this.initialize();\n        return _this;\n    }\n    View.prototype.initialize = function () {\n    };\n    Object.defineProperty(View.prototype, \"activeStart\", {\n        // Date Setting/Unsetting\n        // -----------------------------------------------------------------------------------------------------------------\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.start);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"activeEnd\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.activeRange.end);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"currentStart\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.start);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(View.prototype, \"currentEnd\", {\n        get: function () {\n            return this.context.dateEnv.toDate(this.props.dateProfile.currentRange.end);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // General Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.render = function (props, context) {\n        this.renderDatesMem(props.dateProfile);\n        this.renderBusinessHoursMem(props.businessHours);\n        this.renderDateSelectionMem(props.dateSelection);\n        this.renderEventsMem(props.eventStore);\n        this.renderEventSelectionMem(props.eventSelection);\n        this.renderEventDragMem(props.eventDrag);\n        this.renderEventResizeMem(props.eventResize);\n    };\n    View.prototype.beforeUpdate = function () {\n        this.addScroll(this.queryScroll());\n    };\n    View.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderDatesMem.unrender(); // should unrender everything else\n    };\n    // Sizing\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        var calendar = this.context.calendar;\n        if (isResize) {\n            this.addScroll(this.queryScroll()); // NOTE: same code as in beforeUpdate\n        }\n        if (isResize || // HACKS...\n            calendar.isViewUpdated ||\n            calendar.isDatesUpdated ||\n            calendar.isEventsUpdated) {\n            // sort of the catch-all sizing\n            // anything that might cause dimension changes\n            this.updateBaseSize(isResize, viewHeight, isAuto);\n        }\n        // NOTE: popScroll is called by CalendarComponent\n    };\n    View.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n    };\n    // Date Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderDatesWrap = function (dateProfile) {\n        this.renderDates(dateProfile);\n        this.addScroll({\n            duration: createDuration(this.context.options.scrollTime)\n        });\n    };\n    View.prototype.unrenderDatesWrap = function () {\n        this.stopNowIndicator();\n        this.unrenderDates();\n    };\n    View.prototype.renderDates = function (dateProfile) { };\n    View.prototype.unrenderDates = function () { };\n    // Business Hours\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderBusinessHours = function (businessHours) { };\n    View.prototype.unrenderBusinessHours = function () { };\n    // Date Selection\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderDateSelectionWrap = function (selection) {\n        if (selection) {\n            this.renderDateSelection(selection);\n        }\n    };\n    View.prototype.unrenderDateSelectionWrap = function (selection) {\n        if (selection) {\n            this.unrenderDateSelection(selection);\n        }\n    };\n    View.prototype.renderDateSelection = function (selection) { };\n    View.prototype.unrenderDateSelection = function (selection) { };\n    // Event Rendering\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEvents = function (eventStore) { };\n    View.prototype.unrenderEvents = function () { };\n    // util for subclasses\n    View.prototype.sliceEvents = function (eventStore, allDay) {\n        var props = this.props;\n        return sliceEventStore(eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? this.context.nextDayThreshold : null).fg;\n    };\n    // Event Selection\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventSelectionWrap = function (instanceId) {\n        if (instanceId) {\n            this.renderEventSelection(instanceId);\n        }\n    };\n    View.prototype.unrenderEventSelectionWrap = function (instanceId) {\n        if (instanceId) {\n            this.unrenderEventSelection(instanceId);\n        }\n    };\n    View.prototype.renderEventSelection = function (instanceId) { };\n    View.prototype.unrenderEventSelection = function (instanceId) { };\n    // Event Drag\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventDragWrap = function (state) {\n        if (state) {\n            this.renderEventDrag(state);\n        }\n    };\n    View.prototype.unrenderEventDragWrap = function (state) {\n        if (state) {\n            this.unrenderEventDrag(state);\n        }\n    };\n    View.prototype.renderEventDrag = function (state) { };\n    View.prototype.unrenderEventDrag = function (state) { };\n    // Event Resize\n    // -----------------------------------------------------------------------------------------------------------------\n    View.prototype.renderEventResizeWrap = function (state) {\n        if (state) {\n            this.renderEventResize(state);\n        }\n    };\n    View.prototype.unrenderEventResizeWrap = function (state) {\n        if (state) {\n            this.unrenderEventResize(state);\n        }\n    };\n    View.prototype.renderEventResize = function (state) { };\n    View.prototype.unrenderEventResize = function (state) { };\n    /* Now Indicator\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Immediately render the current time indicator and begins re-rendering it at an interval,\n    // which is defined by this.getNowIndicatorUnit().\n    // TODO: somehow do this for the current whole day's background too\n    // USAGE: must be called manually from subclasses' render methods! don't need to call stopNowIndicator tho\n    View.prototype.startNowIndicator = function (dateProfile, dateProfileGenerator) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, dateEnv = _a.dateEnv, options = _a.options;\n        var unit;\n        var update;\n        var delay; // ms wait value\n        if (options.nowIndicator && !this.initialNowDate) {\n            unit = this.getNowIndicatorUnit(dateProfile, dateProfileGenerator);\n            if (unit) {\n                update = this.updateNowIndicator.bind(this);\n                this.initialNowDate = calendar.getNow();\n                this.initialNowQueriedMs = new Date().valueOf();\n                // wait until the beginning of the next interval\n                delay = dateEnv.add(dateEnv.startOf(this.initialNowDate, unit), createDuration(1, unit)).valueOf() - this.initialNowDate.valueOf();\n                // TODO: maybe always use setTimeout, waiting until start of next unit\n                this.nowIndicatorTimeoutID = setTimeout(function () {\n                    _this.nowIndicatorTimeoutID = null;\n                    update();\n                    if (unit === 'second') {\n                        delay = 1000; // every second\n                    }\n                    else {\n                        delay = 1000 * 60; // otherwise, every minute\n                    }\n                    _this.nowIndicatorIntervalID = setInterval(update, delay); // update every interval\n                }, delay);\n            }\n            // rendering will be initiated in updateSize\n        }\n    };\n    // rerenders the now indicator, computing the new current time from the amount of time that has passed\n    // since the initial getNow call.\n    View.prototype.updateNowIndicator = function () {\n        if (this.props.dateProfile && // a way to determine if dates were rendered yet\n            this.initialNowDate // activated before?\n        ) {\n            this.unrenderNowIndicator(); // won't unrender if unnecessary\n            this.renderNowIndicator(addMs(this.initialNowDate, new Date().valueOf() - this.initialNowQueriedMs));\n            this.isNowIndicatorRendered = true;\n        }\n    };\n    // Immediately unrenders the view's current time indicator and stops any re-rendering timers.\n    // Won't cause side effects if indicator isn't rendered.\n    View.prototype.stopNowIndicator = function () {\n        if (this.nowIndicatorTimeoutID) {\n            clearTimeout(this.nowIndicatorTimeoutID);\n            this.nowIndicatorTimeoutID = null;\n        }\n        if (this.nowIndicatorIntervalID) {\n            clearInterval(this.nowIndicatorIntervalID);\n            this.nowIndicatorIntervalID = null;\n        }\n        if (this.isNowIndicatorRendered) {\n            this.unrenderNowIndicator();\n            this.isNowIndicatorRendered = false;\n        }\n    };\n    View.prototype.getNowIndicatorUnit = function (dateProfile, dateProfileGenerator) {\n        // subclasses should implement\n    };\n    // Renders a current time indicator at the given datetime\n    View.prototype.renderNowIndicator = function (date) {\n        // SUBCLASSES MUST PASS TO CHILDREN!\n    };\n    // Undoes the rendering actions from renderNowIndicator\n    View.prototype.unrenderNowIndicator = function () {\n        // SUBCLASSES MUST PASS TO CHILDREN!\n    };\n    /* Scroller\n    ------------------------------------------------------------------------------------------------------------------*/\n    View.prototype.addScroll = function (scroll, isForced) {\n        if (isForced) {\n            scroll.isForced = isForced;\n        }\n        __assign(this.queuedScroll || (this.queuedScroll = {}), scroll);\n    };\n    View.prototype.popScroll = function (isResize) {\n        this.applyQueuedScroll(isResize);\n        this.queuedScroll = null;\n    };\n    View.prototype.applyQueuedScroll = function (isResize) {\n        if (this.queuedScroll) {\n            this.applyScroll(this.queuedScroll, isResize);\n        }\n    };\n    View.prototype.queryScroll = function () {\n        var scroll = {};\n        if (this.props.dateProfile) { // dates rendered yet?\n            __assign(scroll, this.queryDateScroll());\n        }\n        return scroll;\n    };\n    View.prototype.applyScroll = function (scroll, isResize) {\n        var duration = scroll.duration, isForced = scroll.isForced;\n        if (duration != null && !isForced) {\n            delete scroll.duration;\n            if (this.props.dateProfile) { // dates rendered yet?\n                __assign(scroll, this.computeDateScroll(duration));\n            }\n        }\n        if (this.props.dateProfile) { // dates rendered yet?\n            this.applyDateScroll(scroll);\n        }\n    };\n    View.prototype.computeDateScroll = function (duration) {\n        return {}; // subclasses must implement\n    };\n    View.prototype.queryDateScroll = function () {\n        return {}; // subclasses must implement\n    };\n    View.prototype.applyDateScroll = function (scroll) {\n        // subclasses must implement\n    };\n    // for API\n    View.prototype.scrollToDuration = function (duration) {\n        this.applyScroll({ duration: duration }, false);\n    };\n    return View;\n}(DateComponent));\nEmitterMixin.mixInto(View);\nView.prototype.usesMinMaxTime = false;\nView.prototype.dateProfileGeneratorClass = DateProfileGenerator;\n\nvar FgEventRenderer = /** @class */ (function () {\n    function FgEventRenderer() {\n        this.segs = [];\n        this.isSizeDirty = false;\n    }\n    FgEventRenderer.prototype.renderSegs = function (context, segs, mirrorInfo) {\n        this.context = context;\n        this.rangeUpdated(); // called too frequently :(\n        // render an `.el` on each seg\n        // returns a subset of the segs. segs that were actually rendered\n        segs = this.renderSegEls(segs, mirrorInfo);\n        this.segs = segs;\n        this.attachSegs(segs, mirrorInfo);\n        this.isSizeDirty = true;\n        triggerRenderedSegs(this.context, this.segs, Boolean(mirrorInfo));\n    };\n    FgEventRenderer.prototype.unrender = function (context, _segs, mirrorInfo) {\n        triggerWillRemoveSegs(this.context, this.segs, Boolean(mirrorInfo));\n        this.detachSegs(this.segs);\n        this.segs = [];\n    };\n    // Updates values that rely on options and also relate to range\n    FgEventRenderer.prototype.rangeUpdated = function () {\n        var options = this.context.options;\n        var displayEventTime;\n        var displayEventEnd;\n        this.eventTimeFormat = createFormatter(options.eventTimeFormat || this.computeEventTimeFormat(), options.defaultRangeSeparator);\n        displayEventTime = options.displayEventTime;\n        if (displayEventTime == null) {\n            displayEventTime = this.computeDisplayEventTime(); // might be based off of range\n        }\n        displayEventEnd = options.displayEventEnd;\n        if (displayEventEnd == null) {\n            displayEventEnd = this.computeDisplayEventEnd(); // might be based off of range\n        }\n        this.displayEventTime = displayEventTime;\n        this.displayEventEnd = displayEventEnd;\n    };\n    // Renders and assigns an `el` property for each foreground event segment.\n    // Only returns segments that successfully rendered.\n    FgEventRenderer.prototype.renderSegEls = function (segs, mirrorInfo) {\n        var html = '';\n        var i;\n        if (segs.length) { // don't build an empty html string\n            // build a large concatenation of event segment HTML\n            for (i = 0; i < segs.length; i++) {\n                html += this.renderSegHtml(segs[i], mirrorInfo);\n            }\n            // Grab individual elements from the combined HTML string. Use each as the default rendering.\n            // Then, compute the 'el' for each segment. An el might be null if the eventRender callback returned false.\n            htmlToElements(html).forEach(function (el, i) {\n                var seg = segs[i];\n                if (el) {\n                    seg.el = el;\n                }\n            });\n            segs = filterSegsViaEls(this.context, segs, Boolean(mirrorInfo));\n        }\n        return segs;\n    };\n    // Generic utility for generating the HTML classNames for an event segment's element\n    FgEventRenderer.prototype.getSegClasses = function (seg, isDraggable, isResizable, mirrorInfo) {\n        var classes = [\n            'fc-event',\n            seg.isStart ? 'fc-start' : 'fc-not-start',\n            seg.isEnd ? 'fc-end' : 'fc-not-end'\n        ].concat(seg.eventRange.ui.classNames);\n        if (isDraggable) {\n            classes.push('fc-draggable');\n        }\n        if (isResizable) {\n            classes.push('fc-resizable');\n        }\n        if (mirrorInfo) {\n            classes.push('fc-mirror');\n            if (mirrorInfo.isDragging) {\n                classes.push('fc-dragging');\n            }\n            if (mirrorInfo.isResizing) {\n                classes.push('fc-resizing');\n            }\n        }\n        return classes;\n    };\n    // Compute the text that should be displayed on an event's element.\n    // `range` can be the Event object itself, or something range-like, with at least a `start`.\n    // If event times are disabled, or the event has no time, will return a blank string.\n    // If not specified, formatter will default to the eventTimeFormat setting,\n    // and displayEnd will default to the displayEventEnd setting.\n    FgEventRenderer.prototype.getTimeText = function (eventRange, formatter, displayEnd) {\n        var def = eventRange.def, instance = eventRange.instance;\n        return this._getTimeText(instance.range.start, def.hasEnd ? instance.range.end : null, def.allDay, formatter, displayEnd, instance.forcedStartTzo, instance.forcedEndTzo);\n    };\n    FgEventRenderer.prototype._getTimeText = function (start, end, allDay, formatter, displayEnd, forcedStartTzo, forcedEndTzo) {\n        var dateEnv = this.context.dateEnv;\n        if (formatter == null) {\n            formatter = this.eventTimeFormat;\n        }\n        if (displayEnd == null) {\n            displayEnd = this.displayEventEnd;\n        }\n        if (this.displayEventTime && !allDay) {\n            if (displayEnd && end) {\n                return dateEnv.formatRange(start, end, formatter, {\n                    forcedStartTzo: forcedStartTzo,\n                    forcedEndTzo: forcedEndTzo\n                });\n            }\n            else {\n                return dateEnv.format(start, formatter, {\n                    forcedTzo: forcedStartTzo\n                });\n            }\n        }\n        return '';\n    };\n    FgEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true\n        };\n    };\n    FgEventRenderer.prototype.computeDisplayEventTime = function () {\n        return true;\n    };\n    FgEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return true;\n    };\n    // Utility for generating event skin-related CSS properties\n    FgEventRenderer.prototype.getSkinCss = function (ui) {\n        return {\n            'background-color': ui.backgroundColor,\n            'border-color': ui.borderColor,\n            color: ui.textColor\n        };\n    };\n    FgEventRenderer.prototype.sortEventSegs = function (segs) {\n        var specs = this.context.eventOrderSpecs;\n        var objs = segs.map(buildSegCompareObj);\n        objs.sort(function (obj0, obj1) {\n            return compareByFieldSpecs(obj0, obj1, specs);\n        });\n        return objs.map(function (c) {\n            return c._seg;\n        });\n    };\n    FgEventRenderer.prototype.computeSizes = function (force) {\n        if (force || this.isSizeDirty) {\n            this.computeSegSizes(this.segs);\n        }\n    };\n    FgEventRenderer.prototype.assignSizes = function (force) {\n        if (force || this.isSizeDirty) {\n            this.assignSegSizes(this.segs);\n            this.isSizeDirty = false;\n        }\n    };\n    FgEventRenderer.prototype.computeSegSizes = function (segs) {\n    };\n    FgEventRenderer.prototype.assignSegSizes = function (segs) {\n    };\n    // Manipulation on rendered segs\n    FgEventRenderer.prototype.hideByHash = function (hash) {\n        if (hash) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (hash[seg.eventRange.instance.instanceId]) {\n                    seg.el.style.visibility = 'hidden';\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.showByHash = function (hash) {\n        if (hash) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (hash[seg.eventRange.instance.instanceId]) {\n                    seg.el.style.visibility = '';\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.selectByInstanceId = function (instanceId) {\n        if (instanceId) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                var eventInstance = seg.eventRange.instance;\n                if (eventInstance && eventInstance.instanceId === instanceId &&\n                    seg.el // necessary?\n                ) {\n                    seg.el.classList.add('fc-selected');\n                }\n            }\n        }\n    };\n    FgEventRenderer.prototype.unselectByInstanceId = function (instanceId) {\n        if (instanceId) {\n            for (var _i = 0, _a = this.segs; _i < _a.length; _i++) {\n                var seg = _a[_i];\n                if (seg.el) { // necessary?\n                    seg.el.classList.remove('fc-selected');\n                }\n            }\n        }\n    };\n    return FgEventRenderer;\n}());\n// returns a object with all primitive props that can be compared\nfunction buildSegCompareObj(seg) {\n    var eventDef = seg.eventRange.def;\n    var range = seg.eventRange.instance.range;\n    var start = range.start ? range.start.valueOf() : 0; // TODO: better support for open-range events\n    var end = range.end ? range.end.valueOf() : 0; // \"\n    return __assign({}, eventDef.extendedProps, eventDef, { id: eventDef.publicId, start: start,\n        end: end, duration: end - start, allDay: Number(eventDef.allDay), _seg: seg // for later retrieval\n     });\n}\n\n/*\nTODO: when refactoring this class, make a new FillRenderer instance for each `type`\n*/\nvar FillRenderer = /** @class */ (function () {\n    function FillRenderer() {\n        this.fillSegTag = 'div';\n        this.dirtySizeFlags = {};\n        this.containerElsByType = {};\n        this.segsByType = {};\n    }\n    FillRenderer.prototype.getSegsByType = function (type) {\n        return this.segsByType[type] || [];\n    };\n    FillRenderer.prototype.renderSegs = function (type, context, segs) {\n        var _a;\n        this.context = context;\n        var renderedSegs = this.renderSegEls(type, segs); // assignes `.el` to each seg. returns successfully rendered segs\n        var containerEls = this.attachSegs(type, renderedSegs);\n        if (containerEls) {\n            (_a = (this.containerElsByType[type] || (this.containerElsByType[type] = []))).push.apply(_a, containerEls);\n        }\n        this.segsByType[type] = renderedSegs;\n        if (type === 'bgEvent') {\n            triggerRenderedSegs(context, renderedSegs, false); // isMirror=false\n        }\n        this.dirtySizeFlags[type] = true;\n    };\n    // Unrenders a specific type of fill that is currently rendered on the grid\n    FillRenderer.prototype.unrender = function (type, context) {\n        var segs = this.segsByType[type];\n        if (segs) {\n            if (type === 'bgEvent') {\n                triggerWillRemoveSegs(context, segs, false); // isMirror=false\n            }\n            this.detachSegs(type, segs);\n        }\n    };\n    // Renders and assigns an `el` property for each fill segment. Generic enough to work with different types.\n    // Only returns segments that successfully rendered.\n    FillRenderer.prototype.renderSegEls = function (type, segs) {\n        var _this = this;\n        var html = '';\n        var i;\n        if (segs.length) {\n            // build a large concatenation of segment HTML\n            for (i = 0; i < segs.length; i++) {\n                html += this.renderSegHtml(type, segs[i]);\n            }\n            // Grab individual elements from the combined HTML string. Use each as the default rendering.\n            // Then, compute the 'el' for each segment.\n            htmlToElements(html).forEach(function (el, i) {\n                var seg = segs[i];\n                if (el) {\n                    seg.el = el;\n                }\n            });\n            if (type === 'bgEvent') {\n                segs = filterSegsViaEls(this.context, segs, false // isMirror. background events can never be mirror elements\n                );\n            }\n            // correct element type? (would be bad if a non-TD were inserted into a table for example)\n            segs = segs.filter(function (seg) {\n                return elementMatches(seg.el, _this.fillSegTag);\n            });\n        }\n        return segs;\n    };\n    // Builds the HTML needed for one fill segment. Generic enough to work with different types.\n    FillRenderer.prototype.renderSegHtml = function (type, seg) {\n        var css = null;\n        var classNames = [];\n        if (type !== 'highlight' && type !== 'businessHours') {\n            css = {\n                'background-color': seg.eventRange.ui.backgroundColor\n            };\n        }\n        if (type !== 'highlight') {\n            classNames = classNames.concat(seg.eventRange.ui.classNames);\n        }\n        if (type === 'businessHours') {\n            classNames.push('fc-bgevent');\n        }\n        else {\n            classNames.push('fc-' + type.toLowerCase());\n        }\n        return '<' + this.fillSegTag +\n            (classNames.length ? ' class=\"' + classNames.join(' ') + '\"' : '') +\n            (css ? ' style=\"' + cssToStr(css) + '\"' : '') +\n            '></' + this.fillSegTag + '>';\n    };\n    FillRenderer.prototype.detachSegs = function (type, segs) {\n        var containerEls = this.containerElsByType[type];\n        if (containerEls) {\n            containerEls.forEach(removeElement);\n            delete this.containerElsByType[type];\n        }\n    };\n    FillRenderer.prototype.computeSizes = function (force) {\n        for (var type in this.segsByType) {\n            if (force || this.dirtySizeFlags[type]) {\n                this.computeSegSizes(this.segsByType[type]);\n            }\n        }\n    };\n    FillRenderer.prototype.assignSizes = function (force) {\n        for (var type in this.segsByType) {\n            if (force || this.dirtySizeFlags[type]) {\n                this.assignSegSizes(this.segsByType[type]);\n            }\n        }\n        this.dirtySizeFlags = {};\n    };\n    FillRenderer.prototype.computeSegSizes = function (segs) {\n    };\n    FillRenderer.prototype.assignSegSizes = function (segs) {\n    };\n    return FillRenderer;\n}());\n\nvar NamedTimeZoneImpl = /** @class */ (function () {\n    function NamedTimeZoneImpl(timeZoneName) {\n        this.timeZoneName = timeZoneName;\n    }\n    return NamedTimeZoneImpl;\n}());\n\n/*\nAn abstraction for a dragging interaction originating on an event.\nDoes higher-level things than PointerDragger, such as possibly:\n- a \"mirror\" that moves with the pointer\n- a minimum number of pixels or other criteria for a true drag to begin\n\nsubclasses must emit:\n- pointerdown\n- dragstart\n- dragmove\n- pointerup\n- dragend\n*/\nvar ElementDragging = /** @class */ (function () {\n    function ElementDragging(el) {\n        this.emitter = new EmitterMixin();\n    }\n    ElementDragging.prototype.destroy = function () {\n    };\n    ElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n        // optional\n    };\n    return ElementDragging;\n}());\n\nfunction formatDate(dateInput, settings) {\n    if (settings === void 0) { settings = {}; }\n    var dateEnv = buildDateEnv$1(settings);\n    var formatter = createFormatter(settings);\n    var dateMeta = dateEnv.createMarkerMeta(dateInput);\n    if (!dateMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.format(dateMeta.marker, formatter, {\n        forcedTzo: dateMeta.forcedTzo\n    });\n}\nfunction formatRange(startInput, endInput, settings // mixture of env and formatter settings\n) {\n    var dateEnv = buildDateEnv$1(typeof settings === 'object' && settings ? settings : {}); // pass in if non-null object\n    var formatter = createFormatter(settings, globalDefaults.defaultRangeSeparator);\n    var startMeta = dateEnv.createMarkerMeta(startInput);\n    var endMeta = dateEnv.createMarkerMeta(endInput);\n    if (!startMeta || !endMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n        forcedStartTzo: startMeta.forcedTzo,\n        forcedEndTzo: endMeta.forcedTzo,\n        isEndExclusive: settings.isEndExclusive\n    });\n}\n// TODO: more DRY and optimized\nfunction buildDateEnv$1(settings) {\n    var locale = buildLocale(settings.locale || 'en', parseRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n    // ensure required settings\n    settings = __assign({ timeZone: globalDefaults.timeZone, calendarSystem: 'gregory' }, settings, { locale: locale });\n    return new DateEnv(settings);\n}\n\nvar DRAG_META_PROPS = {\n    startTime: createDuration,\n    duration: createDuration,\n    create: Boolean,\n    sourceId: String\n};\nvar DRAG_META_DEFAULTS = {\n    create: true\n};\nfunction parseDragMeta(raw) {\n    var leftoverProps = {};\n    var refined = refineProps(raw, DRAG_META_PROPS, DRAG_META_DEFAULTS, leftoverProps);\n    refined.leftoverProps = leftoverProps;\n    return refined;\n}\n\n// Computes a default column header formatting string if `colFormat` is not explicitly defined\nfunction computeFallbackHeaderFormat(datesRepDistinctDays, dayCnt) {\n    // if more than one week row, or if there are a lot of columns with not much space,\n    // put just the day numbers will be in each cell\n    if (!datesRepDistinctDays || dayCnt > 10) {\n        return { weekday: 'short' }; // \"Sat\"\n    }\n    else if (dayCnt > 1) {\n        return { weekday: 'short', month: 'numeric', day: 'numeric', omitCommas: true }; // \"Sat 11/12\"\n    }\n    else {\n        return { weekday: 'long' }; // \"Saturday\"\n    }\n}\nfunction renderDateCell(dateMarker, dateProfile, datesRepDistinctDays, colCnt, colHeadFormat, context, colspan, otherAttrs) {\n    var dateEnv = context.dateEnv, theme = context.theme, options = context.options;\n    var isDateValid = rangeContainsMarker(dateProfile.activeRange, dateMarker); // TODO: called too frequently. cache somehow.\n    var classNames = [\n        'fc-day-header',\n        theme.getClass('widgetHeader')\n    ];\n    var innerHtml;\n    if (typeof options.columnHeaderHtml === 'function') {\n        innerHtml = options.columnHeaderHtml(dateEnv.toDate(dateMarker));\n    }\n    else if (typeof options.columnHeaderText === 'function') {\n        innerHtml = htmlEscape(options.columnHeaderText(dateEnv.toDate(dateMarker)));\n    }\n    else {\n        innerHtml = htmlEscape(dateEnv.format(dateMarker, colHeadFormat));\n    }\n    // if only one row of days, the classNames on the header can represent the specific days beneath\n    if (datesRepDistinctDays) {\n        classNames = classNames.concat(\n        // includes the day-of-week class\n        // noThemeHighlight=true (don't highlight the header)\n        getDayClasses(dateMarker, dateProfile, context, true));\n    }\n    else {\n        classNames.push('fc-' + DAY_IDS[dateMarker.getUTCDay()]); // only add the day-of-week class\n    }\n    return '' +\n        '<th class=\"' + classNames.join(' ') + '\"' +\n        ((isDateValid && datesRepDistinctDays) ?\n            ' data-date=\"' + dateEnv.formatIso(dateMarker, { omitTime: true }) + '\"' :\n            '') +\n        (colspan > 1 ?\n            ' colspan=\"' + colspan + '\"' :\n            '') +\n        (otherAttrs ?\n            ' ' + otherAttrs :\n            '') +\n        '>' +\n        (isDateValid ?\n            // don't make a link if the heading could represent multiple days, or if there's only one day (forceOff)\n            buildGotoAnchorHtml(options, dateEnv, { date: dateMarker, forceOff: !datesRepDistinctDays || colCnt === 1 }, innerHtml) :\n            // if not valid, display text, but no link\n            innerHtml) +\n        '</th>';\n}\n\nvar DayHeader = /** @class */ (function (_super) {\n    __extends(DayHeader, _super);\n    function DayHeader(parentEl) {\n        var _this = _super.call(this) || this;\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        _this.parentEl = parentEl;\n        return _this;\n    }\n    DayHeader.prototype.render = function (props, context) {\n        var dates = props.dates, datesRepDistinctDays = props.datesRepDistinctDays;\n        var parts = [];\n        this.renderSkeleton(context);\n        if (props.renderIntroHtml) {\n            parts.push(props.renderIntroHtml());\n        }\n        var colHeadFormat = createFormatter(context.options.columnHeaderFormat ||\n            computeFallbackHeaderFormat(datesRepDistinctDays, dates.length));\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            parts.push(renderDateCell(date, props.dateProfile, datesRepDistinctDays, dates.length, colHeadFormat, context));\n        }\n        if (context.isRtl) {\n            parts.reverse();\n        }\n        this.thead.innerHTML = '<tr>' + parts.join('') + '</tr>';\n    };\n    DayHeader.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    DayHeader.prototype._renderSkeleton = function (context) {\n        var theme = context.theme;\n        var parentEl = this.parentEl;\n        parentEl.innerHTML = ''; // because might be nbsp\n        parentEl.appendChild(this.el = htmlToElement('<div class=\"fc-row ' + theme.getClass('headerRow') + '\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            '<thead></thead>' +\n            '</table>' +\n            '</div>'));\n        this.thead = this.el.querySelector('thead');\n    };\n    DayHeader.prototype._unrenderSkeleton = function () {\n        removeElement(this.el);\n    };\n    return DayHeader;\n}(Component));\n\nvar DaySeries = /** @class */ (function () {\n    function DaySeries(range, dateProfileGenerator) {\n        var date = range.start;\n        var end = range.end;\n        var indices = [];\n        var dates = [];\n        var dayIndex = -1;\n        while (date < end) { // loop each day from start to end\n            if (dateProfileGenerator.isHiddenDay(date)) {\n                indices.push(dayIndex + 0.5); // mark that it's between indices\n            }\n            else {\n                dayIndex++;\n                indices.push(dayIndex);\n                dates.push(date);\n            }\n            date = addDays(date, 1);\n        }\n        this.dates = dates;\n        this.indices = indices;\n        this.cnt = dates.length;\n    }\n    DaySeries.prototype.sliceRange = function (range) {\n        var firstIndex = this.getDateDayIndex(range.start); // inclusive first index\n        var lastIndex = this.getDateDayIndex(addDays(range.end, -1)); // inclusive last index\n        var clippedFirstIndex = Math.max(0, firstIndex);\n        var clippedLastIndex = Math.min(this.cnt - 1, lastIndex);\n        // deal with in-between indices\n        clippedFirstIndex = Math.ceil(clippedFirstIndex); // in-between starts round to next cell\n        clippedLastIndex = Math.floor(clippedLastIndex); // in-between ends round to prev cell\n        if (clippedFirstIndex <= clippedLastIndex) {\n            return {\n                firstIndex: clippedFirstIndex,\n                lastIndex: clippedLastIndex,\n                isStart: firstIndex === clippedFirstIndex,\n                isEnd: lastIndex === clippedLastIndex\n            };\n        }\n        else {\n            return null;\n        }\n    };\n    // Given a date, returns its chronolocial cell-index from the first cell of the grid.\n    // If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n    // If before the first offset, returns a negative number.\n    // If after the last offset, returns an offset past the last cell offset.\n    // Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n    DaySeries.prototype.getDateDayIndex = function (date) {\n        var indices = this.indices;\n        var dayOffset = Math.floor(diffDays(this.dates[0], date));\n        if (dayOffset < 0) {\n            return indices[0] - 1;\n        }\n        else if (dayOffset >= indices.length) {\n            return indices[indices.length - 1] + 1;\n        }\n        else {\n            return indices[dayOffset];\n        }\n    };\n    return DaySeries;\n}());\n\nvar DayTable = /** @class */ (function () {\n    function DayTable(daySeries, breakOnWeeks) {\n        var dates = daySeries.dates;\n        var daysPerRow;\n        var firstDay;\n        var rowCnt;\n        if (breakOnWeeks) {\n            // count columns until the day-of-week repeats\n            firstDay = dates[0].getUTCDay();\n            for (daysPerRow = 1; daysPerRow < dates.length; daysPerRow++) {\n                if (dates[daysPerRow].getUTCDay() === firstDay) {\n                    break;\n                }\n            }\n            rowCnt = Math.ceil(dates.length / daysPerRow);\n        }\n        else {\n            rowCnt = 1;\n            daysPerRow = dates.length;\n        }\n        this.rowCnt = rowCnt;\n        this.colCnt = daysPerRow;\n        this.daySeries = daySeries;\n        this.cells = this.buildCells();\n        this.headerDates = this.buildHeaderDates();\n    }\n    DayTable.prototype.buildCells = function () {\n        var rows = [];\n        for (var row = 0; row < this.rowCnt; row++) {\n            var cells = [];\n            for (var col = 0; col < this.colCnt; col++) {\n                cells.push(this.buildCell(row, col));\n            }\n            rows.push(cells);\n        }\n        return rows;\n    };\n    DayTable.prototype.buildCell = function (row, col) {\n        return {\n            date: this.daySeries.dates[row * this.colCnt + col]\n        };\n    };\n    DayTable.prototype.buildHeaderDates = function () {\n        var dates = [];\n        for (var col = 0; col < this.colCnt; col++) {\n            dates.push(this.cells[0][col].date);\n        }\n        return dates;\n    };\n    DayTable.prototype.sliceRange = function (range) {\n        var colCnt = this.colCnt;\n        var seriesSeg = this.daySeries.sliceRange(range);\n        var segs = [];\n        if (seriesSeg) {\n            var firstIndex = seriesSeg.firstIndex, lastIndex = seriesSeg.lastIndex;\n            var index = firstIndex;\n            while (index <= lastIndex) {\n                var row = Math.floor(index / colCnt);\n                var nextIndex = Math.min((row + 1) * colCnt, lastIndex + 1);\n                segs.push({\n                    row: row,\n                    firstCol: index % colCnt,\n                    lastCol: (nextIndex - 1) % colCnt,\n                    isStart: seriesSeg.isStart && index === firstIndex,\n                    isEnd: seriesSeg.isEnd && (nextIndex - 1) === lastIndex\n                });\n                index = nextIndex;\n            }\n        }\n        return segs;\n    };\n    return DayTable;\n}());\n\nvar Slicer = /** @class */ (function () {\n    function Slicer() {\n        this.sliceBusinessHours = memoize(this._sliceBusinessHours);\n        this.sliceDateSelection = memoize(this._sliceDateSpan);\n        this.sliceEventStore = memoize(this._sliceEventStore);\n        this.sliceEventDrag = memoize(this._sliceInteraction);\n        this.sliceEventResize = memoize(this._sliceInteraction);\n    }\n    Slicer.prototype.sliceProps = function (props, dateProfile, nextDayThreshold, calendar, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        var eventUiBases = props.eventUiBases;\n        var eventSegs = this.sliceEventStore.apply(this, [props.eventStore, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs));\n        return {\n            dateSelectionSegs: this.sliceDateSelection.apply(this, [props.dateSelection, eventUiBases, component].concat(extraArgs)),\n            businessHourSegs: this.sliceBusinessHours.apply(this, [props.businessHours, dateProfile, nextDayThreshold, calendar, component].concat(extraArgs)),\n            fgEventSegs: eventSegs.fg,\n            bgEventSegs: eventSegs.bg,\n            eventDrag: this.sliceEventDrag.apply(this, [props.eventDrag, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n            eventResize: this.sliceEventResize.apply(this, [props.eventResize, eventUiBases, dateProfile, nextDayThreshold, component].concat(extraArgs)),\n            eventSelection: props.eventSelection\n        }; // TODO: give interactionSegs?\n    };\n    Slicer.prototype.sliceNowDate = function (// does not memoize\n    date, component) {\n        var extraArgs = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            extraArgs[_i - 2] = arguments[_i];\n        }\n        return this._sliceDateSpan.apply(this, [{ range: { start: date, end: addMs(date, 1) }, allDay: false },\n            {},\n            component].concat(extraArgs));\n    };\n    Slicer.prototype._sliceBusinessHours = function (businessHours, dateProfile, nextDayThreshold, calendar, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (!businessHours) {\n            return [];\n        }\n        return this._sliceEventStore.apply(this, [expandRecurring(businessHours, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), calendar),\n            {},\n            dateProfile,\n            nextDayThreshold,\n            component].concat(extraArgs)).bg;\n    };\n    Slicer.prototype._sliceEventStore = function (eventStore, eventUiBases, dateProfile, nextDayThreshold, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (eventStore) {\n            var rangeRes = sliceEventStore(eventStore, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n            return {\n                bg: this.sliceEventRanges(rangeRes.bg, component, extraArgs),\n                fg: this.sliceEventRanges(rangeRes.fg, component, extraArgs)\n            };\n        }\n        else {\n            return { bg: [], fg: [] };\n        }\n    };\n    Slicer.prototype._sliceInteraction = function (interaction, eventUiBases, dateProfile, nextDayThreshold, component) {\n        var extraArgs = [];\n        for (var _i = 5; _i < arguments.length; _i++) {\n            extraArgs[_i - 5] = arguments[_i];\n        }\n        if (!interaction) {\n            return null;\n        }\n        var rangeRes = sliceEventStore(interaction.mutatedEvents, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n        return {\n            segs: this.sliceEventRanges(rangeRes.fg, component, extraArgs),\n            affectedInstances: interaction.affectedEvents.instances,\n            isEvent: interaction.isEvent,\n            sourceSeg: interaction.origSeg\n        };\n    };\n    Slicer.prototype._sliceDateSpan = function (dateSpan, eventUiBases, component) {\n        var extraArgs = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            extraArgs[_i - 3] = arguments[_i];\n        }\n        if (!dateSpan) {\n            return [];\n        }\n        var eventRange = fabricateEventRange(dateSpan, eventUiBases, component.context.calendar);\n        var segs = this.sliceRange.apply(this, [dateSpan.range].concat(extraArgs));\n        for (var _a = 0, segs_1 = segs; _a < segs_1.length; _a++) {\n            var seg = segs_1[_a];\n            seg.component = component;\n            seg.eventRange = eventRange;\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRanges = function (eventRanges, component, // TODO: kill\n    extraArgs) {\n        var segs = [];\n        for (var _i = 0, eventRanges_1 = eventRanges; _i < eventRanges_1.length; _i++) {\n            var eventRange = eventRanges_1[_i];\n            segs.push.apply(segs, this.sliceEventRange(eventRange, component, extraArgs));\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRange = function (eventRange, component, // TODO: kill\n    extraArgs) {\n        var segs = this.sliceRange.apply(this, [eventRange.range].concat(extraArgs));\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            seg.component = component;\n            seg.eventRange = eventRange;\n            seg.isStart = eventRange.isStart && seg.isStart;\n            seg.isEnd = eventRange.isEnd && seg.isEnd;\n        }\n        return segs;\n    };\n    return Slicer;\n}());\n/*\nfor incorporating minTime/maxTime if appropriate\nTODO: should be part of DateProfile!\nTimelineDateProfile already does this btw\n*/\nfunction computeActiveRange(dateProfile, isComponentAllDay) {\n    var range = dateProfile.activeRange;\n    if (isComponentAllDay) {\n        return range;\n    }\n    return {\n        start: addMs(range.start, dateProfile.minTime.milliseconds),\n        end: addMs(range.end, dateProfile.maxTime.milliseconds - 864e5) // 864e5 = ms in a day\n    };\n}\n\n// exports\n// --------------------------------------------------------------------------------------------------\nvar version = '4.4.0';\n\nexport { Calendar, Component, ComponentContext, DateComponent, DateEnv, DateProfileGenerator, DayHeader, DaySeries, DayTable, ElementDragging, ElementScrollController, EmitterMixin, EventApi, FgEventRenderer, FillRenderer, Interaction, Mixin, NamedTimeZoneImpl, PositionCache, ScrollComponent, ScrollController, Slicer, Splitter, Theme, View, WindowScrollController, addDays, addDurations, addMs, addWeeks, allowContextMenu, allowSelection, appendToElement, applyAll, applyMutationToEventStore, applyStyle, applyStyleProp, asRoughMinutes, asRoughMs, asRoughSeconds, buildGotoAnchorHtml, buildSegCompareObj, capitaliseFirstLetter, combineEventUis, compareByFieldSpec, compareByFieldSpecs, compareNumbers, compensateScroll, computeClippingRect, computeEdges, computeEventDraggable, computeEventEndResizable, computeEventStartResizable, computeFallbackHeaderFormat, computeHeightAndMargins, computeInnerRect, computeRect, computeVisibleDayRange, config, constrainPoint, createDuration, createElement, createEmptyEventStore, createEventInstance, createFormatter, createPlugin, cssToStr, debounce, diffDates, diffDayAndTime, diffDays, diffPoints, diffWeeks, diffWholeDays, diffWholeWeeks, disableCursor, distributeHeight, elementClosest, elementMatches, enableCursor, eventTupleToStore, filterEventStoreDefs, filterHash, findChildren, findElements, flexibleCompare, forceClassName, formatDate, formatIsoTimeString, formatRange, getAllDayHtml, getClippingParents, getDayClasses, getElSeg, getRectCenter, getRelevantEvents, globalDefaults, greatestDurationDenominator, hasBgRendering, htmlEscape, htmlToElement, insertAfterElement, interactionSettingsStore, interactionSettingsToStore, intersectRanges, intersectRects, isArraysEqual, isDateSpansEqual, isInt, isInteractionValid, isMultiDayRange, isPropsEqual, isPropsValid, isSingleDay, isValidDate, listenBySelector, mapHash, matchCellWidths, memoize, memoizeOutput, memoizeRendering, mergeEventStores, multiplyDuration, padStart, parseBusinessHours, parseDragMeta, parseEventDef, parseFieldSpecs, parse as parseMarker, pointInsideRect, prependToElement, preventContextMenu, preventDefault, preventSelection, processScopedUiProps, rangeContainsMarker, rangeContainsRange, rangesEqual, rangesIntersect, refineProps, removeElement, removeExact, renderDateCell, requestJson, sliceEventStore, startOfDay, subtractInnerElHeight, translateRect, uncompensateScroll, undistributeHeight, unpromisify, version, whenTransitionDone, wholeDivideDurations };\n","/*\nFullCalendar React Component v4.4.0\nDocs: https://fullcalendar.io/docs/react\nLicense: MIT\n*/\nimport deepEqual from 'fast-deep-equal';\nimport { createElement, createRef, Component } from 'react';\nimport { Calendar } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\nvar FullCalendar = /** @class */ (function (_super) {\n    __extends(FullCalendar, _super);\n    function FullCalendar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.elRef = createRef();\n        return _this;\n    }\n    FullCalendar.prototype.render = function () {\n        return (createElement(\"div\", { ref: this.elRef }));\n    };\n    FullCalendar.prototype.componentDidMount = function () {\n        this.calendar = new Calendar(this.elRef.current, this.props);\n        this.calendar.render();\n    };\n    FullCalendar.prototype.componentDidUpdate = function (oldProps) {\n        var props = this.props;\n        var updates = {};\n        var removals = [];\n        for (var propName in oldProps) {\n            if (!(propName in props)) {\n                removals.push(propName);\n            }\n        }\n        /*\n        Do a deep-comparison for prop changes. We do this because often times the parent component will pass in\n        an object literal that generates a new reference every time its render() function runs.\n        This isn't too much of a performance hit because normally these object literals are rather small.\n        For larger data, the parent component will almost definitely generate a new reference on every mutation,\n        because immutable prop data is the norm in React-world, making the deepEqual function execute really fast.\n        */\n        for (var propName in props) {\n            if (!deepEqual(props[propName], oldProps[propName])) {\n                updates[propName] = props[propName];\n            }\n        }\n        this.calendar.mutateOptions(updates, removals, false, deepEqual);\n    };\n    FullCalendar.prototype.componentWillUnmount = function () {\n        this.calendar.destroy();\n    };\n    FullCalendar.prototype.getApi = function () {\n        return this.calendar;\n    };\n    return FullCalendar;\n}(Component));\n\nexport default FullCalendar;\n","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","/*!\nFullCalendar Day Grid Plugin v4.4.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n\nimport { addWeeks, diffWeeks, DateProfileGenerator, createElement, listenBySelector, removeElement, computeRect, computeClippingRect, applyStyle, computeEventDraggable, computeEventStartResizable, computeEventEndResizable, cssToStr, htmlEscape, FgEventRenderer, appendToElement, prependToElement, htmlToElement, FillRenderer, memoizeRendering, createFormatter, addDays, DateComponent, rangeContainsMarker, getDayClasses, findElements, PositionCache, buildGotoAnchorHtml, findChildren, insertAfterElement, intersectRanges, memoize, ScrollComponent, matchCellWidths, uncompensateScroll, compensateScroll, subtractInnerElHeight, distributeHeight, undistributeHeight, View, Slicer, DayHeader, DaySeries, DayTable, createPlugin } from '@fullcalendar/core';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar DayGridDateProfileGenerator = /** @class */ (function (_super) {\n    __extends(DayGridDateProfileGenerator, _super);\n    function DayGridDateProfileGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Computes the date range that will be rendered.\n    DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        var dateEnv = this.dateEnv;\n        var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n        var start = renderRange.start;\n        var end = renderRange.end;\n        var endOfWeek;\n        // year and month views should be aligned with weeks. this is already done for week\n        if (/^(year|month)$/.test(currentRangeUnit)) {\n            start = dateEnv.startOfWeek(start);\n            // make end-of-week if not already\n            endOfWeek = dateEnv.startOfWeek(end);\n            if (endOfWeek.valueOf() !== end.valueOf()) {\n                end = addWeeks(endOfWeek, 1);\n            }\n        }\n        // ensure 6 weeks\n        if (this.options.monthMode &&\n            this.options.fixedWeekCount) {\n            var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n            diffWeeks(start, end));\n            end = addWeeks(end, 6 - rowCnt);\n        }\n        return { start: start, end: end };\n    };\n    return DayGridDateProfileGenerator;\n}(DateProfileGenerator));\n\n/* A rectangular panel that is absolutely positioned over other content\n------------------------------------------------------------------------------------------------------------------------\nOptions:\n  - className (string)\n  - content (HTML string, element, or element array)\n  - parentEl\n  - top\n  - left\n  - right (the x coord of where the right edge should be. not a \"CSS\" right)\n  - autoHide (boolean)\n  - show (callback)\n  - hide (callback)\n*/\nvar Popover = /** @class */ (function () {\n    function Popover(options) {\n        var _this = this;\n        this.isHidden = true;\n        this.margin = 10; // the space required between the popover and the edges of the scroll container\n        // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n        this.documentMousedown = function (ev) {\n            // only hide the popover if the click happened outside the popover\n            if (_this.el && !_this.el.contains(ev.target)) {\n                _this.hide();\n            }\n        };\n        this.options = options;\n    }\n    // Shows the popover on the specified position. Renders it if not already\n    Popover.prototype.show = function () {\n        if (this.isHidden) {\n            if (!this.el) {\n                this.render();\n            }\n            this.el.style.display = '';\n            this.position();\n            this.isHidden = false;\n            this.trigger('show');\n        }\n    };\n    // Hides the popover, through CSS, but does not remove it from the DOM\n    Popover.prototype.hide = function () {\n        if (!this.isHidden) {\n            this.el.style.display = 'none';\n            this.isHidden = true;\n            this.trigger('hide');\n        }\n    };\n    // Creates `this.el` and renders content inside of it\n    Popover.prototype.render = function () {\n        var _this = this;\n        var options = this.options;\n        var el = this.el = createElement('div', {\n            className: 'fc-popover ' + (options.className || ''),\n            style: {\n                top: '0',\n                left: '0'\n            }\n        });\n        if (typeof options.content === 'function') {\n            options.content(el);\n        }\n        options.parentEl.appendChild(el);\n        // when a click happens on anything inside with a 'fc-close' className, hide the popover\n        listenBySelector(el, 'click', '.fc-close', function (ev) {\n            _this.hide();\n        });\n        if (options.autoHide) {\n            document.addEventListener('mousedown', this.documentMousedown);\n        }\n    };\n    // Hides and unregisters any handlers\n    Popover.prototype.destroy = function () {\n        this.hide();\n        if (this.el) {\n            removeElement(this.el);\n            this.el = null;\n        }\n        document.removeEventListener('mousedown', this.documentMousedown);\n    };\n    // Positions the popover optimally, using the top/left/right options\n    Popover.prototype.position = function () {\n        var options = this.options;\n        var el = this.el;\n        var elDims = el.getBoundingClientRect(); // only used for width,height\n        var origin = computeRect(el.offsetParent);\n        var clippingRect = computeClippingRect(options.parentEl);\n        var top; // the \"position\" (not \"offset\") values for the popover\n        var left; //\n        // compute top and left\n        top = options.top || 0;\n        if (options.left !== undefined) {\n            left = options.left;\n        }\n        else if (options.right !== undefined) {\n            left = options.right - elDims.width; // derive the left value from the right value\n        }\n        else {\n            left = 0;\n        }\n        // constrain to the view port. if constrained by two edges, give precedence to top/left\n        top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n        top = Math.max(top, clippingRect.top + this.margin);\n        left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n        left = Math.max(left, clippingRect.left + this.margin);\n        applyStyle(el, {\n            top: top - origin.top,\n            left: left - origin.left\n        });\n    };\n    // Triggers a callback. Calls a function in the option hash of the same name.\n    // Arguments beyond the first `name` are forwarded on.\n    // TODO: better code reuse for this. Repeat code\n    // can kill this???\n    Popover.prototype.trigger = function (name) {\n        if (this.options[name]) {\n            this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n        }\n    };\n    return Popover;\n}());\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\n// \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\nvar SimpleDayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(SimpleDayGridEventRenderer, _super);\n    function SimpleDayGridEventRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Builds the HTML to be used for the default element for an individual segment\n    SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n        var context = this.context;\n        var eventRange = seg.eventRange;\n        var eventDef = eventRange.def;\n        var eventUi = eventRange.ui;\n        var allDay = eventDef.allDay;\n        var isDraggable = computeEventDraggable(context, eventDef, eventUi);\n        var isResizableFromStart = allDay && seg.isStart && computeEventStartResizable(context, eventDef, eventUi);\n        var isResizableFromEnd = allDay && seg.isEnd && computeEventEndResizable(context, eventDef, eventUi);\n        var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n        var skinCss = cssToStr(this.getSkinCss(eventUi));\n        var timeHtml = '';\n        var timeText;\n        var titleHtml;\n        classes.unshift('fc-day-grid-event', 'fc-h-event');\n        // Only display a timed events time if it is the starting segment\n        if (seg.isStart) {\n            timeText = this.getTimeText(eventRange);\n            if (timeText) {\n                timeHtml = '<span class=\"fc-time\">' + htmlEscape(timeText) + '</span>';\n            }\n        }\n        titleHtml =\n            '<span class=\"fc-title\">' +\n                (htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n                '</span>';\n        return '<a class=\"' + classes.join(' ') + '\"' +\n            (eventDef.url ?\n                ' href=\"' + htmlEscape(eventDef.url) + '\"' :\n                '') +\n            (skinCss ?\n                ' style=\"' + skinCss + '\"' :\n                '') +\n            '>' +\n            '<div class=\"fc-content\">' +\n            (context.options.dir === 'rtl' ?\n                titleHtml + ' ' + timeHtml : // put a natural space in between\n                timeHtml + ' ' + titleHtml //\n            ) +\n            '</div>' +\n            (isResizableFromStart ?\n                '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                '') +\n            (isResizableFromEnd ?\n                '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                '') +\n            '</a>';\n    };\n    // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n    SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n        return {\n            hour: 'numeric',\n            minute: '2-digit',\n            omitZeroMinute: true,\n            meridiem: 'narrow'\n        };\n    };\n    SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return false; // TODO: somehow consider the originating DayGrid's column count\n    };\n    return SimpleDayGridEventRenderer;\n}(FgEventRenderer));\n\n/* Event-rendering methods for the DayGrid class\n----------------------------------------------------------------------------------------------------------------------*/\nvar DayGridEventRenderer = /** @class */ (function (_super) {\n    __extends(DayGridEventRenderer, _super);\n    function DayGridEventRenderer(dayGrid) {\n        var _this = _super.call(this) || this;\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    // Renders the given foreground event segments onto the grid\n    DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // append to each row's content skeleton\n        this.dayGrid.rowEls.forEach(function (rowNode, i) {\n            rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n        });\n        // removes the \"more..\" events popover\n        if (!mirrorInfo) {\n            this.dayGrid.removeSegPopover();\n        }\n    };\n    // Unrenders all currently rendered foreground event segments\n    DayGridEventRenderer.prototype.detachSegs = function () {\n        var rowStructs = this.rowStructs || [];\n        var rowStruct;\n        while ((rowStruct = rowStructs.pop())) {\n            removeElement(rowStruct.tbodyEl);\n        }\n        this.rowStructs = null;\n    };\n    // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n    // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n    // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n    DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n        var rowStructs = [];\n        var segRows;\n        var row;\n        segRows = this.groupSegRows(segs); // group into nested arrays\n        // iterate each row of segment groupings\n        for (row = 0; row < segRows.length; row++) {\n            rowStructs.push(this.renderSegRow(row, segRows[row]));\n        }\n        return rowStructs;\n    };\n    // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n    // the segments. Returns object with a bunch of internal data about how the render was calculated.\n    // NOTE: modifies rowSegs\n    DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n        var isRtl = this.context.isRtl;\n        var dayGrid = this.dayGrid;\n        var colCnt = dayGrid.colCnt;\n        var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n        var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n        var tbody = document.createElement('tbody');\n        var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n        var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n        var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n        var i;\n        var levelSegs;\n        var col;\n        var tr;\n        var j;\n        var seg;\n        var td;\n        // populates empty cells from the current column (`col`) to `endCol`\n        function emptyCellsUntil(endCol) {\n            while (col < endCol) {\n                // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n                td = (loneCellMatrix[i - 1] || [])[col];\n                if (td) {\n                    td.rowSpan = (td.rowSpan || 1) + 1;\n                }\n                else {\n                    td = document.createElement('td');\n                    tr.appendChild(td);\n                }\n                cellMatrix[i][col] = td;\n                loneCellMatrix[i][col] = td;\n                col++;\n            }\n        }\n        for (i = 0; i < levelCnt; i++) { // iterate through all levels\n            levelSegs = segLevels[i];\n            col = 0;\n            tr = document.createElement('tr');\n            segMatrix.push([]);\n            cellMatrix.push([]);\n            loneCellMatrix.push([]);\n            // levelCnt might be 1 even though there are no actual levels. protect against this.\n            // this single empty row is useful for styling.\n            if (levelSegs) {\n                for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n                    seg = levelSegs[j];\n                    var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                    var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                    emptyCellsUntil(leftCol);\n                    // create a container that occupies or more columns. append the event element.\n                    td = createElement('td', { className: 'fc-event-container' }, seg.el);\n                    if (leftCol !== rightCol) {\n                        td.colSpan = rightCol - leftCol + 1;\n                    }\n                    else { // a single-column segment\n                        loneCellMatrix[i][col] = td;\n                    }\n                    while (col <= rightCol) {\n                        cellMatrix[i][col] = td;\n                        segMatrix[i][col] = seg;\n                        col++;\n                    }\n                    tr.appendChild(td);\n                }\n            }\n            emptyCellsUntil(colCnt); // finish off the row\n            var introHtml = dayGrid.renderProps.renderIntroHtml();\n            if (introHtml) {\n                if (isRtl) {\n                    appendToElement(tr, introHtml);\n                }\n                else {\n                    prependToElement(tr, introHtml);\n                }\n            }\n            tbody.appendChild(tr);\n        }\n        return {\n            row: row,\n            tbodyEl: tbody,\n            cellMatrix: cellMatrix,\n            segMatrix: segMatrix,\n            segLevels: segLevels,\n            segs: rowSegs\n        };\n    };\n    // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n    // NOTE: modifies segs\n    DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n        var isRtl = this.context.isRtl;\n        var colCnt = this.dayGrid.colCnt;\n        var levels = [];\n        var i;\n        var seg;\n        var j;\n        // Give preference to elements with certain criteria, so they have\n        // a chance to be closer to the top.\n        segs = this.sortEventSegs(segs);\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n            for (j = 0; j < levels.length; j++) {\n                if (!isDaySegCollision(seg, levels[j])) {\n                    break;\n                }\n            }\n            // `j` now holds the desired subrow index\n            seg.level = j;\n            seg.leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol; // for sorting only\n            seg.rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol // for sorting only\n            ;\n            (levels[j] || (levels[j] = [])).push(seg);\n        }\n        // order segments left-to-right. very important if calendar is RTL\n        for (j = 0; j < levels.length; j++) {\n            levels[j].sort(compareDaySegCols);\n        }\n        return levels;\n    };\n    // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n    DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n        var segRows = [];\n        var i;\n        for (i = 0; i < this.dayGrid.rowCnt; i++) {\n            segRows.push([]);\n        }\n        for (i = 0; i < segs.length; i++) {\n            segRows[segs[i].row].push(segs[i]);\n        }\n        return segRows;\n    };\n    // Computes a default `displayEventEnd` value if one is not expliclty defined\n    DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n        return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n    };\n    return DayGridEventRenderer;\n}(SimpleDayGridEventRenderer));\n// Computes whether two segments' columns collide. They are assumed to be in the same row.\nfunction isDaySegCollision(seg, otherSegs) {\n    var i;\n    var otherSeg;\n    for (i = 0; i < otherSegs.length; i++) {\n        otherSeg = otherSegs[i];\n        if (otherSeg.firstCol <= seg.lastCol &&\n            otherSeg.lastCol >= seg.firstCol) {\n            return true;\n        }\n    }\n    return false;\n}\n// A cmp function for determining the leftmost event\nfunction compareDaySegCols(a, b) {\n    return a.leftCol - b.leftCol;\n}\n\nvar DayGridMirrorRenderer = /** @class */ (function (_super) {\n    __extends(DayGridMirrorRenderer, _super);\n    function DayGridMirrorRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n        var sourceSeg = mirrorInfo.sourceSeg;\n        var rowStructs = this.rowStructs = this.renderSegRows(segs);\n        // inject each new event skeleton into each associated row\n        this.dayGrid.rowEls.forEach(function (rowNode, row) {\n            var skeletonEl = htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n            var skeletonTopEl;\n            var skeletonTop;\n            // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n            if (sourceSeg && sourceSeg.row === row) {\n                skeletonTopEl = sourceSeg.el;\n            }\n            else {\n                skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n                if (!skeletonTopEl) { // when no events\n                    skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n                }\n            }\n            skeletonTop = skeletonTopEl.getBoundingClientRect().top -\n                rowNode.getBoundingClientRect().top; // the offsetParent origin\n            skeletonEl.style.top = skeletonTop + 'px';\n            skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n            rowNode.appendChild(skeletonEl);\n        });\n    };\n    return DayGridMirrorRenderer;\n}(DayGridEventRenderer));\n\nvar EMPTY_CELL_HTML = '<td style=\"pointer-events:none\"></td>';\nvar DayGridFillRenderer = /** @class */ (function (_super) {\n    __extends(DayGridFillRenderer, _super);\n    function DayGridFillRenderer(dayGrid) {\n        var _this = _super.call(this) || this;\n        _this.fillSegTag = 'td'; // override the default tag name\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    DayGridFillRenderer.prototype.renderSegs = function (type, context, segs) {\n        // don't render timed background events\n        if (type === 'bgEvent') {\n            segs = segs.filter(function (seg) {\n                return seg.eventRange.def.allDay;\n            });\n        }\n        _super.prototype.renderSegs.call(this, type, context, segs);\n    };\n    DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n        var els = [];\n        var i;\n        var seg;\n        var skeletonEl;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            skeletonEl = this.renderFillRow(type, seg);\n            this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n            els.push(skeletonEl);\n        }\n        return els;\n    };\n    // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n    DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n        var dayGrid = this.dayGrid;\n        var isRtl = this.context.isRtl;\n        var colCnt = dayGrid.colCnt;\n        var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n        var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n        var startCol = leftCol;\n        var endCol = rightCol + 1;\n        var className;\n        var skeletonEl;\n        var trEl;\n        if (type === 'businessHours') {\n            className = 'bgevent';\n        }\n        else {\n            className = type.toLowerCase();\n        }\n        skeletonEl = htmlToElement('<div class=\"fc-' + className + '-skeleton\">' +\n            '<table><tr></tr></table>' +\n            '</div>');\n        trEl = skeletonEl.getElementsByTagName('tr')[0];\n        if (startCol > 0) {\n            appendToElement(trEl, \n            // will create (startCol + 1) td's\n            new Array(startCol + 1).join(EMPTY_CELL_HTML));\n        }\n        seg.el.colSpan = endCol - startCol;\n        trEl.appendChild(seg.el);\n        if (endCol < colCnt) {\n            appendToElement(trEl, \n            // will create (colCnt - endCol) td's\n            new Array(colCnt - endCol + 1).join(EMPTY_CELL_HTML));\n        }\n        var introHtml = dayGrid.renderProps.renderIntroHtml();\n        if (introHtml) {\n            if (isRtl) {\n                appendToElement(trEl, introHtml);\n            }\n            else {\n                prependToElement(trEl, introHtml);\n            }\n        }\n        return skeletonEl;\n    };\n    return DayGridFillRenderer;\n}(FillRenderer));\n\nvar DayTile = /** @class */ (function (_super) {\n    __extends(DayTile, _super);\n    function DayTile(el) {\n        var _this = _super.call(this, el) || this;\n        var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n        var renderFrame = _this.renderFrame = memoizeRendering(_this._renderFrame);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        _this.renderEventResize = memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n        return _this;\n    }\n    DayTile.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, {\n            el: this.el,\n            useEventCenter: false\n        });\n    };\n    DayTile.prototype.render = function (props, context) {\n        this.renderFrame(props.date);\n        this.renderFgEvents(context, props.fgSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDragInstances);\n        this.renderEventResize(props.eventResizeInstances);\n    };\n    DayTile.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderFrame.unrender(); // should unrender everything else\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    DayTile.prototype._renderFrame = function (date) {\n        var _a = this.context, theme = _a.theme, dateEnv = _a.dateEnv, options = _a.options;\n        var title = dateEnv.format(date, createFormatter(options.dayPopoverFormat) // TODO: cache\n        );\n        this.el.innerHTML =\n            '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\n                '<span class=\"fc-title\">' +\n                htmlEscape(title) +\n                '</span>' +\n                '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\n                '</div>' +\n                '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\n                '<div class=\"fc-event-container\"></div>' +\n                '</div>';\n        this.segContainerEl = this.el.querySelector('.fc-event-container');\n    };\n    DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        var date = this.props.date; // HACK\n        if (positionLeft < elWidth && positionTop < elHeight) {\n            return {\n                component: this,\n                dateSpan: {\n                    allDay: true,\n                    range: { start: date, end: addDays(date, 1) }\n                },\n                dayEl: this.el,\n                rect: {\n                    left: 0,\n                    top: 0,\n                    right: elWidth,\n                    bottom: elHeight\n                },\n                layer: 1\n            };\n        }\n    };\n    return DayTile;\n}(DateComponent));\nvar DayTileEventRenderer = /** @class */ (function (_super) {\n    __extends(DayTileEventRenderer, _super);\n    function DayTileEventRenderer(dayTile) {\n        var _this = _super.call(this) || this;\n        _this.dayTile = dayTile;\n        return _this;\n    }\n    DayTileEventRenderer.prototype.attachSegs = function (segs) {\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            this.dayTile.segContainerEl.appendChild(seg.el);\n        }\n    };\n    DayTileEventRenderer.prototype.detachSegs = function (segs) {\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            removeElement(seg.el);\n        }\n    };\n    return DayTileEventRenderer;\n}(SimpleDayGridEventRenderer));\n\nvar DayBgRow = /** @class */ (function () {\n    function DayBgRow(context) {\n        this.context = context;\n    }\n    DayBgRow.prototype.renderHtml = function (props) {\n        var parts = [];\n        if (props.renderIntroHtml) {\n            parts.push(props.renderIntroHtml());\n        }\n        for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n        }\n        if (!props.cells.length) {\n            parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n        }\n        if (this.context.options.dir === 'rtl') {\n            parts.reverse();\n        }\n        return '<tr>' + parts.join('') + '</tr>';\n    };\n    return DayBgRow;\n}());\nfunction renderCellHtml(date, dateProfile, context, otherAttrs) {\n    var dateEnv = context.dateEnv, theme = context.theme;\n    var isDateValid = rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n    var classes = getDayClasses(date, dateProfile, context);\n    classes.unshift('fc-day', theme.getClass('widgetContent'));\n    return '<td class=\"' + classes.join(' ') + '\"' +\n        (isDateValid ?\n            ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n            '') +\n        (otherAttrs ?\n            ' ' + otherAttrs :\n            '') +\n        '></td>';\n}\n\nvar DAY_NUM_FORMAT = createFormatter({ day: 'numeric' });\nvar WEEK_NUM_FORMAT = createFormatter({ week: 'numeric' });\nvar DayGrid = /** @class */ (function (_super) {\n    __extends(DayGrid, _super);\n    function DayGrid(el, renderProps) {\n        var _this = _super.call(this, el) || this;\n        _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n        _this.isCellSizesDirty = false;\n        _this.renderProps = renderProps;\n        var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n        var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n        _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n        var renderCells = _this.renderCells = memoizeRendering(_this._renderCells, _this._unrenderCells);\n        _this.renderBusinessHours = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n        _this.renderDateSelection = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n        _this.renderBgEvents = memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n        _this.renderFgEvents = memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n        _this.renderEventSelection = memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n        _this.renderEventDrag = memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n        _this.renderEventResize = memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n        return _this;\n    }\n    DayGrid.prototype.render = function (props, context) {\n        var cells = props.cells;\n        this.rowCnt = cells.length;\n        this.colCnt = cells[0].length;\n        this.renderCells(cells, props.isRigid);\n        this.renderBusinessHours(context, props.businessHourSegs);\n        this.renderDateSelection(context, props.dateSelectionSegs);\n        this.renderBgEvents(context, props.bgEventSegs);\n        this.renderFgEvents(context, props.fgEventSegs);\n        this.renderEventSelection(props.eventSelection);\n        this.renderEventDrag(props.eventDrag);\n        this.renderEventResize(props.eventResize);\n        if (this.segPopoverTile) {\n            this.updateSegPopoverTile();\n        }\n    };\n    DayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderCells.unrender(); // will unrender everything else\n    };\n    DayGrid.prototype.getCellRange = function (row, col) {\n        var start = this.props.cells[row][col].date;\n        var end = addDays(start, 1);\n        return { start: start, end: end };\n    };\n    DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n        var ownProps = this.props;\n        this.segPopoverTile.receiveProps({\n            date: date || this.segPopoverTile.props.date,\n            fgSegs: segs || this.segPopoverTile.props.fgSegs,\n            eventSelection: ownProps.eventSelection,\n            eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n            eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n        }, this.context);\n    };\n    /* Date Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderCells = function (cells, isRigid) {\n        var _a = this.context, calendar = _a.calendar, view = _a.view, isRtl = _a.isRtl, dateEnv = _a.dateEnv;\n        var _b = this, rowCnt = _b.rowCnt, colCnt = _b.colCnt;\n        var html = '';\n        var row;\n        var col;\n        for (row = 0; row < rowCnt; row++) {\n            html += this.renderDayRowHtml(row, isRigid);\n        }\n        this.el.innerHTML = html;\n        this.rowEls = findElements(this.el, '.fc-row');\n        this.cellEls = findElements(this.el, '.fc-day, .fc-disabled-day');\n        if (isRtl) {\n            this.cellEls.reverse();\n        }\n        this.rowPositions = new PositionCache(this.el, this.rowEls, false, true // vertical\n        );\n        this.colPositions = new PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n        true, false // horizontal\n        );\n        // trigger dayRender with each cell's element\n        for (row = 0; row < rowCnt; row++) {\n            for (col = 0; col < colCnt; col++) {\n                calendar.publiclyTrigger('dayRender', [\n                    {\n                        date: dateEnv.toDate(cells[row][col].date),\n                        el: this.getCellEl(row, col),\n                        view: view\n                    }\n                ]);\n            }\n        }\n        this.isCellSizesDirty = true;\n    };\n    DayGrid.prototype._unrenderCells = function () {\n        this.removeSegPopover();\n    };\n    // Generates the HTML for a single row, which is a div that wraps a table.\n    // `row` is the row number.\n    DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n        var theme = this.context.theme;\n        var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n        if (isRigid) {\n            classes.push('fc-rigid');\n        }\n        var bgRow = new DayBgRow(this.context);\n        return '' +\n            '<div class=\"' + classes.join(' ') + '\">' +\n            '<div class=\"fc-bg\">' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            bgRow.renderHtml({\n                cells: this.props.cells[row],\n                dateProfile: this.props.dateProfile,\n                renderIntroHtml: this.renderProps.renderBgIntroHtml\n            }) +\n            '</table>' +\n            '</div>' +\n            '<div class=\"fc-content-skeleton\">' +\n            '<table>' +\n            (this.getIsNumbersVisible() ?\n                '<thead>' +\n                    this.renderNumberTrHtml(row) +\n                    '</thead>' :\n                '') +\n            '</table>' +\n            '</div>' +\n            '</div>';\n    };\n    DayGrid.prototype.getIsNumbersVisible = function () {\n        return this.getIsDayNumbersVisible() ||\n            this.renderProps.cellWeekNumbersVisible ||\n            this.renderProps.colWeekNumbersVisible;\n    };\n    DayGrid.prototype.getIsDayNumbersVisible = function () {\n        return this.rowCnt > 1;\n    };\n    /* Grid Number Rendering\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.renderNumberTrHtml = function (row) {\n        var isRtl = this.context.isRtl;\n        var intro = this.renderProps.renderNumberIntroHtml(row, this);\n        return '' +\n            '<tr>' +\n            (isRtl ? '' : intro) +\n            this.renderNumberCellsHtml(row) +\n            (isRtl ? intro : '') +\n            '</tr>';\n    };\n    DayGrid.prototype.renderNumberCellsHtml = function (row) {\n        var htmls = [];\n        var col;\n        var date;\n        for (col = 0; col < this.colCnt; col++) {\n            date = this.props.cells[row][col].date;\n            htmls.push(this.renderNumberCellHtml(date));\n        }\n        if (this.context.isRtl) {\n            htmls.reverse();\n        }\n        return htmls.join('');\n    };\n    // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n    // The number row will only exist if either day numbers or week numbers are turned on.\n    DayGrid.prototype.renderNumberCellHtml = function (date) {\n        var _a = this.context, dateEnv = _a.dateEnv, options = _a.options;\n        var html = '';\n        var isDateValid = rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n        var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n        var classes;\n        var weekCalcFirstDow;\n        if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n            // no numbers in day cell (week number must be along the side)\n            return '<td></td>'; //  will create an empty space above events :(\n        }\n        classes = getDayClasses(date, this.props.dateProfile, this.context);\n        classes.unshift('fc-day-top');\n        if (this.renderProps.cellWeekNumbersVisible) {\n            weekCalcFirstDow = dateEnv.weekDow;\n        }\n        html += '<td class=\"' + classes.join(' ') + '\"' +\n            (isDateValid ?\n                ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                '') +\n            '>';\n        if (this.renderProps.cellWeekNumbersVisible && (date.getUTCDay() === weekCalcFirstDow)) {\n            html += buildGotoAnchorHtml(options, dateEnv, { date: date, type: 'week' }, { 'class': 'fc-week-number' }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n            );\n        }\n        if (isDayNumberVisible) {\n            html += buildGotoAnchorHtml(options, dateEnv, date, { 'class': 'fc-day-number' }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n            );\n        }\n        html += '</td>';\n        return html;\n    };\n    /* Sizing\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.updateSize = function (isResize) {\n        var calendar = this.context.calendar;\n        var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n        if (isResize ||\n            this.isCellSizesDirty ||\n            calendar.isEventsUpdated // hack\n        ) {\n            this.buildPositionCaches();\n            this.isCellSizesDirty = false;\n        }\n        fillRenderer.computeSizes(isResize);\n        eventRenderer.computeSizes(isResize);\n        mirrorRenderer.computeSizes(isResize);\n        fillRenderer.assignSizes(isResize);\n        eventRenderer.assignSizes(isResize);\n        mirrorRenderer.assignSizes(isResize);\n    };\n    DayGrid.prototype.buildPositionCaches = function () {\n        this.buildColPositions();\n        this.buildRowPositions();\n    };\n    DayGrid.prototype.buildColPositions = function () {\n        this.colPositions.build();\n    };\n    DayGrid.prototype.buildRowPositions = function () {\n        this.rowPositions.build();\n        this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n    };\n    /* Hit System\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n        var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n        var col = colPositions.leftToIndex(leftPosition);\n        var row = rowPositions.topToIndex(topPosition);\n        if (row != null && col != null) {\n            return {\n                row: row,\n                col: col,\n                dateSpan: {\n                    range: this.getCellRange(row, col),\n                    allDay: true\n                },\n                dayEl: this.getCellEl(row, col),\n                relativeRect: {\n                    left: colPositions.lefts[col],\n                    right: colPositions.rights[col],\n                    top: rowPositions.tops[row],\n                    bottom: rowPositions.bottoms[row]\n                }\n            };\n        }\n    };\n    /* Cell System\n    ------------------------------------------------------------------------------------------------------------------*/\n    // FYI: the first column is the leftmost column, regardless of date\n    DayGrid.prototype.getCellEl = function (row, col) {\n        return this.cellEls[row * this.colCnt + col];\n    };\n    /* Event Drag Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n        }\n    };\n    DayGrid.prototype._unrenderEventDrag = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n        }\n    };\n    /* Event Resize Visualization\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype._renderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.hideByHash(state.affectedInstances);\n            this.fillRenderer.renderSegs('highlight', this.context, state.segs);\n            this.mirrorRenderer.renderSegs(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    DayGrid.prototype._unrenderEventResize = function (state) {\n        if (state) {\n            this.eventRenderer.showByHash(state.affectedInstances);\n            this.fillRenderer.unrender('highlight', this.context);\n            this.mirrorRenderer.unrender(this.context, state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n        }\n    };\n    /* More+ Link Popover\n    ------------------------------------------------------------------------------------------------------------------*/\n    DayGrid.prototype.removeSegPopover = function () {\n        if (this.segPopover) {\n            this.segPopover.hide(); // in handler, will call segPopover's removeElement\n        }\n    };\n    // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n    // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n    DayGrid.prototype.limitRows = function (levelLimit) {\n        var rowStructs = this.eventRenderer.rowStructs || [];\n        var row; // row #\n        var rowLevelLimit;\n        for (row = 0; row < rowStructs.length; row++) {\n            this.unlimitRow(row);\n            if (!levelLimit) {\n                rowLevelLimit = false;\n            }\n            else if (typeof levelLimit === 'number') {\n                rowLevelLimit = levelLimit;\n            }\n            else {\n                rowLevelLimit = this.computeRowLevelLimit(row);\n            }\n            if (rowLevelLimit !== false) {\n                this.limitRow(row, rowLevelLimit);\n            }\n        }\n    };\n    // Computes the number of levels a row will accomodate without going outside its bounds.\n    // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n    // `row` is the row number.\n    DayGrid.prototype.computeRowLevelLimit = function (row) {\n        var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n        var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n        var trEls = findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n        var i;\n        var trEl;\n        // Reveal one level <tr> at a time and stop when we find one out of bounds\n        for (i = 0; i < trEls.length; i++) {\n            trEl = trEls[i];\n            trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n            if (trEl.getBoundingClientRect().bottom > rowBottom) {\n                return i;\n            }\n        }\n        return false; // should not limit at all\n    };\n    // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n    // `row` is the row number.\n    // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n    DayGrid.prototype.limitRow = function (row, levelLimit) {\n        var _this = this;\n        var colCnt = this.colCnt;\n        var isRtl = this.context.isRtl;\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n        var col = 0; // col #, left-to-right (not chronologically)\n        var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n        var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n        var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n        var i;\n        var seg;\n        var segsBelow; // array of segment objects below `seg` in the current `col`\n        var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n        var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n        var td;\n        var rowSpan;\n        var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n        var j;\n        var moreTd;\n        var moreWrap;\n        var moreLink;\n        // Iterates through empty level cells and places \"more\" links inside if need be\n        var emptyCellsUntil = function (endCol) {\n            while (col < endCol) {\n                segsBelow = _this.getCellSegs(row, col, levelLimit);\n                if (segsBelow.length) {\n                    td = cellMatrix[levelLimit - 1][col];\n                    moreLink = _this.renderMoreLink(row, col, segsBelow);\n                    moreWrap = createElement('div', null, moreLink);\n                    td.appendChild(moreWrap);\n                    moreNodes.push(moreWrap);\n                }\n                col++;\n            }\n        };\n        if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n            levelSegs = rowStruct.segLevels[levelLimit - 1];\n            cellMatrix = rowStruct.cellMatrix;\n            limitedNodes = findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n            limitedNodes.forEach(function (node) {\n                node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n            });\n            // iterate though segments in the last allowable level\n            for (i = 0; i < levelSegs.length; i++) {\n                seg = levelSegs[i];\n                var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                emptyCellsUntil(leftCol); // process empty cells before the segment\n                // determine *all* segments below `seg` that occupy the same columns\n                colSegsBelow = [];\n                totalSegsBelow = 0;\n                while (col <= rightCol) {\n                    segsBelow = this.getCellSegs(row, col, levelLimit);\n                    colSegsBelow.push(segsBelow);\n                    totalSegsBelow += segsBelow.length;\n                    col++;\n                }\n                if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n                    td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n                    rowSpan = td.rowSpan || 1;\n                    segMoreNodes = [];\n                    // make a replacement <td> for each column the segment occupies. will be one for each colspan\n                    for (j = 0; j < colSegsBelow.length; j++) {\n                        moreTd = createElement('td', { className: 'fc-more-cell', rowSpan: rowSpan });\n                        segsBelow = colSegsBelow[j];\n                        moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n                        );\n                        moreWrap = createElement('div', null, moreLink);\n                        moreTd.appendChild(moreWrap);\n                        segMoreNodes.push(moreTd);\n                        moreNodes.push(moreTd);\n                    }\n                    td.classList.add('fc-limited');\n                    insertAfterElement(td, segMoreNodes);\n                    limitedNodes.push(td);\n                }\n            }\n            emptyCellsUntil(this.colCnt); // finish off the level\n            rowStruct.moreEls = moreNodes; // for easy undoing later\n            rowStruct.limitedEls = limitedNodes; // for easy undoing later\n        }\n    };\n    // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n    // `row` is a row number.\n    DayGrid.prototype.unlimitRow = function (row) {\n        var rowStruct = this.eventRenderer.rowStructs[row];\n        if (rowStruct.moreEls) {\n            rowStruct.moreEls.forEach(removeElement);\n            rowStruct.moreEls = null;\n        }\n        if (rowStruct.limitedEls) {\n            rowStruct.limitedEls.forEach(function (limitedEl) {\n                limitedEl.classList.remove('fc-limited');\n            });\n            rowStruct.limitedEls = null;\n        }\n    };\n    // Renders an <a> element that represents hidden event element for a cell.\n    // Responsible for attaching click handler as well.\n    DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, view = _a.view, dateEnv = _a.dateEnv, options = _a.options, isRtl = _a.isRtl;\n        var a = createElement('a', { className: 'fc-more' });\n        a.innerText = this.getMoreLinkText(hiddenSegs.length);\n        a.addEventListener('click', function (ev) {\n            var clickOption = options.eventLimitClick;\n            var _col = isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n            var date = _this.props.cells[row][_col].date;\n            var moreEl = ev.currentTarget;\n            var dayEl = _this.getCellEl(row, col);\n            var allSegs = _this.getCellSegs(row, col);\n            // rescope the segments to be within the cell's date\n            var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n            var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n            if (typeof clickOption === 'function') {\n                // the returned value can be an atomic option\n                clickOption = calendar.publiclyTrigger('eventLimitClick', [\n                    {\n                        date: dateEnv.toDate(date),\n                        allDay: true,\n                        dayEl: dayEl,\n                        moreEl: moreEl,\n                        segs: reslicedAllSegs,\n                        hiddenSegs: reslicedHiddenSegs,\n                        jsEvent: ev,\n                        view: view\n                    }\n                ]);\n            }\n            if (clickOption === 'popover') {\n                _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n            }\n            else if (typeof clickOption === 'string') { // a view name\n                calendar.zoomTo(date, clickOption);\n            }\n        });\n        return a;\n    };\n    // Reveals the popover that displays all events within a cell\n    DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n        var _this = this;\n        var _a = this.context, calendar = _a.calendar, view = _a.view, theme = _a.theme, isRtl = _a.isRtl;\n        var _col = isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n        var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n        var topEl; // the element we want to match the top coordinate of\n        var options;\n        if (this.rowCnt === 1) {\n            topEl = view.el; // will cause the popover to cover any sort of header\n        }\n        else {\n            topEl = this.rowEls[row]; // will align with top of row\n        }\n        options = {\n            className: 'fc-more-popover ' + theme.getClass('popover'),\n            parentEl: view.el,\n            top: computeRect(topEl).top,\n            autoHide: true,\n            content: function (el) {\n                _this.segPopoverTile = new DayTile(el);\n                _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n            },\n            hide: function () {\n                _this.segPopoverTile.destroy();\n                _this.segPopoverTile = null;\n                _this.segPopover.destroy();\n                _this.segPopover = null;\n            }\n        };\n        // Determine horizontal coordinate.\n        // We use the moreWrap instead of the <td> to avoid border confusion.\n        if (isRtl) {\n            options.right = computeRect(moreWrap).right + 1; // +1 to be over cell border\n        }\n        else {\n            options.left = computeRect(moreWrap).left - 1; // -1 to be over cell border\n        }\n        this.segPopover = new Popover(options);\n        this.segPopover.show();\n        calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n    };\n    // Given the events within an array of segment objects, reslice them to be in a single day\n    DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n        var dayStart = dayDate;\n        var dayEnd = addDays(dayStart, 1);\n        var dayRange = { start: dayStart, end: dayEnd };\n        var newSegs = [];\n        for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n            var seg = segs_1[_i];\n            var eventRange = seg.eventRange;\n            var origRange = eventRange.range;\n            var slicedRange = intersectRanges(origRange, dayRange);\n            if (slicedRange) {\n                newSegs.push(__assign({}, seg, { eventRange: {\n                        def: eventRange.def,\n                        ui: __assign({}, eventRange.ui, { durationEditable: false }),\n                        instance: eventRange.instance,\n                        range: slicedRange\n                    }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() }));\n            }\n        }\n        return newSegs;\n    };\n    // Generates the text that should be inside a \"more\" link, given the number of events it represents\n    DayGrid.prototype.getMoreLinkText = function (num) {\n        var opt = this.context.options.eventLimitText;\n        if (typeof opt === 'function') {\n            return opt(num);\n        }\n        else {\n            return '+' + num + ' ' + opt;\n        }\n    };\n    // Returns segments within a given cell.\n    // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n    DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n        var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n        var level = startLevel || 0;\n        var segs = [];\n        var seg;\n        while (level < segMatrix.length) {\n            seg = segMatrix[level][col];\n            if (seg) {\n                segs.push(seg);\n            }\n            level++;\n        }\n        return segs;\n    };\n    return DayGrid;\n}(DateComponent));\n\nvar WEEK_NUM_FORMAT$1 = createFormatter({ week: 'numeric' });\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\nvar AbstractDayGridView = /** @class */ (function (_super) {\n    __extends(AbstractDayGridView, _super);\n    function AbstractDayGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.processOptions = memoize(_this._processOptions);\n        _this.renderSkeleton = memoizeRendering(_this._renderSkeleton, _this._unrenderSkeleton);\n        /* Header Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before the day-of week header cells\n        _this.renderHeadIntroHtml = function () {\n            var _a = _this.context, theme = _a.theme, options = _a.options;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' +\n                    '<span>' + // needed for matchCellWidths\n                    htmlEscape(options.weekLabel) +\n                    '</span>' +\n                    '</th>';\n            }\n            return '';\n        };\n        /* Day Grid Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n        _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n            var _a = _this.context, options = _a.options, dateEnv = _a.dateEnv;\n            var weekStart = dayGrid.props.cells[row][0].date;\n            if (_this.colWeekNumbersVisible) {\n                return '' +\n                    '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' +\n                    buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                    options, dateEnv, { date: weekStart, type: 'week', forceOff: dayGrid.colCnt === 1 }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n                    ) +\n                    '</td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before the day bg cells for each day-row\n        _this.renderDayGridBgIntroHtml = function () {\n            var theme = _this.context.theme;\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        // Generates the HTML that goes before every other type of row generated by DayGrid.\n        // Affects mirror-skeleton and highlight-skeleton rows.\n        _this.renderDayGridIntroHtml = function () {\n            if (_this.colWeekNumbersVisible) {\n                return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n            }\n            return '';\n        };\n        return _this;\n    }\n    AbstractDayGridView.prototype._processOptions = function (options) {\n        if (options.weekNumbers) {\n            if (options.weekNumbersWithinDays) {\n                this.cellWeekNumbersVisible = true;\n                this.colWeekNumbersVisible = false;\n            }\n            else {\n                this.cellWeekNumbersVisible = false;\n                this.colWeekNumbersVisible = true;\n            }\n        }\n        else {\n            this.colWeekNumbersVisible = false;\n            this.cellWeekNumbersVisible = false;\n        }\n    };\n    AbstractDayGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context);\n        this.processOptions(context.options);\n        this.renderSkeleton(context);\n    };\n    AbstractDayGridView.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.renderSkeleton.unrender();\n    };\n    AbstractDayGridView.prototype._renderSkeleton = function (context) {\n        this.el.classList.add('fc-dayGrid-view');\n        this.el.innerHTML = this.renderSkeletonHtml();\n        this.scroller = new ScrollComponent('hidden', // overflow x\n        'auto' // overflow y\n        );\n        var dayGridContainerEl = this.scroller.el;\n        this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n        dayGridContainerEl.classList.add('fc-day-grid-container');\n        var dayGridEl = createElement('div', { className: 'fc-day-grid' });\n        dayGridContainerEl.appendChild(dayGridEl);\n        this.dayGrid = new DayGrid(dayGridEl, {\n            renderNumberIntroHtml: this.renderDayGridNumberIntroHtml,\n            renderBgIntroHtml: this.renderDayGridBgIntroHtml,\n            renderIntroHtml: this.renderDayGridIntroHtml,\n            colWeekNumbersVisible: this.colWeekNumbersVisible,\n            cellWeekNumbersVisible: this.cellWeekNumbersVisible\n        });\n    };\n    AbstractDayGridView.prototype._unrenderSkeleton = function () {\n        this.el.classList.remove('fc-dayGrid-view');\n        this.dayGrid.destroy();\n        this.scroller.destroy();\n    };\n    // Builds the HTML skeleton for the view.\n    // The day-grid component will render inside of a container defined by this HTML.\n    AbstractDayGridView.prototype.renderSkeletonHtml = function () {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        return '' +\n            '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n            (options.columnHeader ?\n                '<thead class=\"fc-head\">' +\n                    '<tr>' +\n                    '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                    '</tr>' +\n                    '</thead>' :\n                '') +\n            '<tbody class=\"fc-body\">' +\n            '<tr>' +\n            '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n            '</tr>' +\n            '</tbody>' +\n            '</table>';\n    };\n    // Generates an HTML attribute string for setting the width of the week number column, if it is known\n    AbstractDayGridView.prototype.weekNumberStyleAttr = function () {\n        if (this.weekNumberWidth != null) {\n            return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n        }\n        return '';\n    };\n    // Determines whether each row should have a constant height\n    AbstractDayGridView.prototype.hasRigidRows = function () {\n        var eventLimit = this.context.options.eventLimit;\n        return eventLimit && typeof eventLimit !== 'number';\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractDayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n        _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n        this.dayGrid.updateSize(isResize);\n    };\n    // Refreshes the horizontal dimensions of the view\n    AbstractDayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n        var dayGrid = this.dayGrid;\n        var eventLimit = this.context.options.eventLimit;\n        var headRowEl = this.header ? this.header.el : null; // HACK\n        var scrollerHeight;\n        var scrollbarWidths;\n        // hack to give the view some height prior to dayGrid's columns being rendered\n        // TODO: separate setting height from scroller VS dayGrid.\n        if (!dayGrid.rowEls) {\n            if (!isAuto) {\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            return;\n        }\n        if (this.colWeekNumbersVisible) {\n            // Make sure all week number cells running down the side have the same width.\n            this.weekNumberWidth = matchCellWidths(findElements(this.el, '.fc-week-number'));\n        }\n        // reset all heights to be natural\n        this.scroller.clear();\n        if (headRowEl) {\n            uncompensateScroll(headRowEl);\n        }\n        dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n        // is the event limit a constant level number?\n        if (eventLimit && typeof eventLimit === 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n        }\n        // distribute the height to the rows\n        // (viewHeight is a \"recommended\" value if isAuto)\n        scrollerHeight = this.computeScrollerHeight(viewHeight);\n        this.setGridHeight(scrollerHeight, isAuto);\n        // is the event limit dynamically calculated?\n        if (eventLimit && typeof eventLimit !== 'number') {\n            dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n        }\n        if (!isAuto) { // should we force dimensions of the scroll container?\n            this.scroller.setHeight(scrollerHeight);\n            scrollbarWidths = this.scroller.getScrollbarWidths();\n            if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                if (headRowEl) {\n                    compensateScroll(headRowEl, scrollbarWidths);\n                }\n                // doing the scrollbar compensation might have created text overflow which created more height. redo\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n            }\n            // guarantees the same scrollbar widths\n            this.scroller.lockOverflow(scrollbarWidths);\n        }\n    };\n    // given a desired total height of the view, returns what the height of the scroller should be\n    AbstractDayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n        return viewHeight -\n            subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n    };\n    // Sets the height of just the DayGrid component in this view\n    AbstractDayGridView.prototype.setGridHeight = function (height, isAuto) {\n        if (this.context.options.monthMode) {\n            // if auto, make the height of each row the height that it would be if there were 6 weeks\n            if (isAuto) {\n                height *= this.dayGrid.rowCnt / 6;\n            }\n            distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n        }\n        else {\n            if (isAuto) {\n                undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n            }\n            else {\n                distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n            }\n        }\n    };\n    /* Scroll\n    ------------------------------------------------------------------------------------------------------------------*/\n    AbstractDayGridView.prototype.computeDateScroll = function (duration) {\n        return { top: 0 };\n    };\n    AbstractDayGridView.prototype.queryDateScroll = function () {\n        return { top: this.scroller.getScrollTop() };\n    };\n    AbstractDayGridView.prototype.applyDateScroll = function (scroll) {\n        if (scroll.top !== undefined) {\n            this.scroller.setScrollTop(scroll.top);\n        }\n    };\n    return AbstractDayGridView;\n}(View));\nAbstractDayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\nvar SimpleDayGrid = /** @class */ (function (_super) {\n    __extends(SimpleDayGrid, _super);\n    function SimpleDayGrid(dayGrid) {\n        var _this = _super.call(this, dayGrid.el) || this;\n        _this.slicer = new DayGridSlicer();\n        _this.dayGrid = dayGrid;\n        return _this;\n    }\n    SimpleDayGrid.prototype.firstContext = function (context) {\n        context.calendar.registerInteractiveComponent(this, { el: this.dayGrid.el });\n    };\n    SimpleDayGrid.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.context.calendar.unregisterInteractiveComponent(this);\n    };\n    SimpleDayGrid.prototype.render = function (props, context) {\n        var dayGrid = this.dayGrid;\n        var dateProfile = props.dateProfile, dayTable = props.dayTable;\n        dayGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, context.calendar, dayGrid, dayTable), { dateProfile: dateProfile, cells: dayTable.cells, isRigid: props.isRigid }), context);\n    };\n    SimpleDayGrid.prototype.buildPositionCaches = function () {\n        this.dayGrid.buildPositionCaches();\n    };\n    SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n        var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n        if (rawHit) {\n            return {\n                component: this.dayGrid,\n                dateSpan: rawHit.dateSpan,\n                dayEl: rawHit.dayEl,\n                rect: {\n                    left: rawHit.relativeRect.left,\n                    right: rawHit.relativeRect.right,\n                    top: rawHit.relativeRect.top,\n                    bottom: rawHit.relativeRect.bottom\n                },\n                layer: 0\n            };\n        }\n    };\n    return SimpleDayGrid;\n}(DateComponent));\nvar DayGridSlicer = /** @class */ (function (_super) {\n    __extends(DayGridSlicer, _super);\n    function DayGridSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n        return dayTable.sliceRange(dateRange);\n    };\n    return DayGridSlicer;\n}(Slicer));\n\nvar DayGridView = /** @class */ (function (_super) {\n    __extends(DayGridView, _super);\n    function DayGridView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTable = memoize(buildDayTable);\n        return _this;\n    }\n    DayGridView.prototype.render = function (props, context) {\n        _super.prototype.render.call(this, props, context); // will call _renderSkeleton/_unrenderSkeleton\n        var dateProfile = this.props.dateProfile;\n        var dayTable = this.dayTable =\n            this.buildDayTable(dateProfile, props.dateProfileGenerator);\n        if (this.header) {\n            this.header.receiveProps({\n                dateProfile: dateProfile,\n                dates: dayTable.headerDates,\n                datesRepDistinctDays: dayTable.rowCnt === 1,\n                renderIntroHtml: this.renderHeadIntroHtml\n            }, context);\n        }\n        this.simpleDayGrid.receiveProps({\n            dateProfile: dateProfile,\n            dayTable: dayTable,\n            businessHours: props.businessHours,\n            dateSelection: props.dateSelection,\n            eventStore: props.eventStore,\n            eventUiBases: props.eventUiBases,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize,\n            isRigid: this.hasRigidRows(),\n            nextDayThreshold: this.context.nextDayThreshold\n        }, context);\n    };\n    DayGridView.prototype._renderSkeleton = function (context) {\n        _super.prototype._renderSkeleton.call(this, context);\n        if (context.options.columnHeader) {\n            this.header = new DayHeader(this.el.querySelector('.fc-head-container'));\n        }\n        this.simpleDayGrid = new SimpleDayGrid(this.dayGrid);\n    };\n    DayGridView.prototype._unrenderSkeleton = function () {\n        _super.prototype._unrenderSkeleton.call(this);\n        if (this.header) {\n            this.header.destroy();\n        }\n        this.simpleDayGrid.destroy();\n    };\n    return DayGridView;\n}(AbstractDayGridView));\nfunction buildDayTable(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeries(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar main = createPlugin({\n    defaultView: 'dayGridMonth',\n    views: {\n        dayGrid: DayGridView,\n        dayGridDay: {\n            type: 'dayGrid',\n            duration: { days: 1 }\n        },\n        dayGridWeek: {\n            type: 'dayGrid',\n            duration: { weeks: 1 }\n        },\n        dayGridMonth: {\n            type: 'dayGrid',\n            duration: { months: 1 },\n            monthMode: true,\n            fixedWeekCount: true\n        }\n    }\n});\n\nexport default main;\nexport { AbstractDayGridView, DayBgRow, DayGrid, DayGridSlicer, DayGridView, SimpleDayGrid, buildDayTable as buildBasicDayTable };\n","\"use strict\";\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nfunction makeEmptyFunction(arg) {\n  return function () {\n    return arg;\n  };\n}\n\n/**\n * This function accepts and discards inputs; it has no side effects. This is\n * primarily useful idiomatically for overridable function endpoints which\n * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n */\nvar emptyFunction = function emptyFunction() {};\n\nemptyFunction.thatReturns = makeEmptyFunction;\nemptyFunction.thatReturnsFalse = makeEmptyFunction(false);\nemptyFunction.thatReturnsTrue = makeEmptyFunction(true);\nemptyFunction.thatReturnsNull = makeEmptyFunction(null);\nemptyFunction.thatReturnsThis = function () {\n  return this;\n};\nemptyFunction.thatReturnsArgument = function (arg) {\n  return arg;\n};\n\nmodule.exports = emptyFunction;","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nif (process.env.NODE_ENV !== 'production') {\n  var invariant = require('fbjs/lib/invariant');\n  var warning = require('fbjs/lib/warning');\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (typeSpecs.hasOwnProperty(typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          invariant(typeof typeSpecs[typeSpecName] === 'function', '%s: %s type `%s` is invalid; it must be a function, usually from ' + 'the `prop-types` package, but received `%s`.', componentName || 'React class', location, typeSpecName, typeof typeSpecs[typeSpecName]);\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        warning(!error || error instanceof Error, '%s: type specification of %s `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error);\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          warning(false, 'Failed %s type: %s%s', location, error.message, stack != null ? stack : '');\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar invariant = require('fbjs/lib/invariant');\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    invariant(\n      false,\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","export default {\n  GLOBAL: {\n    HIDE: \"__react_tooltip_hide_event\",\n    REBUILD: \"__react_tooltip_rebuild_event\",\n    SHOW: \"__react_tooltip_show_event\",\n  },\n};\n","/**\n * Static methods for react-tooltip\n */\nimport CONSTANT from \"../constant\";\n\nconst dispatchGlobalEvent = (eventName, opts) => {\n  // Compatible with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === \"function\") {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent(\"Event\");\n    event.initEvent(eventName, false, true);\n    event.detail = opts;\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport default function(target) {\n  /**\n   * Hide all tooltip\n   * @trigger ReactTooltip.hide()\n   */\n  target.hide = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.HIDE, { target });\n  };\n\n  /**\n   * Rebuild all tooltip\n   * @trigger ReactTooltip.rebuild()\n   */\n  target.rebuild = () => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.REBUILD);\n  };\n\n  /**\n   * Show specific tooltip\n   * @trigger ReactTooltip.show()\n   */\n  target.show = target => {\n    dispatchGlobalEvent(CONSTANT.GLOBAL.SHOW, { target });\n  };\n\n  target.prototype.globalRebuild = function() {\n    if (this.mount) {\n      this.unbindListener();\n      this.bindListener();\n    }\n  };\n\n  target.prototype.globalShow = function(event) {\n    if (this.mount) {\n      // Create a fake event, specific show will limit the type to `solid`\n      // only `float` type cares e.clientX e.clientY\n      const e = { currentTarget: event.detail.target };\n      this.showTooltip(e, true);\n    }\n  };\n\n  target.prototype.globalHide = function(event) {\n    if (this.mount) {\n      const hasTarget =\n        (event && event.detail && event.detail.target && true) || false;\n      this.hideTooltip(\n        { currentTarget: hasTarget && event.detail.target },\n        hasTarget\n      );\n    }\n  };\n}\n","/**\n * Custom events to control showing and hiding of tooltip\n *\n * @attributes\n * - `event` {String}\n * - `eventOff` {String}\n */\n\nexport const checkStatus = function(dataEventOff, e) {\n  const { show } = this.state;\n  const { id } = this.props;\n  const isCapture = this.isCapture(e.currentTarget);\n  const currentItem = e.currentTarget.getAttribute(\"currentItem\");\n\n  if (!isCapture) e.stopPropagation();\n  if (show && currentItem === \"true\") {\n    if (!dataEventOff) this.hideTooltip(e);\n  } else {\n    e.currentTarget.setAttribute(\"currentItem\", \"true\");\n    setUntargetItems(e.currentTarget, this.getTargetArray(id));\n    this.showTooltip(e);\n  }\n};\n\nconst setUntargetItems = function(currentTarget, targetArray) {\n  for (let i = 0; i < targetArray.length; i++) {\n    if (currentTarget !== targetArray[i]) {\n      targetArray[i].setAttribute(\"currentItem\", \"false\");\n    } else {\n      targetArray[i].setAttribute(\"currentItem\", \"true\");\n    }\n  }\n};\n\nconst customListeners = {\n  id: \"9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf\",\n  set(target, event, listener) {\n    if (this.id in target) {\n      const map = target[this.id];\n      map[event] = listener;\n    } else {\n      // this is workaround for WeakMap, which is not supported in older browsers, such as IE\n      Object.defineProperty(target, this.id, {\n        configurable: true,\n        value: { [event]: listener },\n      });\n    }\n  },\n  get(target, event) {\n    const map = target[this.id];\n    if (map !== undefined) {\n      return map[event];\n    }\n  },\n};\n\nexport default function(target) {\n  target.prototype.isCustomEvent = function(ele) {\n    const { event } = this.state;\n    return event || !!ele.getAttribute(\"data-event\");\n  };\n\n  /* Bind listener for custom event */\n  target.prototype.customBindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = ele.getAttribute(\"data-event\") || event;\n    const dataEventOff = ele.getAttribute(\"data-event-off\") || eventOff;\n\n    dataEvent.split(\" \").forEach(event => {\n      ele.removeEventListener(event, customListeners.get(ele, event));\n      const customListener = checkStatus.bind(this, dataEventOff);\n      customListeners.set(ele, event, customListener);\n      ele.addEventListener(event, customListener, false);\n    });\n    if (dataEventOff) {\n      dataEventOff.split(\" \").forEach(event => {\n        ele.removeEventListener(event, this.hideTooltip);\n        ele.addEventListener(event, this.hideTooltip, false);\n      });\n    }\n  };\n\n  /* Unbind listener for custom event */\n  target.prototype.customUnbindListener = function(ele) {\n    const { event, eventOff } = this.state;\n    const dataEvent = event || ele.getAttribute(\"data-event\");\n    const dataEventOff = eventOff || ele.getAttribute(\"data-event-off\");\n\n    ele.removeEventListener(dataEvent, customListeners.get(ele, event));\n    if (dataEventOff) ele.removeEventListener(dataEventOff, this.hideTooltip);\n  };\n}\n","/**\n * Util method to get effect\n */\nimport { checkStatus } from \"./customEvent\";\n\nconst makeProxy = e => {\n  const proxy = {};\n  for (const key in e) {\n    if (typeof e[key] === \"function\") {\n      proxy[key] = e[key].bind(e);\n    } else {\n      proxy[key] = e[key];\n    }\n  }\n  return proxy;\n};\n\nconst bodyListener = function(callback, options, e) {\n  const { respectEffect = false, customEvent = false } = options;\n  const { id } = this.props;\n\n  const tip = e.target.getAttribute(\"data-tip\") || null;\n  const forId = e.target.getAttribute(\"data-for\") || null;\n\n  const target = e.target;\n  if (this.isCustomEvent(target) && !customEvent) {\n    return;\n  }\n\n  const isTargetBelongsToTooltip =\n    (id == null && forId == null) || forId === id;\n\n  if (\n    tip != null &&\n    (!respectEffect || this.getEffect(target) === \"float\") &&\n    isTargetBelongsToTooltip\n  ) {\n    const proxy = makeProxy(e);\n    proxy.currentTarget = target;\n    callback(proxy);\n  }\n};\n\nconst findCustomEvents = (targetArray, dataAttribute) => {\n  const events = {};\n  targetArray.forEach(target => {\n    const event = target.getAttribute(dataAttribute);\n    if (event) event.split(\" \").forEach(event => (events[event] = true));\n  });\n\n  return events;\n};\n\nconst getBody = () => document.getElementsByTagName(\"body\")[0];\n\nexport default function(target) {\n  target.prototype.isBodyMode = function() {\n    return !!this.props.bodyMode;\n  };\n\n  target.prototype.bindBodyListener = function(targetArray) {\n    const {\n      event,\n      eventOff,\n      possibleCustomEvents,\n      possibleCustomEventsOff,\n    } = this.state;\n    const body = getBody();\n\n    const customEvents = findCustomEvents(targetArray, \"data-event\");\n    const customEventsOff = findCustomEvents(targetArray, \"data-event-off\");\n\n    if (event != null) customEvents[event] = true;\n    if (eventOff != null) customEventsOff[eventOff] = true;\n    possibleCustomEvents\n      .split(\" \")\n      .forEach(event => (customEvents[event] = true));\n    possibleCustomEventsOff\n      .split(\" \")\n      .forEach(event => (customEventsOff[event] = true));\n\n    this.unbindBodyListener(body);\n\n    const listeners = (this.bodyModeListeners = {});\n    if (event == null) {\n      listeners.mouseover = bodyListener.bind(this, this.showTooltip, {});\n      listeners.mousemove = bodyListener.bind(this, this.updateTooltip, {\n        respectEffect: true,\n      });\n      listeners.mouseout = bodyListener.bind(this, this.hideTooltip, {});\n    }\n\n    for (const event in customEvents) {\n      listeners[event] = bodyListener.bind(\n        this,\n        e => {\n          const targetEventOff =\n            e.currentTarget.getAttribute(\"data-event-off\") || eventOff;\n          checkStatus.call(this, targetEventOff, e);\n        },\n        { customEvent: true }\n      );\n    }\n    for (const event in customEventsOff) {\n      listeners[event] = bodyListener.bind(this, this.hideTooltip, {\n        customEvent: true,\n      });\n    }\n    for (const event in listeners) {\n      body.addEventListener(event, listeners[event]);\n    }\n  };\n\n  target.prototype.unbindBodyListener = function(body) {\n    body = body || getBody();\n\n    const listeners = this.bodyModeListeners;\n    for (const event in listeners) {\n      body.removeEventListener(event, listeners[event]);\n    }\n  };\n}\n","/**\n * Calculate the position of tooltip\n *\n * @params\n * - `e` {Event} the event of current mouse\n * - `target` {Element} the currentTarget of the event\n * - `node` {DOM} the react-tooltip object\n * - `place` {String} top / right / bottom / left\n * - `effect` {String} float / solid\n * - `offset` {Object} the offset to default position\n *\n * @return {Object}\n * - `isNewState` {Bool} required\n * - `newState` {Object}\n * - `position` {Object} {left: {Number}, top: {Number}}\n */\nexport default function(e, target, node, place, desiredPlace, effect, offset) {\n  const { width: tipWidth, height: tipHeight } = getDimensions(node);\n\n  const { width: targetWidth, height: targetHeight } = getDimensions(target);\n\n  const { mouseX, mouseY } = getCurrentOffset(e, target, effect);\n  const defaultOffset = getDefaultPosition(\n    effect,\n    targetWidth,\n    targetHeight,\n    tipWidth,\n    tipHeight\n  );\n  const { extraOffset_X, extraOffset_Y } = calculateOffset(offset);\n\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n\n  const { parentTop, parentLeft } = getParent(node);\n\n  // Get the edge offset of the tooltip\n  const getTipOffsetLeft = place => {\n    const offset_X = defaultOffset[place].l;\n    return mouseX + offset_X + extraOffset_X;\n  };\n  const getTipOffsetRight = place => {\n    const offset_X = defaultOffset[place].r;\n    return mouseX + offset_X + extraOffset_X;\n  };\n  const getTipOffsetTop = place => {\n    const offset_Y = defaultOffset[place].t;\n    return mouseY + offset_Y + extraOffset_Y;\n  };\n  const getTipOffsetBottom = place => {\n    const offset_Y = defaultOffset[place].b;\n    return mouseY + offset_Y + extraOffset_Y;\n  };\n\n  //\n  // Functions to test whether the tooltip's sides are inside\n  // the client window for a given orientation p\n  //\n  //  _____________\n  // |             | <-- Right side\n  // | p = 'left'  |\\\n  // |             |/  |\\\n  // |_____________|   |_\\  <-- Mouse\n  //      / \\           |\n  //       |\n  //       |\n  //  Bottom side\n  //\n  const outsideLeft = p => getTipOffsetLeft(p) < 0;\n  const outsideRight = p => getTipOffsetRight(p) > windowWidth;\n  const outsideTop = p => getTipOffsetTop(p) < 0;\n  const outsideBottom = p => getTipOffsetBottom(p) > windowHeight;\n\n  // Check whether the tooltip with orientation p is completely inside the client window\n  const outside = p =>\n    outsideLeft(p) || outsideRight(p) || outsideTop(p) || outsideBottom(p);\n  const inside = p => !outside(p);\n\n  const placesList = [\"top\", \"bottom\", \"left\", \"right\"];\n  const insideList = [];\n  for (let i = 0; i < 4; i++) {\n    const p = placesList[i];\n    if (inside(p)) {\n      insideList.push(p);\n    }\n  }\n\n  let isNewState = false;\n  let newPlace;\n  const shouldUpdatePlace = desiredPlace !== place;\n  if (inside(desiredPlace) && shouldUpdatePlace) {\n    isNewState = true;\n    newPlace = desiredPlace;\n  } else if (\n    insideList.length > 0 &&\n    shouldUpdatePlace &&\n    outside(desiredPlace) &&\n    outside(place)\n  ) {\n    isNewState = true;\n    newPlace = insideList[0];\n  }\n\n  if (isNewState) {\n    return {\n      isNewState: true,\n      newState: { place: newPlace },\n    };\n  }\n\n  return {\n    isNewState: false,\n    position: {\n      left: parseInt(getTipOffsetLeft(place) - parentLeft, 10),\n      top: parseInt(getTipOffsetTop(place) - parentTop, 10),\n    },\n  };\n}\n\nconst getDimensions = node => {\n  const { height, width } = node.getBoundingClientRect();\n  return {\n    height: parseInt(height, 10),\n    width: parseInt(width, 10),\n  };\n};\n\n// Get current mouse offset\nconst getCurrentOffset = (e, currentTarget, effect) => {\n  const boundingClientRect = currentTarget.getBoundingClientRect();\n  const targetTop = boundingClientRect.top;\n  const targetLeft = boundingClientRect.left;\n  const { width: targetWidth, height: targetHeight } = getDimensions(\n    currentTarget\n  );\n\n  if (effect === \"float\") {\n    return {\n      mouseX: e.clientX,\n      mouseY: e.clientY,\n    };\n  }\n  return {\n    mouseX: targetLeft + targetWidth / 2,\n    mouseY: targetTop + targetHeight / 2,\n  };\n};\n\n// List all possibility of tooltip final offset\n// This is useful in judging if it is necessary for tooltip to switch position when out of window\nconst getDefaultPosition = (\n  effect,\n  targetWidth,\n  targetHeight,\n  tipWidth,\n  tipHeight\n) => {\n  let top;\n  let right;\n  let bottom;\n  let left;\n  const disToMouse = 3;\n  const triangleHeight = 2;\n  const cursorHeight = 12; // Optimize for float bottom only, cause the cursor will hide the tooltip\n\n  if (effect === \"float\") {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(tipHeight + disToMouse + triangleHeight),\n      b: -disToMouse,\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: disToMouse + cursorHeight,\n      b: tipHeight + disToMouse + triangleHeight + cursorHeight,\n    };\n    left = {\n      l: -(tipWidth + disToMouse + triangleHeight),\n      r: -disToMouse,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2,\n    };\n    right = {\n      l: disToMouse,\n      r: tipWidth + disToMouse + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2,\n    };\n  } else if (effect === \"solid\") {\n    top = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: -(targetHeight / 2 + tipHeight + triangleHeight),\n      b: -(targetHeight / 2),\n    };\n    bottom = {\n      l: -(tipWidth / 2),\n      r: tipWidth / 2,\n      t: targetHeight / 2,\n      b: targetHeight / 2 + tipHeight + triangleHeight,\n    };\n    left = {\n      l: -(tipWidth + targetWidth / 2 + triangleHeight),\n      r: -(targetWidth / 2),\n      t: -(tipHeight / 2),\n      b: tipHeight / 2,\n    };\n    right = {\n      l: targetWidth / 2,\n      r: tipWidth + targetWidth / 2 + triangleHeight,\n      t: -(tipHeight / 2),\n      b: tipHeight / 2,\n    };\n  }\n\n  return { top, bottom, left, right };\n};\n\n// Consider additional offset into position calculation\nconst calculateOffset = offset => {\n  let extraOffset_X = 0;\n  let extraOffset_Y = 0;\n\n  if (Object.prototype.toString.apply(offset) === \"[object String]\") {\n    offset = JSON.parse(offset.toString().replace(/\\'/g, '\"'));\n  }\n  for (const key in offset) {\n    if (key === \"top\") {\n      extraOffset_Y -= parseInt(offset[key], 10);\n    } else if (key === \"bottom\") {\n      extraOffset_Y += parseInt(offset[key], 10);\n    } else if (key === \"left\") {\n      extraOffset_X -= parseInt(offset[key], 10);\n    } else if (key === \"right\") {\n      extraOffset_X += parseInt(offset[key], 10);\n    }\n  }\n\n  return { extraOffset_X, extraOffset_Y };\n};\n\n// Get the offset of the parent elements\nconst getParent = currentTarget => {\n  let currentParent = currentTarget;\n  while (currentParent) {\n    if (\n      window.getComputedStyle(currentParent).getPropertyValue(\"transform\") !==\n      \"none\"\n    )\n      break;\n    currentParent = currentParent.parentElement;\n  }\n\n  const parentTop =\n    (currentParent && currentParent.getBoundingClientRect().top) || 0;\n  const parentLeft =\n    (currentParent && currentParent.getBoundingClientRect().left) || 0;\n\n  return { parentTop, parentLeft };\n};\n","/**\n * To get the tooltip content\n * it may comes from data-tip or this.props.children\n * it should support multiline\n *\n * @params\n * - `tip` {String} value of data-tip\n * - `children` {ReactElement} this.props.children\n * - `multiline` {Any} could be Bool(true/false) or String('true'/'false')\n *\n * @return\n * - String or react component\n */\nimport React from \"react\";\n\nexport default function(tip, children, getContent, multiline) {\n  if (children) return children;\n  if (getContent !== undefined && getContent !== null) return getContent; // getContent can be 0, '', etc.\n  if (getContent === null) return null; // Tip not exist and children is null or undefined\n\n  const regexp = /<br\\s*\\/?>/;\n  if (!multiline || multiline === \"false\" || !regexp.test(tip)) {\n    // No trim(), so that user can keep their input\n    return tip;\n  }\n\n  // Multiline tooltip content\n  return tip.split(regexp).map((d, i) => {\n    return (\n      <span key={i} className=\"multi-line\">\n        {d}\n      </span>\n    );\n  });\n}\n","/**\n * Support aria- and role in ReactTooltip\n *\n * @params props {Object}\n * @return {Object}\n */\nexport function parseAria(props) {\n  const ariaObj = {};\n  Object.keys(props)\n    .filter(prop => {\n      // aria-xxx and role is acceptable\n      return /(^aria-\\w+$|^role$)/.test(prop);\n    })\n    .forEach(prop => {\n      ariaObj[prop] = props[prop];\n    });\n\n  return ariaObj;\n}\n","/**\n * Convert nodelist to array\n * @see https://github.com/facebook/fbjs/blob/e66ba20ad5be433eb54423f2b097d829324d9de6/packages/fbjs/src/core/createArrayFromMixed.js#L24\n * NodeLists are functions in Safari\n */\n\nexport default function(nodeList) {\n  const length = nodeList.length;\n  if (nodeList.hasOwnProperty) {\n    return Array.prototype.slice.call(nodeList);\n  }\n  return new Array(length).fill().map(index => nodeList[index]);\n}\n","/**\n * Tracking target removing from DOM.\n * It's necessary to hide tooltip when it's target disappears.\n * Otherwise, the tooltip would be shown forever until another target\n * is triggered.\n *\n * If MutationObserver is not available, this feature just doesn't work.\n */\n\n// https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/\nconst getMutationObserverClass = () => {\n  return (\n    window.MutationObserver ||\n    window.WebKitMutationObserver ||\n    window.MozMutationObserver\n  );\n};\n\nexport default function(target) {\n  target.prototype.bindRemovalTracker = function() {\n    const MutationObserver = getMutationObserverClass();\n    if (MutationObserver == null) return;\n\n    const observer = new MutationObserver(mutations => {\n      for (let m1 = 0; m1 < mutations.length; m1++) {\n        const mutation = mutations[m1];\n        for (let m2 = 0; m2 < mutation.removedNodes.length; m2++) {\n          const element = mutation.removedNodes[m2];\n          if (element === this.state.currentTarget) {\n            this.hideTooltip();\n            return;\n          }\n        }\n      }\n    });\n\n    observer.observe(window.document, { childList: true, subtree: true });\n\n    this.removalTracker = observer;\n  };\n\n  target.prototype.unbindRemovalTracker = function() {\n    if (this.removalTracker) {\n      this.removalTracker.disconnect();\n      this.removalTracker = null;\n    }\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n/* Decorators */\nimport staticMethods from \"./decorators/staticMethods\";\nimport windowListener from \"./decorators/windowListener\";\nimport customEvent from \"./decorators/customEvent\";\nimport isCapture from \"./decorators/isCapture\";\nimport getEffect from \"./decorators/getEffect\";\nimport bodyMode from \"./decorators/bodyMode\";\nimport trackRemoval from \"./decorators/trackRemoval\";\n\n/* Utils */\nimport getPosition from \"./utils/getPosition\";\nimport getTipContent from \"./utils/getTipContent\";\nimport { parseAria } from \"./utils/aria\";\nimport nodeListToArray from \"./utils/nodeListToArray\";\n\n/* CSS */\n// import cssStyle from \"./style\";\nimport \"./index.scss\";\n\n@staticMethods\n@windowListener\n@customEvent\n@isCapture\n@getEffect\n@bodyMode\n@trackRemoval\nclass ReactTooltip extends React.Component {\n  static propTypes = {\n    children: PropTypes.any,\n    place: PropTypes.string,\n    type: PropTypes.string,\n    effect: PropTypes.string,\n    offset: PropTypes.object,\n    multiline: PropTypes.bool,\n    border: PropTypes.bool,\n    insecure: PropTypes.bool,\n    class: PropTypes.string,\n    className: PropTypes.string,\n    id: PropTypes.string,\n    html: PropTypes.bool,\n    delayHide: PropTypes.number,\n    delayUpdate: PropTypes.number,\n    delayShow: PropTypes.number,\n    event: PropTypes.string,\n    eventOff: PropTypes.string,\n    watchWindow: PropTypes.bool,\n    isCapture: PropTypes.bool,\n    globalEventOff: PropTypes.string,\n    getContent: PropTypes.any,\n    afterShow: PropTypes.func,\n    afterHide: PropTypes.func,\n    overridePosition: PropTypes.func,\n    disable: PropTypes.bool,\n    scrollHide: PropTypes.bool,\n    resizeHide: PropTypes.bool,\n    wrapper: PropTypes.string,\n    bodyMode: PropTypes.bool,\n    possibleCustomEvents: PropTypes.string,\n    possibleCustomEventsOff: PropTypes.string,\n    clickable: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    insecure: true,\n    resizeHide: true,\n    wrapper: \"div\",\n    clickable: false,\n  };\n\n  static supportedWrappers = [\"div\", \"span\"];\n\n  static displayName = \"ReactTooltip\";\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      place: props.place || \"top\", // Direction of tooltip\n      desiredPlace: props.place || \"top\",\n      type: \"dark\", // Color theme of tooltip\n      effect: \"float\", // float or fixed\n      show: false,\n      border: false,\n      offset: {},\n      extraClass: \"\",\n      html: false,\n      delayHide: 0,\n      delayShow: 0,\n      event: props.event || null,\n      eventOff: props.eventOff || null,\n      currentEvent: null, // Current mouse event\n      currentTarget: null, // Current target of mouse event\n      ariaProps: parseAria(props), // aria- and role attributes\n      isEmptyTip: false,\n      disable: false,\n      possibleCustomEvents: props.possibleCustomEvents || \"\",\n      possibleCustomEventsOff: props.possibleCustomEventsOff || \"\",\n      originTooltip: null,\n      isMultiline: false,\n    };\n\n    this.bind([\n      \"showTooltip\",\n      \"updateTooltip\",\n      \"hideTooltip\",\n      \"hideTooltipOnScroll\",\n      \"getTooltipContent\",\n      \"globalRebuild\",\n      \"globalShow\",\n      \"globalHide\",\n      \"onWindowResize\",\n      \"mouseOnToolTip\",\n    ]);\n\n    this.mount = true;\n    this.delayShowLoop = null;\n    this.delayHideLoop = null;\n    this.delayReshow = null;\n    this.intervalUpdateContent = null;\n  }\n\n  /**\n   * For unify the bind and unbind listener\n   */\n  bind(methodArray) {\n    methodArray.forEach(method => {\n      this[method] = this[method].bind(this);\n    });\n  }\n\n  componentDidMount() {\n    const { insecure, resizeHide } = this.props;\n    if (insecure) {\n      // this.setStyleHeader(); // Set the style to the <link>\n    }\n\n    this.bindListener(); // Bind listener for tooltip\n    this.bindWindowEvents(resizeHide); // Bind global event for static method\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { ariaProps } = prevState;\n    const newAriaProps = parseAria(nextProps);\n    const isChanged = Object.keys(newAriaProps).some(props => {\n      return newAriaProps[props] !== ariaProps[props];\n    });\n    if (!isChanged) {\n      return null;\n    }\n    return {\n      ...prevState,\n      ariaProps: newAriaProps,\n    };\n  }\n\n  componentWillUnmount() {\n    this.mount = false;\n\n    this.clearTimer();\n\n    this.unbindListener();\n    this.removeScrollListener();\n    this.unbindWindowEvents();\n  }\n\n  /**\n   * Return if the mouse is on the tooltip.\n   * @returns {boolean} true - mouse is on the tooltip\n   */\n  mouseOnToolTip() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      /* old IE or Firefox work around */\n      if (!this.tooltipRef.matches) {\n        /* old IE work around */\n        if (this.tooltipRef.msMatchesSelector) {\n          this.tooltipRef.matches = this.tooltipRef.msMatchesSelector;\n        } else {\n          /* old Firefox work around */\n          this.tooltipRef.matches = this.tooltipRef.mozMatchesSelector;\n        }\n      }\n      return this.tooltipRef.matches(\":hover\");\n    }\n    return false;\n  }\n\n  /**\n   * Pick out corresponded target elements\n   */\n  getTargetArray(id) {\n    let targetArray = [];\n    let selector;\n    if (!id) {\n      selector = \"[data-tip]:not([data-for])\";\n    } else {\n      const escaped = id.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"');\n      selector = `[data-tip][data-for=\"${escaped}\"]`;\n    }\n\n    // Scan document for shadow DOM elements\n    nodeListToArray(document.getElementsByTagName(\"*\"))\n      .filter(element => element.shadowRoot)\n      .forEach(element => {\n        targetArray = targetArray.concat(\n          nodeListToArray(element.shadowRoot.querySelectorAll(selector))\n        );\n      });\n    return targetArray.concat(\n      nodeListToArray(document.querySelectorAll(selector))\n    );\n  }\n\n  /**\n   * Bind listener to the target elements\n   * These listeners used to trigger showing or hiding the tooltip\n   */\n  bindListener() {\n    const { id, globalEventOff, isCapture } = this.props;\n    const targetArray = this.getTargetArray(id);\n\n    targetArray.forEach(target => {\n      if (target.getAttribute(\"currentItem\") === null) {\n        target.setAttribute(\"currentItem\", \"false\");\n      }\n      this.unbindBasicListener(target);\n      if (this.isCustomEvent(target)) {\n        this.customUnbindListener(target);\n      }\n    });\n\n    if (this.isBodyMode()) {\n      this.bindBodyListener(targetArray);\n    } else {\n      targetArray.forEach(target => {\n        const isCaptureMode = this.isCapture(target);\n        const effect = this.getEffect(target);\n        if (this.isCustomEvent(target)) {\n          this.customBindListener(target);\n          return;\n        }\n\n        target.addEventListener(\"mouseenter\", this.showTooltip, isCaptureMode);\n        if (effect === \"float\") {\n          target.addEventListener(\n            \"mousemove\",\n            this.updateTooltip,\n            isCaptureMode\n          );\n        }\n        target.addEventListener(\"mouseleave\", this.hideTooltip, isCaptureMode);\n      });\n    }\n\n    // Global event to hide tooltip\n    if (globalEventOff) {\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n      window.addEventListener(globalEventOff, this.hideTooltip, isCapture);\n    }\n\n    // Track removal of targetArray elements from DOM\n    this.bindRemovalTracker();\n  }\n\n  /**\n   * Unbind listeners on target elements\n   */\n  unbindListener() {\n    const { id, globalEventOff } = this.props;\n    if (this.isBodyMode()) {\n      this.unbindBodyListener();\n    } else {\n      const targetArray = this.getTargetArray(id);\n      targetArray.forEach(target => {\n        this.unbindBasicListener(target);\n        if (this.isCustomEvent(target)) this.customUnbindListener(target);\n      });\n    }\n\n    if (globalEventOff)\n      window.removeEventListener(globalEventOff, this.hideTooltip);\n    this.unbindRemovalTracker();\n  }\n\n  /**\n   * Invoke this before bind listener and unmount the component\n   * it is necessary to invoke this even when binding custom event\n   * so that the tooltip can switch between custom and default listener\n   */\n  unbindBasicListener(target) {\n    const isCaptureMode = this.isCapture(target);\n    target.removeEventListener(\"mouseenter\", this.showTooltip, isCaptureMode);\n    target.removeEventListener(\"mousemove\", this.updateTooltip, isCaptureMode);\n    target.removeEventListener(\"mouseleave\", this.hideTooltip, isCaptureMode);\n  }\n\n  getTooltipContent() {\n    const { getContent, children } = this.props;\n\n    // Generate tooltip content\n    let content;\n    if (getContent) {\n      if (Array.isArray(getContent)) {\n        content = getContent[0] && getContent[0](this.state.originTooltip);\n      } else {\n        content = getContent(this.state.originTooltip);\n      }\n    }\n\n    return getTipContent(\n      this.state.originTooltip,\n      children,\n      content,\n      this.state.isMultiline\n    );\n  }\n\n  isEmptyTip(placeholder) {\n    return (\n      (typeof placeholder === \"string\" && placeholder === \"\") ||\n      placeholder === null\n    );\n  }\n\n  /**\n   * When mouse enter, show the tooltip\n   */\n  showTooltip(e, isGlobalCall) {\n    if (isGlobalCall) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some(ele => ele === e.currentTarget);\n      if (!isMyElement) return;\n    }\n    // Get the tooltip content\n    // calculate in this phrase so that tip width height can be detected\n    const { multiline, getContent } = this.props;\n    const originTooltip = e.currentTarget.getAttribute(\"data-tip\");\n    const isMultiline =\n      e.currentTarget.getAttribute(\"data-multiline\") || multiline || false;\n\n    // If it is focus event or called by ReactTooltip.show, switch to `solid` effect\n    const switchToSolid = e instanceof window.FocusEvent || isGlobalCall;\n\n    // if it needs to skip adding hide listener to scroll\n    let scrollHide = true;\n    if (e.currentTarget.getAttribute(\"data-scroll-hide\")) {\n      scrollHide = e.currentTarget.getAttribute(\"data-scroll-hide\") === \"true\";\n    } else if (this.props.scrollHide != null) {\n      scrollHide = this.props.scrollHide;\n    }\n\n    // Make sure the correct place is set\n    const desiredPlace =\n      e.currentTarget.getAttribute(\"data-place\") || this.props.place || \"top\";\n    const effect =\n      (switchToSolid && \"solid\") || this.getEffect(e.currentTarget);\n    const offset =\n      e.currentTarget.getAttribute(\"data-offset\") || this.props.offset || {};\n    const result = getPosition(\n      e,\n      e.currentTarget,\n      this.tooltipRef,\n      desiredPlace,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        e.currentTarget,\n        this.tooltipRef,\n        desiredPlace,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    const place = result.isNewState ? result.newState.place : desiredPlace;\n\n    // To prevent previously created timers from triggering\n    this.clearTimer();\n\n    var target = e.currentTarget;\n\n    var reshowDelay = this.state.show\n      ? target.getAttribute(\"data-delay-update\") || this.props.delayUpdate\n      : 0;\n\n    var self = this;\n\n    var updateState = function updateState() {\n      self.setState(\n        {\n          originTooltip: originTooltip,\n          isMultiline: isMultiline,\n          desiredPlace: desiredPlace,\n          place: place,\n          type: target.getAttribute(\"data-type\") || self.props.type || \"dark\",\n          effect: effect,\n          offset: offset,\n          html: target.getAttribute(\"data-html\")\n            ? target.getAttribute(\"data-html\") === \"true\"\n            : self.props.html || false,\n          delayShow:\n            target.getAttribute(\"data-delay-show\") || self.props.delayShow || 0,\n          delayHide:\n            target.getAttribute(\"data-delay-hide\") || self.props.delayHide || 0,\n          delayUpdate:\n            target.getAttribute(\"data-delay-update\") ||\n            self.props.delayUpdate ||\n            0,\n          border: target.getAttribute(\"data-border\")\n            ? target.getAttribute(\"data-border\") === \"true\"\n            : self.props.border || false,\n          extraClass:\n            target.getAttribute(\"data-class\") ||\n            self.props.class ||\n            self.props.className ||\n            \"\",\n          disable: target.getAttribute(\"data-tip-disable\")\n            ? target.getAttribute(\"data-tip-disable\") === \"true\"\n            : self.props.disable || false,\n          currentTarget: target,\n        },\n        () => {\n          if (scrollHide) self.addScrollListener(self.state.currentTarget);\n          self.updateTooltip(e);\n\n          if (getContent && Array.isArray(getContent)) {\n            self.intervalUpdateContent = setInterval(() => {\n              if (self.mount) {\n                const { getContent } = self.props;\n                const placeholder = getTipContent(\n                  originTooltip,\n                  \"\",\n                  getContent[0](),\n                  isMultiline\n                );\n                const isEmptyTip = self.isEmptyTip(placeholder);\n                self.setState({\n                  isEmptyTip,\n                });\n                self.updatePosition();\n              }\n            }, getContent[1]);\n          }\n        }\n      );\n    };\n\n    // If there is no delay call immediately, don't allow events to get in first.\n    if (reshowDelay) {\n      this.delayReshow = setTimeout(updateState, reshowDelay);\n    } else {\n      updateState();\n    }\n  }\n\n  /**\n   * When mouse hover, update tool tip\n   */\n  updateTooltip(e) {\n    const { delayShow, disable } = this.state;\n    const { afterShow } = this.props;\n    const placeholder = this.getTooltipContent();\n    const delayTime = parseInt(delayShow, 10);\n    const eventTarget = e.currentTarget || e.target;\n\n    // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n    if (this.mouseOnToolTip()) {\n      return;\n    }\n\n    if (this.isEmptyTip(placeholder) || disable) return; // if the tooltip is empty, disable the tooltip\n    const updateState = () => {\n      if (\n        (Array.isArray(placeholder) && placeholder.length > 0) ||\n        placeholder\n      ) {\n        const isInvisible = !this.state.show;\n        this.setState(\n          {\n            currentEvent: e,\n            currentTarget: eventTarget,\n            show: true,\n          },\n          () => {\n            this.updatePosition();\n            if (isInvisible && afterShow) afterShow(e);\n          }\n        );\n      }\n    };\n\n    clearTimeout(this.delayShowLoop);\n    if (delayShow) {\n      this.delayShowLoop = setTimeout(updateState, delayTime);\n    } else {\n      updateState();\n    }\n  }\n\n  /*\n   * If we're mousing over the tooltip remove it when we leave.\n   */\n  listenForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.addEventListener(\"mouseleave\", this.hideTooltip);\n    }\n  }\n\n  removeListenerForTooltipExit() {\n    const { show } = this.state;\n\n    if (show && this.tooltipRef) {\n      this.tooltipRef.removeEventListener(\"mouseleave\", this.hideTooltip);\n    }\n  }\n\n  /**\n   * When mouse leave, hide tooltip\n   */\n  hideTooltip(e, hasTarget, options = { isScroll: false }) {\n    const { disable } = this.state;\n    const { isScroll } = options;\n    const delayHide = isScroll ? 0 : this.state.delayHide;\n    const { afterHide } = this.props;\n    const placeholder = this.getTooltipContent();\n    if (!this.mount) return;\n    if (this.isEmptyTip(placeholder) || disable) return; // if the tooltip is empty, disable the tooltip\n    if (hasTarget) {\n      // Don't trigger other elements belongs to other ReactTooltip\n      const targetArray = this.getTargetArray(this.props.id);\n      const isMyElement = targetArray.some(ele => ele === e.currentTarget);\n      if (!isMyElement || !this.state.show) return;\n    }\n\n    const resetState = () => {\n      const isVisible = this.state.show;\n      // Check if the mouse is actually over the tooltip, if so don't hide the tooltip\n      if (this.mouseOnToolTip()) {\n        this.listenForTooltipExit();\n        return;\n      }\n      this.removeListenerForTooltipExit();\n\n      this.setState(\n        {\n          show: false,\n        },\n        () => {\n          this.removeScrollListener();\n          if (isVisible && afterHide) afterHide(e);\n        }\n      );\n    };\n\n    this.clearTimer();\n    if (delayHide) {\n      this.delayHideLoop = setTimeout(resetState, parseInt(delayHide, 10));\n    } else {\n      resetState();\n    }\n  }\n\n  /**\n   * When scroll, hide tooltip\n   */\n  hideTooltipOnScroll(event, hasTarget) {\n    this.hideTooltip(event, hasTarget, { isScroll: true });\n  }\n\n  /**\n   * Add scroll event listener when tooltip show\n   * automatically hide the tooltip when scrolling\n   */\n  addScrollListener(currentTarget) {\n    const isCaptureMode = this.isCapture(currentTarget);\n    window.addEventListener(\"scroll\", this.hideTooltipOnScroll, isCaptureMode);\n  }\n\n  removeScrollListener() {\n    window.removeEventListener(\"scroll\", this.hideTooltipOnScroll);\n  }\n\n  // Calculation the position\n  updatePosition() {\n    const {\n      currentEvent,\n      currentTarget,\n      place,\n      desiredPlace,\n      effect,\n      offset,\n    } = this.state;\n    const node = this.tooltipRef;\n    const result = getPosition(\n      currentEvent,\n      currentTarget,\n      node,\n      place,\n      desiredPlace,\n      effect,\n      offset\n    );\n    if (result.position && this.props.overridePosition) {\n      result.position = this.props.overridePosition(\n        result.position,\n        currentEvent,\n        currentTarget,\n        node,\n        place,\n        desiredPlace,\n        effect,\n        offset\n      );\n    }\n\n    if (result.isNewState) {\n      // Switch to reverse placement\n      return this.setState(result.newState, () => {\n        this.updatePosition();\n      });\n    }\n    // Set tooltip position\n    node.style.left = result.position.left + \"px\";\n    node.style.top = result.position.top + \"px\";\n  }\n\n  /**\n   * Set style tag in header\n   * in this way we can insert default css\n   */\n  /* setStyleHeader() {\n    const head = document.getElementsByTagName(\"head\")[0];\n    if (!head.querySelector('style[id=\"react-tooltip\"]')) {\n      const tag = document.createElement(\"style\");\n      tag.id = \"react-tooltip\";\n      tag.innerHTML = cssStyle; */\n  /* eslint-disable */\n/*      if (typeof __webpack_nonce__ !== 'undefined' && __webpack_nonce__) {\n        tag.setAttribute('nonce', __webpack_nonce__)\n      }*/\n      /* eslint-enable */\n  /*    head.insertBefore(tag, head.firstChild);\n    }\n  } */\n\n  /**\n   * CLear all kinds of timeout of interval\n   */\n  clearTimer() {\n    clearTimeout(this.delayShowLoop);\n    clearTimeout(this.delayHideLoop);\n    clearTimeout(this.delayReshow);\n    clearInterval(this.intervalUpdateContent);\n  }\n\n  render() {\n    const { extraClass, html, ariaProps, disable } = this.state;\n    const placeholder = this.getTooltipContent();\n    const isEmptyTip = this.isEmptyTip(placeholder);\n    const tooltipClass =\n      \"__react_component_tooltip\" +\n      (this.state.show && !disable && !isEmptyTip ? \" show\" : \"\") +\n      (this.state.border ? \" border\" : \"\") +\n      ` place-${this.state.place}` + // top, bottom, left, right\n      ` type-${this.state.type}` + // dark, success, warning, error, info, light\n      (this.props.delayUpdate ? \" allow_hover\" : \"\") +\n      (this.props.clickable ? \" allow_click\" : \"\");\n\n    let Wrapper = this.props.wrapper;\n    if (ReactTooltip.supportedWrappers.indexOf(Wrapper) < 0) {\n      Wrapper = ReactTooltip.defaultProps.wrapper;\n    }\n    const wrapperClassName = [tooltipClass, extraClass]\n      .filter(Boolean)\n      .join(\" \");\n\n    if (html) {\n      return (\n        <Wrapper\n          className={wrapperClassName}\n          id={this.props.id}\n          ref={ref => (this.tooltipRef = ref)}\n          {...ariaProps}\n          data-id=\"tooltip\"\n          dangerouslySetInnerHTML={{ __html: placeholder }}\n        />\n      );\n    } else {\n      return (\n        <Wrapper\n          className={wrapperClassName}\n          id={this.props.id}\n          {...ariaProps}\n          ref={ref => (this.tooltipRef = ref)}\n          data-id=\"tooltip\"\n        >\n          {placeholder}\n        </Wrapper>\n      );\n    }\n  }\n}\n\nexport default ReactTooltip;\n","/**\n * Events that should be bound to the window\n */\nimport CONSTANT from \"../constant\";\n\nexport default function(target) {\n  target.prototype.bindWindowEvents = function(resizeHide) {\n    // ReactTooltip.hide\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.addEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide, false);\n\n    // ReactTooltip.rebuild\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.addEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild, false);\n\n    // ReactTooltip.show\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.addEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow, false);\n\n    // Resize\n    if (resizeHide) {\n      window.removeEventListener(\"resize\", this.onWindowResize);\n      window.addEventListener(\"resize\", this.onWindowResize, false);\n    }\n  };\n\n  target.prototype.unbindWindowEvents = function() {\n    window.removeEventListener(CONSTANT.GLOBAL.HIDE, this.globalHide);\n    window.removeEventListener(CONSTANT.GLOBAL.REBUILD, this.globalRebuild);\n    window.removeEventListener(CONSTANT.GLOBAL.SHOW, this.globalShow);\n    window.removeEventListener(\"resize\", this.onWindowResize);\n  };\n\n  /**\n   * invoked by resize event of window\n   */\n  target.prototype.onWindowResize = function() {\n    if (!this.mount) return;\n    this.hideTooltip();\n  };\n}\n","/**\n * Util method to judge if it should follow capture model\n */\n\nexport default function(target) {\n  target.prototype.isCapture = function(currentTarget) {\n    return (\n      (currentTarget &&\n        currentTarget.getAttribute(\"data-iscapture\") === \"true\") ||\n      this.props.isCapture ||\n      false\n    );\n  };\n}\n","/**\n * Util method to get effect\n */\n\nexport default function(target) {\n  target.prototype.getEffect = function(currentTarget) {\n    const dataEffect = currentTarget.getAttribute(\"data-effect\");\n    return dataEffect || this.props.effect || \"float\";\n  };\n}\n"],"sourceRoot":""}