(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[10],{348:function(e,a,t){"use strict";var n=t(16);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),c=(0,n(t(17)).default)(r.default.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");a.default=c},349:function(e,a,t){"use strict";var n=t(16);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),c=(0,n(t(17)).default)(r.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");a.default=c},350:function(e,a,t){"use strict";var n=t(16);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),c=(0,n(t(17)).default)(r.default.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");a.default=c},439:function(e,a,t){"use strict";var n=t(1),r=t(2),c=t(0),o=t.n(c),l=(t(6),t(3)),i=t(5),s=t(67),d=o.a.forwardRef((function(e,a){var t=e.action,c=e.avatar,i=e.classes,d=e.className,u=e.component,p=void 0===u?"div":u,m=e.disableTypography,f=void 0!==m&&m,b=e.subheader,h=e.subheaderTypographyProps,g=e.title,v=e.titleTypographyProps,E=Object(r.a)(e,["action","avatar","classes","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),y=g;null==y||y.type===s.a||f||(y=o.a.createElement(s.a,Object(n.a)({variant:c?"body2":"h5",className:i.title,component:"span",display:"block"},v),y));var O=b;return null==O||O.type===s.a||f||(O=o.a.createElement(s.a,Object(n.a)({variant:c?"body2":"body1",className:i.subheader,color:"textSecondary",component:"span",display:"block"},h),O)),o.a.createElement(p,Object(n.a)({className:Object(l.a)(i.root,d),ref:a},E),c&&o.a.createElement("div",{className:i.avatar},c),o.a.createElement("div",{className:i.content},y,O),t&&o.a.createElement("div",{className:i.action},t))}));a.a=Object(i.a)({root:{display:"flex",alignItems:"center",padding:16},avatar:{flex:"0 0 auto",marginRight:16},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-8,marginRight:-8},content:{flex:"1 1 auto"},title:{},subheader:{}},{name:"MuiCardHeader"})(d)},858:function(e,a,t){"use strict";t.r(a);var n=t(15),r=t(0),c=t.n(r),o=t(216),l=t(117),i=t(224),s=t(232),d=t(248),u=t(95),p=t.n(u),m=t(96),f=t.n(m),b=t(93),h=t(137),g=t(245),v=t(237),E=t(236),y=t(182),O=t(246),j=t(439),S=t(177),$=t(247),x=t(67),C=t(350),k=t.n(C),M=t(349),I=t.n(M),z=t(348),N=t.n(z),w=Object(l.a)((function(e){return{card:{maxWidth:345,height:170,cursor:"pointer","&:hover":{boxShadow:"0px 5px 10px -1px rgba(0,0,0,0.3), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 1px 3px 0px rgba(0 ,0,0,0.12)"}},cardHeader:{overflow:"auto"}}})),T=function(e){var a=e.spend,t=e.remove,r=e.edit,o=w(),l=c.a.useState(null),i=Object(n.a)(l,2),s=i[0],d=i[1],u=!!s,p=function(){d(null)},m=c.a.createElement(h.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:p},c.a.createElement(g.a,{onClick:function(){p(),r()}},c.a.createElement(v.a,null,c.a.createElement(N.a,{fontSize:"small"})),c.a.createElement(E.a,{primary:"Modificar"})),c.a.createElement(g.a,{onClick:function(){p(),t()}},c.a.createElement(v.a,null,c.a.createElement(I.a,{fontSize:"small"})),c.a.createElement(E.a,{primary:"Eliminar"})));return c.a.createElement(c.a.Fragment,null,c.a.createElement(y.a,{title:a.spendtype},c.a.createElement(O.a,{className:o.card},c.a.createElement(j.a,{action:c.a.createElement(S.a,{"aria-label":"settings",onClick:function(e){d(e.target)}},c.a.createElement(k.a,null)),title:"-$".concat(a.spendamount),subheader:Object(b.c)(a.date)}),c.a.createElement($.a,{className:o.cardContent},c.a.createElement(x.a,{variant:"h6",color:"textSecondary",component:"p",style:{position:"static"}},a.spendtype)))),m)},D=t(217),F=t(222),P=t(223),_=t(254),A=t(230),H=t(231),q=t(99),R=t(28),V=t(250),W=function(){return{useSpendTypeState:Object(r.useState)(""),useSpendAmmountState:Object(r.useState)(0),useSpendDate:Object(r.useState)(new Date)}},B=function(e){var a=e.handleOk,t=e.handleCancel,r=e.open,o=e.edit,l=W(),s=l.useSpendTypeState,d=l.useSpendAmmountState,u=l.useSpendDate,p=Object(n.a)(s,2),m=p[0],f=p[1],h=Object(n.a)(d,2),g=h[0],v=h[1],E=Object(n.a)(u,2),y=E[0],O=E[1];return c.a.useEffect((function(){o?(f(o.spendtype),v(o.spendamount),O(o.date)):(f(""),v(0),O(new Date))}),[r,o,f,v,O]),c.a.createElement(D.a,{open:r,onClose:t,"aria-labelledby":"form-dialog-title"},c.a.createElement(F.a,{id:"form-dialog-title"},"Adicionar gasto"),c.a.createElement(P.a,null,c.a.createElement(_.a,{autoFocus:!0,margin:"dense",label:"Tipo de gasto",type:"text",fullWidth:!0,value:m,onChange:function(e){return f(e.target.value)}}),c.a.createElement(b.a,{handleChange:function(e){return v(+e.target.value)},value:g,label:"Cantidad"}),c.a.createElement(R.a,{utils:q.a},c.a.createElement(i.a,{container:!0},c.a.createElement(V.a,{disableToolbar:!0,margin:"normal",variant:"dialog",format:"dd/MM/yyyy",label:"Fecha",value:y,onChange:O,KeyboardButtonProps:{"aria-label":"Fecha"}})))),c.a.createElement(A.a,null,c.a.createElement(H.a,{onClick:t,color:"primary"},"Cancelar"),c.a.createElement(H.a,{onClick:function(){return a(o&&o.id,m,g,y)},color:"primary"},"Guardar")))},J=t(47),L=t(36);function G(){var e=Object(J.a)(["\nquery ($spendtype: String, $gte:Float, $lte: Float, $eq: Float, $before: Date, $after: Date, $start: Int, $limit: Int){\n    spends(\n          spendtype: $spendtype,\n          spendamount: {gte:$gte, lte:$lte, eq: $eq},\n          dateRange:{\n            before: $before,\n            after: $after\n        },\n          pagination:{\n            start: $start,\n            limit: $limit\n        }\n    ){\n      success\n      message\n      spend{\n        id\n        spendtype\n        spendamount\n        date\n      }\n    }\n  }\n"]);return G=function(){return e},e}function K(){var e=Object(J.a)(["\nmutation($spendId: ID!){\n    removeSpend(spendId: $spendId){\n      success\n      message\n    }\n  }\n"]);return K=function(){return e},e}function Q(){var e=Object(J.a)(["\n    mutation ($spendId: ID, $spendtype: String!, $spendammount: Float!, $date: Date) {\n        upsertSpend(spendId: $spendId, spendtype: $spendtype, amount: $spendammount, date: $date){\n            success\n            message\n            spend{\n            id\n            spendtype\n            spendamount\n            date\n            }\n        }\n    }\n"]);return Q=function(){return e},e}var U=Object(L.b)(Q()),X=Object(L.b)(K()),Y=Object(L.b)(G()),Z=Object(l.a)((function(e){return{container:{padding:e.spacing(1)}}})),ee=function(e){return c.a.createElement(i.a,{item:!0,xs:12,sm:6,md:6,lg:4},e.children)},ae=function(e){var a=Z(),t=c.a.useState(!1),l=Object(n.a)(t,2),u=l[0],m=l[1],h=c.a.useState(null),g=Object(n.a)(h,2),v=g[0],E=g[1],y=Object(o.c)(Y,{variables:{start:0,limit:20}}),O=y.data,j=y.loading,S=y.refetch,$=y.error,x=Object(o.b)(U),C=Object(n.a)(x,1)[0],k=Object(o.b)(X),M=Object(n.a)(k,1)[0],I=Object(b.d)(),z=Object(n.a)(I,2),N=z[0],w=z[1],D=Object(b.e)(),F=Object(n.a)(D,2),P=F[0],_=F[1];return Object(r.useEffect)((function(){_(!!j)}),[j,_]),Object(r.useEffect)((function(){$&&w("Ocurrio un error al intentar cargar los datos.","error")}),[$,w]),c.a.createElement(c.a.Fragment,null,P,c.a.createElement(s.a,null),c.a.createElement(d.a,{maxWidth:"md",className:a.container},c.a.createElement(i.a,{container:!0,spacing:2},O&&O.spends&&O.spends.spend.map((function(e){return c.a.createElement(ee,{key:e.id},c.a.createElement(T,{spend:e,remove:function(){return a=e.id,_(!0),void M({variables:{spendId:a}}).then((function(e){if(!e.data.removeSpend.success)throw new Error;w("El gasto ha sido eliminado.","success"),_(!1)})).then((function(){S()})).catch((function(e){w("Ocurrio un error eliminando el gasto.","error"),_(!1)}));var a},edit:function(){m(!0),E(e)}}))}))),c.a.createElement(b.b,{actions:[{icon:c.a.createElement(p.a,null),name:"Adicionar gasto",onClick:function(){return m(!0)}},{icon:c.a.createElement(f.a,null),name:"Buscar gasto",onClick:function(){return alert("Abrir interfaz para buscar gasto")}}]})),c.a.createElement(B,{open:u,handleCancel:function(){m(!1),E(null)},handleOk:function(e,a,t,n){!function(e,a,t,n){m(!1),_(!0),C({variables:{spendId:e,spendtype:a,spendammount:t,date:n}}).then((function(e){if(!e.data.upsertSpend.success)throw new Error;w("El gasto ha sido guardado.","success"),_(!1)})).then((function(){S()})).catch((function(e){w("Ha ocurreido un error. No se ha podido salvar el gasto.","error"),_(!1)}))}(e,a,t,n),m(!1),E(null)},edit:v}),N)};a.default=ae}}]);
//# sourceMappingURL=10.9d2bc2eb.chunk.js.map